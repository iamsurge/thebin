#include <cs50.h>
#include <stdio.h>

int main(void)
{
    long card_number = get_long("Enter a card number: ");

    long c_n_copy = card_number;
    int c_len = 0;
    while (c_n_copy)
    {
        c_len += 1;
        c_n_copy /= 10;
    }

    int start_ns = 0;
    if (c_len == 13)
    {
        start_ns = card_number / 100000000000;

    }
    else if (c_len == 15)
    {
        start_ns = card_number / 10000000000000;

    }
    else if (c_len == 16)
    {
        start_ns = card_number / 100000000000000;
    }

    if ((c_len == 13 || c_len == 15 || c_len == 16) && (start_ns == 37 || start_ns == 34 || start_ns == 51 || start_ns == 52 || start_ns == 53 || start_ns == 54 || start_ns == 55 || start_ns / 10 == 4))
    {
        c_n_copy = card_number;
        int cur_n;
        int even_sum_n = 0; // It's not actually about being even but idk what name to choose
        int sum_n = 0;
        while (c_n_copy) {
            c_n_copy /= 10;

            cur_n = 2 * (c_n_copy % 10);

            if (cur_n >= 10)
            {
                cur_n = (cur_n / 10) + (cur_n % 10);
            }
            even_sum_n += cur_n;
            c_n_copy /= 10;
        }

        c_n_copy = card_number;
        int odd_sum_n = 0;
        while (c_n_copy)
        {
            odd_sum_n += c_n_copy % 10;

            c_n_copy /= 100;
        }

        sum_n += odd_sum_n + even_sum_n;

        if (sum_n % 10 == 0)
        {
            if (c_len == 15 && (start_ns == 37 || start_ns == 34))
            {
                printf("AMEX\n");
            }
            else if ((c_len == 13 || c_len == 16) && start_ns / 10 == 4)
            {
                printf("VISA\n");

            }
            else if ((c_len == 16 && (start_ns == 51 || start_ns == 52 || start_ns == 53 || start_ns == 54 || start_ns == 55)))
            {
                printf("MASTERCARD\n");
            }
            else
            {
                printf("INVALID\n");
            }

        }
        else
        {
            printf("INVALID\n");
        }
    }
    else
    {
        printf("INVALID\n");
    }

}