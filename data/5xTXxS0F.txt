#!/bin/bash
###################################################################### 
#Copyright (C) 2022  Kris Occhipinti
#https://filmsbykris.com

#This program is free software: you can redistribute it and/or modify
#it under the terms of the GNU General Public License as published by
#the Free Software Foundation version 3 of the License.

#This program is distributed in the hope that it will be useful,
#but WITHOUT ANY WARRANTY; without even the implied warranty of
#MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#GNU General Public License for more details.

#You should have received a copy of the GNU General Public License
#along with this program.  If not, see <http://www.gnu.org/licenses/>.
###################################################################### 

#this scre will download and decode message from 
#Information Society - 300BPS N, 8, I

if [[ ! `which yt-dlp` ]]
then
  echo "yt-dlp is needed"
  echo "https://github.com/yt-dlp/yt-dlp/releases/tag/2022.11.11"
  exit 1
fi

#check other dependence
[[ `which minimodem` ]] || sudo apt install minimodem ffmpeg

#download song from youtube
yt-dlp "https://www.youtube.com/watch?v=siZlN_VCI_0" -o audio.webm

#convert to mono wav file
ffmpeg -i audio.webm -ac 1 audio.wav

#decode message
minimodem -a -f audio.wav 300
