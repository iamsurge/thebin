int[,] CreateSpiral2DMatrix(int size) {
	
	int[,] result = new int[size, size];
	
	int number = 1;
	int i = 0;
	int j = 0;

	while (number <= size * size)
	{
		result[i, j] = number;
		
		if (i <= j + 1 && i + j < size - 1)
		{
			++j;
		}
		else if (i < j && i + j >= size - 1)
		{
			++i;
		}
		else if (i >= j && i + j > size - 1)
		{
			--j;
		}
		else
		{
			--i;
		}
		++number;
	}
	
	return result;
}

void Print2DMatrix(int[,] target_matrix) {
    for (int i = 0; i < target_matrix.GetLength(0); i++)
    {
        for (int j = 0; j < target_matrix.GetLength(1); j++)
        {
			var result = target_matrix[i, j];
            Console.Write(((result < 10) ? "0" + result : result) + " ");
        }
        Console.WriteLine();
    }
    Console.WriteLine();
}

Console.WriteLine();

int default_matrix_size = 4;

// Определяем размерность
Console.Write($"Введите размерн матрицы ({default_matrix_size}): ");
int matrix_size = int.TryParse(Console.ReadLine(), out matrix_size) ? matrix_size : default_matrix_size;

Console.WriteLine();

// Инициализируем матрицу
int[,] matrix = CreateSpiral2DMatrix(matrix_size);

Print2DMatrix(matrix);
