#language: pt

@AppRennerApi
@Central_de_notificações
Funcionalidade: Central de notificacoes
#POST
  #  200
#  @1
  Cenario: Chamar endpoint de autenticacao da central de notificacoes e validar contrato
    Quando realizar a requisicao no endpoint de autenticacao
    Entao validar contrato do endpoint de autenticacao
#GET
  #  200
  @1
  Cenario: Chamar endpoint do message center e validar contrato de messages
    Quando realizar a requisicao no endpoint de autenticacao
    E chamar o endpoint do message center com o token de autenticacao
    Entao validar contrato do endpoint do message center

#    Quando defino o payload da chamada
#    E o método "post" é executado no endpoint "<api>"
#    Então deve retornar o status "<status>"
#    E retornar o hash

#  baseUrlAuth
#  baseUrlMessageCenter

  #  400 SEM HEADER AUTH OU SEM O CONTENT TYPE, NAO LEMBRO
  #  500 SEM USER OU PASSWORD
  #  VALIDAR CONTRATO
#GET
  #  200
  #  400 CODIGO DE DEVICE INVALIDO, /APP/CODIGO/USER/CODIGO
  #  401 AUTENTICAÇÃO ERRADA
  #  VALIDAR O CONTRATO DAS MENSAGENS

#  Contexto: Token de Acesso
#    Dado que possua o token de acesso a api do App Renner
#      | endpoint |
#      | urlToken |

#  @AppRennerApi_AtendimentoListaPerguntas_001
#  Cenario: Listar as perguntas do App Renner com sucesso
#    Quando realizar a requisicao no endpoint 'listarPerguntas'
#    Então a api retorna 200
#
#  @AppRennerApi_AtendimentoListaPerguntas_002
#  Cenario: Validar contrato listagem de perguntas
#    Quando realizar a requisicao no endpoint 'listarPerguntas'
#    Então a api retorna 200
#    E os valores de seu contrato estao corretos

-------------------------------------------------------------
steps
package br.com.renner.modeloApi.steps.appRenner.quizEstilo.get;

import br.com.renner.modeloApi.steps.appRenner.CommonsSteps;
import br.com.renner.modeloApi.utils.ApiUtils;
import br.com.renner.modeloApi.utils.JsonUtils;
import br.com.renner.modeloApi.utils.PropertiesLoader;
import br.com.renner.modeloApi.utils.RequestUtils;
import io.cucumber.java.pt.E;
import io.cucumber.java.pt.Entao;
import io.cucumber.java.pt.Quando;
import io.restassured.path.json.JsonPath;
import io.restassured.response.ValidatableResponse;
import org.apache.commons.lang3.StringUtils;
import org.json.simple.parser.ParseException;

import java.io.IOException;
import java.util.Map;

import static io.restassured.module.jsv.JsonSchemaValidator.matchesJsonSchemaInClasspath;
import static org.hamcrest.MatcherAssert.assertThat;
import static org.hamcrest.Matchers.*;

public class steps extends ApiUtils {
    PropertiesLoader props = new PropertiesLoader();
    ApiUtils apiUtils = new ApiUtils();
    JsonUtils jsonUtils = new JsonUtils();
    RequestUtils requestUtils = new RequestUtils();

    @Quando("realizar a requisicao no endpoint de autenticacao")
    public void realizar_a_requisicao_no_endpoint_de_autenticacao() throws IOException, ParseException {
        String url = props.getApiPropertie("baseUrlAuth");
        String body = "user_name=martech@renner&password=a77*2wD1ZZ2p&auth_type=password";

        robotsTool.setBody("user_name=martech@renner&password=a77*2wD1ZZ2p&auth_type=password");
        robotsTool.setHeader("Content-Type", "application/x-www-form-urlencoded");
        postEndpointWithoutContentHeader(url, robotsTool, body, CommonsSteps.token);
    }

    @Entao("validar contrato do endpoint de autenticacao")
    public void validar_contrato_do_endpoint_de_autenticacao() {
        apiUtils.validarContrato("schemas/quizEstilo/schema.json", robotsTool);
    }

    @E("chamar o endpoint do message center com o token de autenticacao")
    public void chamar_o_endpoint_do_message_center_com_o_token_de_autenticacao() {
//        String authToken = getAuthToken();
        String url = props.getApiPropertie("baseUrlMessageCenter")
                + "apps/8000005/users/8831141430/messages";
        robotsTool.setHeader("Authorization", "ECkvycrq4-RXr4h21aapQ2LDOIfwfFoFg59dGBiYH0GuR_W4LTeB5HEoj0");
//        robotsTool.getUrl(endpoint);
        robotsTool.setBody("");

        robotsTool = getEndpoint(url, robotsTool, CommonsSteps.token);

//        OkHttpClient client = new OkHttpClient().newBuilder()
//                .build();
//        MediaType mediaType = MediaType.parse("text/plain");
//        RequestBody body = RequestBody.create(mediaType, "");
//        Request request = new Request.Builder()
//                .url("https://api5-009.responsys.net/rest/api/v1.3/messageCenter/apps/8000005/users/8831141430/messages")
//                .method("GET", body)
//                .addHeader("Authorization", "ECkvycrq4-RXr4h21aapQ2LDOIfwfFoFg59dGBiYH0GuR_W4LTeB5HEoj0")
//                .build();
//        Response response = client.newCall(request).execute();
    }


    @Entao("validar contrato do endpoint do message center")
    public void validar_contrato_do_endpoint_do_message_center() {
        int ab = 11;
//        get("/products").then().assertThat().body(matchesJsonSchemaInClasspath("products-schema.json"));
        apiUtils.validarContrato("schemas/quizEstilo/messageSchema.json", robotsTool);
        int a = 11;


    }


    private String getAuthToken() {
        String url = props.getApiPropertie("baseUrlAuth");
        String body = "user_name=martech@renner&password=a77*2wD1ZZ2p&auth_type=password";

        robotsTool.setBody("user_name=martech@renner&password=a77*2wD1ZZ2p&auth_type=password");
        robotsTool.setHeader("Content-Type", "application/x-www-form-urlencoded");
        robotsTool.postUrl(url);

        return (String) robotsTool.httpResponse.body().jsonPath().get("authToken");
    }
}
--------------------------------
schema post
{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "type": "object",
  "properties": {
    "authToken": {
      "type": "string"
    },
    "issuedAt": {
      "type": "integer"
    },
    "endPoint": {
      "type": "string"
    }
  },
  "required": [
    "authToken",
    "issuedAt",
    "endPoint"
  ]
}
--------------------
schema message


{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "type": "object",
  "properties": {
    "next_req_time": {
      "type": "string"
    },
    "messages": {
      "type": "array",
      "items": [
        {
          "type": "object",
          "properties": {
            "icon_url": {
              "type": "string"
            },
            "device_id": {
              "type": "string"
            },
            "richmessage_url": {
              "type": "null"
            },
            "subject": {
              "type": "string"
            },
            "deeplink_url": {
              "type": "string"
            },
            "sent_ts": {
              "type": "string"
            },
            "message": {
              "type": "string"
            },
            "message_center_name": {
              "type": "string"
            },
            "form_link": {
              "type": "string"
            },
            "expiry_datetime": {
              "type": "string"
            },
            "user_id": {
              "type": "string"
            },
            "expiry_ts": {
              "type": "string"
            },
            "richmessage_html": {
              "type": "string"
            },
            "id": {
              "type": "string"
            }
          },
          "required": [
            "icon_url",
            "device_id",
            "richmessage_url",
            "subject",
            "deeplink_url",
            "sent_ts",
            "message",
            "message_center_name",
            "form_link",
            "expiry_datetime",
            "user_id",
            "expiry_ts",
            "richmessage_html",
            "id"
          ]
        },
        {
          "type": "object",
          "properties": {
            "icon_url": {
              "type": "string"
            },
            "device_id": {
              "type": "string"
            },
            "richmessage_url": {
              "type": "null"
            },
            "subject": {
              "type": "string"
            },
            "deeplink_url": {
              "type": "string"
            },
            "sent_ts": {
              "type": "string"
            },
            "message": {
              "type": "string"
            },
            "message_center_name": {
              "type": "string"
            },
            "form_link": {
              "type": "string"
            },
            "expiry_datetime": {
              "type": "string"
            },
            "user_id": {
              "type": "string"
            },
            "expiry_ts": {
              "type": "string"
            },
            "richmessage_html": {
              "type": "string"
            },
            "id": {
              "type": "string"
            }
          },
          "required": [
            "icon_url",
            "device_id",
            "richmessage_url",
            "subject",
            "deeplink_url",
            "sent_ts",
            "message",
            "message_center_name",
            "form_link",
            "expiry_datetime",
            "user_id",
            "expiry_ts",
            "richmessage_html",
            "id"
          ]
        },
        {
          "type": "object",
          "properties": {
            "icon_url": {
              "type": "string"
            },
            "device_id": {
              "type": "string"
            },
            "richmessage_url": {
              "type": "null"
            },
            "subject": {
              "type": "string"
            },
            "deeplink_url": {
              "type": "string"
            },
            "sent_ts": {
              "type": "string"
            },
            "message": {
              "type": "string"
            },
            "message_center_name": {
              "type": "string"
            },
            "form_link": {
              "type": "string"
            },
            "expiry_datetime": {
              "type": "string"
            },
            "user_id": {
              "type": "string"
            },
            "expiry_ts": {
              "type": "string"
            },
            "richmessage_html": {
              "type": "string"
            },
            "id": {
              "type": "string"
            }
          },
          "required": [
            "icon_url",
            "device_id",
            "richmessage_url",
            "subject",
            "deeplink_url",
            "sent_ts",
            "message",
            "message_center_name",
            "form_link",
            "expiry_datetime",
            "user_id",
            "expiry_ts",
            "richmessage_html",
            "id"
          ]
        },
        {
          "type": "object",
          "properties": {
            "icon_url": {
              "type": "string"
            },
            "device_id": {
              "type": "string"
            },
            "richmessage_url": {
              "type": "null"
            },
            "subject": {
              "type": "string"
            },
            "deeplink_url": {
              "type": "string"
            },
            "sent_ts": {
              "type": "string"
            },
            "message": {
              "type": "string"
            },
            "message_center_name": {
              "type": "string"
            },
            "form_link": {
              "type": "string"
            },
            "expiry_datetime": {
              "type": "string"
            },
            "user_id": {
              "type": "string"
            },
            "expiry_ts": {
              "type": "string"
            },
            "richmessage_html": {
              "type": "string"
            },
            "id": {
              "type": "string"
            }
          },
          "required": [
            "icon_url",
            "device_id",
            "richmessage_url",
            "subject",
            "deeplink_url",
            "sent_ts",
            "message",
            "message_center_name",
            "form_link",
            "expiry_datetime",
            "user_id",
            "expiry_ts",
            "richmessage_html",
            "id"
          ]
        },
        {
          "type": "object",
          "properties": {
            "icon_url": {
              "type": "string"
            },
            "device_id": {
              "type": "string"
            },
            "richmessage_url": {
              "type": "null"
            },
            "subject": {
              "type": "string"
            },
            "deeplink_url": {
              "type": "string"
            },
            "sent_ts": {
              "type": "string"
            },
            "message": {
              "type": "string"
            },
            "message_center_name": {
              "type": "string"
            },
            "form_link": {
              "type": "string"
            },
            "expiry_datetime": {
              "type": "string"
            },
            "user_id": {
              "type": "string"
            },
            "expiry_ts": {
              "type": "string"
            },
            "richmessage_html": {
              "type": "string"
            },
            "id": {
              "type": "string"
            }
          },
          "required": [
            "icon_url",
            "device_id",
            "richmessage_url",
            "subject",
            "deeplink_url",
            "sent_ts",
            "message",
            "message_center_name",
            "form_link",
            "expiry_datetime",
            "user_id",
            "expiry_ts",
            "richmessage_html",
            "id"
          ]
        },
        {
          "type": "object",
          "properties": {
            "icon_url": {
              "type": "string"
            },
            "device_id": {
              "type": "string"
            },
            "richmessage_url": {
              "type": "null"
            },
            "subject": {
              "type": "string"
            },
            "deeplink_url": {
              "type": "string"
            },
            "sent_ts": {
              "type": "string"
            },
            "message": {
              "type": "string"
            },
            "message_center_name": {
              "type": "string"
            },
            "form_link": {
              "type": "string"
            },
            "expiry_datetime": {
              "type": "string"
            },
            "user_id": {
              "type": "string"
            },
            "expiry_ts": {
              "type": "string"
            },
            "richmessage_html": {
              "type": "string"
            },
            "id": {
              "type": "string"
            }
          },
          "required": [
            "icon_url",
            "device_id",
            "richmessage_url",
            "subject",
            "deeplink_url",
            "sent_ts",
            "message",
            "message_center_name",
            "form_link",
            "expiry_datetime",
            "user_id",
            "expiry_ts",
            "richmessage_html",
            "id"
          ]
        },
        {
          "type": "object",
          "properties": {
            "icon_url": {
              "type": "string"
            },
            "device_id": {
              "type": "string"
            },
            "richmessage_url": {
              "type": "null"
            },
            "subject": {
              "type": "string"
            },
            "deeplink_url": {
              "type": "string"
            },
            "sent_ts": {
              "type": "string"
            },
            "message": {
              "type": "string"
            },
            "message_center_name": {
              "type": "string"
            },
            "form_link": {
              "type": "string"
            },
            "expiry_datetime": {
              "type": "string"
            },
            "user_id": {
              "type": "string"
            },
            "expiry_ts": {
              "type": "string"
            },
            "richmessage_html": {
              "type": "string"
            },
            "id": {
              "type": "string"
            }
          },
          "required": [
            "icon_url",
            "device_id",
            "richmessage_url",
            "subject",
            "deeplink_url",
            "sent_ts",
            "message",
            "message_center_name",
            "form_link",
            "expiry_datetime",
            "user_id",
            "expiry_ts",
            "richmessage_html",
            "id"
          ]
        },
        {
          "type": "object",
          "properties": {
            "icon_url": {
              "type": "string"
            },
            "device_id": {
              "type": "string"
            },
            "richmessage_url": {
              "type": "null"
            },
            "subject": {
              "type": "string"
            },
            "deeplink_url": {
              "type": "string"
            },
            "sent_ts": {
              "type": "string"
            },
            "message": {
              "type": "string"
            },
            "message_center_name": {
              "type": "string"
            },
            "form_link": {
              "type": "string"
            },
            "expiry_datetime": {
              "type": "string"
            },
            "user_id": {
              "type": "string"
            },
            "expiry_ts": {
              "type": "string"
            },
            "richmessage_html": {
              "type": "string"
            },
            "id": {
              "type": "string"
            }
          },
          "required": [
            "icon_url",
            "device_id",
            "richmessage_url",
            "subject",
            "deeplink_url",
            "sent_ts",
            "message",
            "message_center_name",
            "form_link",
            "expiry_datetime",
            "user_id",
            "expiry_ts",
            "richmessage_html",
            "id"
          ]
        },
        {
          "type": "object",
          "properties": {
            "icon_url": {
              "type": "string"
            },
            "device_id": {
              "type": "string"
            },
            "richmessage_url": {
              "type": "null"
            },
            "subject": {
              "type": "string"
            },
            "deeplink_url": {
              "type": "string"
            },
            "sent_ts": {
              "type": "string"
            },
            "message": {
              "type": "string"
            },
            "message_center_name": {
              "type": "string"
            },
            "form_link": {
              "type": "string"
            },
            "expiry_datetime": {
              "type": "string"
            },
            "user_id": {
              "type": "string"
            },
            "expiry_ts": {
              "type": "string"
            },
            "richmessage_html": {
              "type": "string"
            },
            "id": {
              "type": "string"
            }
          },
          "required": [
            "icon_url",
            "device_id",
            "richmessage_url",
            "subject",
            "deeplink_url",
            "sent_ts",
            "message",
            "message_center_name",
            "form_link",
            "expiry_datetime",
            "user_id",
            "expiry_ts",
            "richmessage_html",
            "id"
          ]
        },
        {
          "type": "object",
          "properties": {
            "icon_url": {
              "type": "string"
            },
            "device_id": {
              "type": "string"
            },
            "richmessage_url": {
              "type": "null"
            },
            "subject": {
              "type": "string"
            },
            "deeplink_url": {
              "type": "string"
            },
            "sent_ts": {
              "type": "string"
            },
            "message": {
              "type": "string"
            },
            "message_center_name": {
              "type": "string"
            },
            "form_link": {
              "type": "string"
            },
            "expiry_datetime": {
              "type": "string"
            },
            "user_id": {
              "type": "string"
            },
            "expiry_ts": {
              "type": "string"
            },
            "richmessage_html": {
              "type": "string"
            },
            "id": {
              "type": "string"
            }
          },
          "required": [
            "icon_url",
            "device_id",
            "richmessage_url",
            "subject",
            "deeplink_url",
            "sent_ts",
            "message",
            "message_center_name",
            "form_link",
            "expiry_datetime",
            "user_id",
            "expiry_ts",
            "richmessage_html",
            "id"
          ]
        },
        {
          "type": "object",
          "properties": {
            "icon_url": {
              "type": "string"
            },
            "device_id": {
              "type": "string"
            },
            "richmessage_url": {
              "type": "null"
            },
            "subject": {
              "type": "string"
            },
            "deeplink_url": {
              "type": "string"
            },
            "sent_ts": {
              "type": "string"
            },
            "message": {
              "type": "string"
            },
            "message_center_name": {
              "type": "string"
            },
            "form_link": {
              "type": "string"
            },
            "expiry_datetime": {
              "type": "string"
            },
            "user_id": {
              "type": "string"
            },
            "expiry_ts": {
              "type": "string"
            },
            "richmessage_html": {
              "type": "string"
            },
            "id": {
              "type": "string"
            }
          },
          "required": [
            "icon_url",
            "device_id",
            "richmessage_url",
            "subject",
            "deeplink_url",
            "sent_ts",
            "message",
            "message_center_name",
            "form_link",
            "expiry_datetime",
            "user_id",
            "expiry_ts",
            "richmessage_html",
            "id"
          ]
        },
        {
          "type": "object",
          "properties": {
            "icon_url": {
              "type": "string"
            },
            "device_id": {
              "type": "string"
            },
            "richmessage_url": {
              "type": "null"
            },
            "subject": {
              "type": "string"
            },
            "deeplink_url": {
              "type": "string"
            },
            "sent_ts": {
              "type": "string"
            },
            "message": {
              "type": "string"
            },
            "message_center_name": {
              "type": "string"
            },
            "form_link": {
              "type": "string"
            },
            "expiry_datetime": {
              "type": "string"
            },
            "user_id": {
              "type": "string"
            },
            "expiry_ts": {
              "type": "string"
            },
            "richmessage_html": {
              "type": "string"
            },
            "id": {
              "type": "string"
            }
          },
          "required": [
            "icon_url",
            "device_id",
            "richmessage_url",
            "subject",
            "deeplink_url",
            "sent_ts",
            "message",
            "message_center_name",
            "form_link",
            "expiry_datetime",
            "user_id",
            "expiry_ts",
            "richmessage_html",
            "id"
          ]
        },
        {
          "type": "object",
          "properties": {
            "icon_url": {
              "type": "string"
            },
            "device_id": {
              "type": "string"
            },
            "richmessage_url": {
              "type": "null"
            },
            "subject": {
              "type": "string"
            },
            "deeplink_url": {
              "type": "string"
            },
            "sent_ts": {
              "type": "string"
            },
            "message": {
              "type": "string"
            },
            "message_center_name": {
              "type": "string"
            },
            "form_link": {
              "type": "string"
            },
            "expiry_datetime": {
              "type": "string"
            },
            "user_id": {
              "type": "string"
            },
            "expiry_ts": {
              "type": "string"
            },
            "richmessage_html": {
              "type": "string"
            },
            "id": {
              "type": "string"
            }
          },
          "required": [
            "icon_url",
            "device_id",
            "richmessage_url",
            "subject",
            "deeplink_url",
            "sent_ts",
            "message",
            "message_center_name",
            "form_link",
            "expiry_datetime",
            "user_id",
            "expiry_ts",
            "richmessage_html",
            "id"
          ]
        },
        {
          "type": "object",
          "properties": {
            "icon_url": {
              "type": "string"
            },
            "device_id": {
              "type": "string"
            },
            "richmessage_url": {
              "type": "null"
            },
            "subject": {
              "type": "string"
            },
            "deeplink_url": {
              "type": "string"
            },
            "sent_ts": {
              "type": "string"
            },
            "message": {
              "type": "string"
            },
            "message_center_name": {
              "type": "string"
            },
            "form_link": {
              "type": "string"
            },
            "expiry_datetime": {
              "type": "string"
            },
            "user_id": {
              "type": "string"
            },
            "expiry_ts": {
              "type": "string"
            },
            "richmessage_html": {
              "type": "string"
            },
            "id": {
              "type": "string"
            }
          },
          "required": [
            "icon_url",
            "device_id",
            "richmessage_url",
            "subject",
            "deeplink_url",
            "sent_ts",
            "message",
            "message_center_name",
            "form_link",
            "expiry_datetime",
            "user_id",
            "expiry_ts",
            "richmessage_html",
            "id"
          ]
        },
        {
          "type": "object",
          "properties": {
            "icon_url": {
              "type": "string"
            },
            "device_id": {
              "type": "string"
            },
            "richmessage_url": {
              "type": "null"
            },
            "subject": {
              "type": "string"
            },
            "deeplink_url": {
              "type": "string"
            },
            "sent_ts": {
              "type": "string"
            },
            "message": {
              "type": "string"
            },
            "message_center_name": {
              "type": "string"
            },
            "form_link": {
              "type": "string"
            },
            "expiry_datetime": {
              "type": "string"
            },
            "user_id": {
              "type": "string"
            },
            "expiry_ts": {
              "type": "string"
            },
            "richmessage_html": {
              "type": "string"
            },
            "id": {
              "type": "string"
            }
          },
          "required": [
            "icon_url",
            "device_id",
            "richmessage_url",
            "subject",
            "deeplink_url",
            "sent_ts",
            "message",
            "message_center_name",
            "form_link",
            "expiry_datetime",
            "user_id",
            "expiry_ts",
            "richmessage_html",
            "id"
          ]
        },
        {
          "type": "object",
          "properties": {
            "icon_url": {
              "type": "string"
            },
            "device_id": {
              "type": "string"
            },
            "richmessage_url": {
              "type": "null"
            },
            "subject": {
              "type": "string"
            },
            "deeplink_url": {
              "type": "string"
            },
            "sent_ts": {
              "type": "string"
            },
            "message": {
              "type": "string"
            },
            "message_center_name": {
              "type": "string"
            },
            "form_link": {
              "type": "string"
            },
            "expiry_datetime": {
              "type": "string"
            },
            "user_id": {
              "type": "string"
            },
            "expiry_ts": {
              "type": "string"
            },
            "richmessage_html": {
              "type": "string"
            },
            "id": {
              "type": "string"
            }
          },
          "required": [
            "icon_url",
            "device_id",
            "richmessage_url",
            "subject",
            "deeplink_url",
            "sent_ts",
            "message",
            "message_center_name",
            "form_link",
            "expiry_datetime",
            "user_id",
            "expiry_ts",
            "richmessage_html",
            "id"
          ]
        },
        {
          "type": "object",
          "properties": {
            "icon_url": {
              "type": "string"
            },
            "device_id": {
              "type": "string"
            },
            "richmessage_url": {
              "type": "null"
            },
            "subject": {
              "type": "string"
            },
            "deeplink_url": {
              "type": "string"
            },
            "sent_ts": {
              "type": "string"
            },
            "message": {
              "type": "string"
            },
            "message_center_name": {
              "type": "string"
            },
            "form_link": {
              "type": "string"
            },
            "expiry_datetime": {
              "type": "string"
            },
            "user_id": {
              "type": "string"
            },
            "expiry_ts": {
              "type": "string"
            },
            "richmessage_html": {
              "type": "string"
            },
            "id": {
              "type": "string"
            }
          },
          "required": [
            "icon_url",
            "device_id",
            "richmessage_url",
            "subject",
            "deeplink_url",
            "sent_ts",
            "message",
            "message_center_name",
            "form_link",
            "expiry_datetime",
            "user_id",
            "expiry_ts",
            "richmessage_html",
            "id"
          ]
        },
        {
          "type": "object",
          "properties": {
            "icon_url": {
              "type": "string"
            },
            "device_id": {
              "type": "string"
            },
            "richmessage_url": {
              "type": "null"
            },
            "subject": {
              "type": "string"
            },
            "deeplink_url": {
              "type": "string"
            },
            "sent_ts": {
              "type": "string"
            },
            "message": {
              "type": "string"
            },
            "message_center_name": {
              "type": "string"
            },
            "form_link": {
              "type": "string"
            },
            "expiry_datetime": {
              "type": "string"
            },
            "user_id": {
              "type": "string"
            },
            "expiry_ts": {
              "type": "string"
            },
            "richmessage_html": {
              "type": "string"
            },
            "id": {
              "type": "string"
            }
          },
          "required": [
            "icon_url",
            "device_id",
            "richmessage_url",
            "subject",
            "deeplink_url",
            "sent_ts",
            "message",
            "message_center_name",
            "form_link",
            "expiry_datetime",
            "user_id",
            "expiry_ts",
            "richmessage_html",
            "id"
          ]
        },
        {
          "type": "object",
          "properties": {
            "icon_url": {
              "type": "string"
            },
            "device_id": {
              "type": "string"
            },
            "richmessage_url": {
              "type": "null"
            },
            "subject": {
              "type": "string"
            },
            "deeplink_url": {
              "type": "string"
            },
            "sent_ts": {
              "type": "string"
            },
            "message": {
              "type": "string"
            },
            "message_center_name": {
              "type": "string"
            },
            "form_link": {
              "type": "string"
            },
            "expiry_datetime": {
              "type": "string"
            },
            "user_id": {
              "type": "string"
            },
            "expiry_ts": {
              "type": "string"
            },
            "richmessage_html": {
              "type": "string"
            },
            "id": {
              "type": "string"
            }
          },
          "required": [
            "icon_url",
            "device_id",
            "richmessage_url",
            "subject",
            "deeplink_url",
            "sent_ts",
            "message",
            "message_center_name",
            "form_link",
            "expiry_datetime",
            "user_id",
            "expiry_ts",
            "richmessage_html",
            "id"
          ]
        },
        {
          "type": "object",
          "properties": {
            "icon_url": {
              "type": "string"
            },
            "device_id": {
              "type": "string"
            },
            "richmessage_url": {
              "type": "null"
            },
            "subject": {
              "type": "string"
            },
            "deeplink_url": {
              "type": "string"
            },
            "sent_ts": {
              "type": "string"
            },
            "message": {
              "type": "string"
            },
            "message_center_name": {
              "type": "string"
            },
            "form_link": {
              "type": "string"
            },
            "expiry_datetime": {
              "type": "string"
            },
            "user_id": {
              "type": "string"
            },
            "expiry_ts": {
              "type": "string"
            },
            "richmessage_html": {
              "type": "string"
            },
            "id": {
              "type": "string"
            }
          },
          "required": [
            "icon_url",
            "device_id",
            "richmessage_url",
            "subject",
            "deeplink_url",
            "sent_ts",
            "message",
            "message_center_name",
            "form_link",
            "expiry_datetime",
            "user_id",
            "expiry_ts",
            "richmessage_html",
            "id"
          ]
        }
      ]
    },
    "links": {
      "type": "array",
      "items": [
        {
          "type": "object",
          "properties": {
            "rel": {
              "type": "string"
            },
            "href": {
              "type": "string"
            },
            "method": {
              "type": "string"
            }
          },
          "required": [
            "rel",
            "href",
            "method"
          ]
        }
      ]
    }
  },
  "required": [
    "next_req_time",
    "messages",
    "links"
  ]
}