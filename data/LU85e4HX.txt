--------------------------------------------*(33 Lezione Personale Cancellare Ordini Pendenti Ingresso Limit)*-------------------------------------------------

Quello che vogliamo fare è piazzare 3 ordini: 1 ingresso limit, 1 take profit ed uno stop bello stesso momento.

Se non entriamo in posizione e siamo ancora pendenti e se ci sono o situazioni di un nuovo ingresso oppure di una uscita allora
vogliamo cancellare tutti gli ordini pendenti precedenti rimasti aprendo successivamente dopo circa 15 secondi i nuovi ordini.

Se siamo in posizione e abbiamo 1 ordine pendente dopo aver preso o un take profit o uno stop loss, vogliamo cancellare l'ordine pendente
della posizione ormai finita appena c'è un nuovo ingresso oppure di una uscita " che avverranno dopo circa 15 secondi".

Se siamo in posizione e abbiamo uno swing market di posizione vogliamo cancellare gli ordini pendenti della vecchia posizione e piazzare i nuovi
ordini.

Se siamo in posizione e abbiamo un uscita market vogliamo cancellare gli ordini pendenti rimasti prima di entrare in una nuova posizione
"circa 15 secondi dopo".


Per fare ciò dobbiamo impostare un cancell_all() ad inizio codice che cancella i pendenti subito e impostare gli alert
di ingresso e chiusura posizione ritardati di 15 secondi.


       -------  Nel pezzo di strategia esempio sotto avremo: Condizioni di ingresso, Condizioni di limit, Condizioni di market.  ------

//@version=5
strategy(title="Study Test Alert/Ingre Limit/Canc Ord Pend", ETC...

Immaginiamo di aver calcolato MyEntryCountBar per market ad una determinata barra.

buy_command = 'buy_command RITARDATO 15 SECONDI'
sell_command = 'sell_command RITARDATO 15 SECONDI'
close_command = 'close_command RITARDATO 15 SECONDI'
// Se si riscontrano problemi con la cancellazione di ordini togliere il delay sul close command
cancel_command = 'cancel_command NON RITARDATO'


// strategy.cancel_all() VA MESSO A INIZIO CODICE SOPRA A TUTTO LA LOGICA E': PRIMA CANCELLO POI ENTRO O ESCO RITARDATO
// NELLA STRINGA cancel_command NON RITARDO L'ORDINE 
// LA STRINGA cancel_command VA INSERITA DIRETTAMENTE IN: alert(message='{"ETC...   
if condEntryLong and strategy.position_size <0 or condEntryLong and strategy.position_size ==0 //or strategy.position_size >0 and MyEntryCountBar > input_MyExitCountBarL
    strategy.cancel_all()
    alert(message='{"pair":"BTC-PERP","unitsPercent":10,"exchange":"Ftx","apiKey":"FTX","token":"e6d67d6e-1a5f-4e53-a9fd-6276dfa2a34b","isLimit":true,"price":19144,"limitPriceType":"bestPrice","stopLossPercent":"-0.1","stopLossType":"percent","leverage":1,"marginType":"ISOLATED","targets":[{"idx":1,"amount":"100","takeProfitPercent":"0.1"}],"targetType":"percent","targetAmountInPercent":true,"closeCurrentPosition":true,"preventPyramiding":true,"cancelAll":true}', freq=alert.freq_once_per_bar_close)
// plotshape(MyEntryCountBar == input_cancel_pending_limit_long, title="cancel_pending_limit_long")


// Ingresso ritardato di 15 secondi direttamente nella striga buy_command
if condEntryLong //and strategy.opentrades == 0 FORSE AGGIUNGERE RITARDI INGRESSO PER VIA DELL'ANNULLAMENTO ORDINITK E SL
    strategy.entry('operazioneLong', strategy.long, limit = close, alert_message = "Open Long Position", comment = buy_command)

Uscita limit ritardato di 15 secondi direttamente nella striga close_command
if strategy.opentrades == 1
    strategy.exit('SL e TP', from_entry='operazioneLong', loss=stop_loss_long, profit=take_profit_long, alert_message = "Your Long SL-TP Has Been Triggered.", comment = close_command) //limit=take_profit_short_price    

Uscita market ritardato di 15 secondi direttamente nella striga close_command
if strategy.opentrades ==1 and MyEntryCountBar > input_MyExitCountBarL
    strategy.close(id='operazioneLong', alert_message = "Close Long Position", comment = close_command)

--------- IMPOSTAZIONI TV HUB GUARDA VIDEO SONO DIVERSE DALLE IMPOSTAZIONI CLASSICHE ---------

Dopo aver settato tutte le impostazioni classiche tk stop etc... in basso spuntiamo solo le caselle: PREVENT PYRAMIDING E CLOSE CURRENT POSITION.
