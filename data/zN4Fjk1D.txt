function farmForward(distance, reversed)
	for _=1,distance do
		turtle.forward()
		if not reversed then
			turtle.turnLeft()
		else
			turtle.turnRight()
		end
		local success, data = turtle.inspect()
		if success then
			if data.name == "carrots" and data.state.age == 7 then
				turtle.dig()
				turtle.suck()
				turtle.place()
			end
		end
		if not reversed then
			turtle.turnRight()
		else
			turtle.turnLeft()
		end
	end
end


length = 10
width = 1
amount = 2
oneRun = 2*(amount*(5*length + 3*width + 2) - 2*length)

while turtle.getItemCount(1) > 0 do
	if turtle.getFuelLevel() < oneRun then
		turtle.select(1)
		turtle.refuel()
		turtle.select(2)
	end
	for passage=1,2 do
		reversed = passage == 2
		for line=1,amount do
			if line%2 == passage then
				farmForward(length, reversed)
				turtle.turnLeft()
				farmForward(width, reversed)
			else
				farmForward(length, reversed)
				turtle.turnRight()
				farmForward(width, reversed)
			end
		end
	end
end