input {
 rabbitmq {
        type => logmtordizucar
        host => "rabbitmq:5672"
        queue => "logmtordizucar"
        heartbeat => 300
        durable => true
        password => "Htc2021!"
        user => "htc"
    }
}

filter {
  if [type]=="logmtordizucar"{
      ruby {
            code => 'event.set("data", event.get("data").to_s)'
     }
  }
}

filter {
  if [type]=="logmtordizucar"{
      ruby {
            code => 'event.set("attributes", event.get("attributes").to_s)'
     }
  }
}

filter {
  if [type]=="logmtordizucar"{
      ruby {
            code => 'event.set("detail", event.get("detail").to_s)'
     }
  }
}

filter {
  if [type]=="logmtordizucar"{
      date {
          match => [ "creationDate", "UNIX_MS" ]
          target => "creationDate"
      }
  }
}

filter {
  if [type]=="logmtordizucar"{
      mutate {
          convert => {
             "sequence" => "integer"
        }
     }
  }
}

output {
  if [type]=="logmtordizucar"{
    elasticsearch {
        template_name => "logmtordizucar"
        hosts => ["elasticsearch:9200"]
        index =>  "logmtordizucar-%{+YYYY.MM.dd}"
    }
  }
}