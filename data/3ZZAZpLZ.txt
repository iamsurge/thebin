if #(arg) ~= 3 then
    print(string.format("%s <depth> <width> <height>", arg[0]))
    os.exit(1)
end

local x = arg[1]
local y = arg[2]
local z = arg[3]

local reverse = false

local function digFront()
    if turtle.detect() then
        turtle.dig()
    end
end

local function turnHandler()
    if reverse then
        turtle.turnLeft()
    else
        turtle.turnRight()
    end
end

for k = 1, z do
    for j = 1, y do
        for i = 1, x do
            digFront()
            turtle.forward()
        end
        turnHandler()
        digFront()
        turtle.forward()
        turnHandler()
        reverse = not reverse
    end
    if k < z then
        turtle.digUp()
        turtle.up()
        turnHandler()
        turnHandler()
        reverse = not reverse
    end
end