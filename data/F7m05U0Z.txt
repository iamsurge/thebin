local player = game:GetService("Players").LocalPlayer
local char = player.Character
local human = char.Humanoid
local uis = game:GetService("UserInputService")

if _G.ResetSeat then
	_G.ResetSeat()
end

local seating = false
local jumping = false

local conn = human:GetPropertyChangedSignal("SeatPart"):Connect(function()
	if jumping then
		jumping = false
		return
	end
	
	local seat = human.SeatPart
	if seat and not seating then
		seating = true
		human:GetPropertyChangedSignal("SeatPart"):Wait()
		
		task.wait(0.05)
		seating = false
		seat:Sit(human)
		print("Recovering sit")
	end
end)

local jc = uis.JumpRequest:Connect(function()
	jumping = true
end)

_G.ResetSeat = function()
	conn:Disconnect()
	jc:Disconnect()
end