

video = core.ffms2.Source(r'D:\動画 アニメ　AKI ENCODE\3 - Fairy Fencer F Advent of the Dark Force Opening.mp4')

# masking ez to dehalo / change denoiser / high deblock only on scene highmotion

clip = video
ret = clip
super_ret  = core.mv.Super(clip=ret, hpad=8, vpad=8)
bvectors =  core.mv.Analyse(super=super_ret, isb=True,  delta=1,   blksize=8, overlap=4)
fvectors =  core.mv.Analyse(super=super_ret, isb=False, delta=1,   blksize=8, overlap=4)
fwd_comp = core.mv.Compensate(clip=ret, super=super_ret, vectors=fvectors)
bwd_comp = core.mv.Compensate(clip=ret, super=super_ret, vectors=bvectors)
ret = core.std.Interleave(clips=[fwd_comp, ret, bwd_comp])


#ret = core.fft3dfilter.FFT3DFilter(clip=ret, sigma=2.0, planes=[0,1,2], bt=1, bw=16, bh=16, ow=8, oh=8)
ret  = haf.Deblock_QED(ret,quant1=30,quant2=30,uv=1)

video.set_output()

