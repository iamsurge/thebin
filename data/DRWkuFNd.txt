-- A highly customizable setup program reminiscent of those old DOS installers that were common in the 80's and 90's
-- Changes color palettes based on if you are using an advanced computer or not
-- Note: even if the installation procedure fails, the program will still display success.

-- App information & install method settings
local APPNAME = ("Test Program") -- Name of the program this will install
local AUTHOR = ("Prankejten") -- Name of the author of the program
local VERSION = ("1.0.0") -- Program version
local INSTALLTYPE = 0 -- Select the type of installation (see below text)
-- (0 = copy files from disk | 1 = download files from pastebin)
local NAME = ("/disk/program.lua") -- Name of file to copy/url of file to download
local FILEPATH = ("") -- Where to install the file (include filename, leave blank to let user decide)
local INSTALLSPEED = 1 -- Install slowness (0 = fast | 1 = slow)

local ANSWER = ("") -- No touchie, required for code
local PROGRESSCOLOR = false -- No touchie this too
----------------------------------------------------
os.pullEvent = os.pullEventRaw
term.setBackgroundColor(colors.black)
term.clear()
sleep(2)
term.setBackgroundColor(colors.blue)
term.clear()
term.setTextColor(colors.white)
sleep(0.1)
term.setBackgroundColor(colors.black)
term.setCursorPos(13, 7)
print("                             ")
term.setCursorPos(13, 8)
print("                             ")
term.setCursorPos(13, 9)
print("                             ")
term.setCursorPos(13, 10)
print("                             ")
term.setCursorPos(13, 11)
print("                             ")
term.setCursorPos(13, 12)
print("                             ")
term.setCursorPos(13, 13)
print("                             ")
term.setBackgroundColor(colors.gray)
term.setCursorPos(12, 6)
print("=============================")
term.setCursorPos(12, 7)
print("=                           =")
term.setCursorPos(12, 8)
print("=                           =")
term.setCursorPos(12, 9)
print("=                           =")
term.setCursorPos(12, 10)
print("=                           =")
term.setCursorPos(12, 11)
print("=                           =")
term.setCursorPos(12, 12)
print("=============================")

term.setCursorPos(1, 1)
term.setBackgroundColor(colors.blue)
print(APPNAME, VERSION, "setup")
print("Copyright (C)", AUTHOR)
term.setBackgroundColor(colors.gray)
term.setCursorPos(15, 7)
print("Do you wish to install?")
term.setCursorPos(15, 8)
print("         [y/n]         ")
term.setCursorPos(15, 10)
local ANSWER = read()
if ANSWER == ("y") then
    sleep(0.7)
    term.setCursorPos(15, 7)
    print("                       ")
    term.setCursorPos(15, 8)
    print("                       ")
    term.setCursorPos(15, 10)
    print("                       ")
    term.setCursorPos(13, 7)
    print("Preparing for install...")
    sleep(2)
    term.setCursorPos(13, 8)
    print("Checking system specs...")
    sleep(1.4)
    if term.isColor() then
        PROGRESSCOLOR = true
    end     
    term.setCursorPos(13, 7)
    if FILEPATH == ("") then
        print ("Please choose your install")
        term.setCursorPos(13, 8)
        print("location+filename&extension")
        term.setCursorPos(13, 10)
        ANSWER = read()
    else
        ANSWER = FILEPATH
    end
    term.setCursorPos(13, 7)
    if INSTALLTYPE == 1 then
        print("Downloading files...       ")
        term.setCursorPos(13, 8)
        print("                           ")
        term.setCursorPos(13, 10)
        print("  ")
        term.setCursorPos(15, 10)
        if PROGRESSCOLOR == true then
            term.setBackgroundColor(colors.red)
        else
            term.setBackgroundColor(colors.black)
		end
        print("                       ")
        sleep(1.2)
        if INSTALLSPEED == 0 then
            term.setBackgroundColor(colors.green)
            term.setCursorPos(15, 10)
            textutils.slowPrint("                       ")
        else
            term.setBackgroundColor(colors.green)
            term.setCursorPos(15, 10)
            for i = 15, 38, 1 do
                print(" ")
                term.setCursorPos(i, 10)
                sleep(0.4)
            end
            
        end
        term.setCursorPos(2, 17)
        term.setBackgroundColor(colors.blue)
        term.setTextColor(colors.blue)
        shell.run("pastebin get", NAME, ANSWER)
        term.setCursorPos(13, 11)
        term.setBackgroundColor(colors.gray)
        term.setTextColor(colors.white)
        print("Success! Restarting...")
        sleep(1.2)
        os.reboot()
    else
        print("Copying files...           ")
        term.setCursorPos(13, 8)
        print("                           ")
        term.setCursorPos(13, 10)
        print("  ")
        term.setCursorPos(15, 10)
        if PROGRESSCOLOR == true then
            term.setBackgroundColor(colors.red)
        else
            term.setBackgroundColor(colors.black)
		end
        print("                       ")
        sleep(1.2)
        if INSTALLSPEED == 0 then
            term.setBackgroundColor(colors.green)
            term.setCursorPos(15, 10)
            textutils.slowPrint("                       ")
        else
            term.setBackgroundColor(colors.green)
            term.setCursorPos(15, 10)
            for i = 15, 38, 1 do
                print(" ")
                term.setCursorPos(i, 10)
                sleep(0.4)
            end
            
        end
        term.setCursorPos(2, 17)
        term.setBackgroundColor(colors.blue)
        term.setTextColor(colors.blue)
        shell.run("copy", NAME, ANSWER)
        term.setCursorPos(13, 11)
        term.setBackgroundColor(colors.gray)
        term.setTextColor(colors.white)
        print("Success! Restarting...")
        sleep(1.2)
        os.reboot()
    end
else
    term.setBackgroundColor(colors.black)
    term.setTextColor(colors.black)
    term.clear()
    term.setCursorPos(1, 1)
end