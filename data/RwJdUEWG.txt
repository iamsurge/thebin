// Physical weapons scaling from POW and hitting RES
// Specific edge case
if (target != null && weapon != null)
	if (!magic() && weapon.ismagic()) // if not a magical weapon but a physical weapon with magic properties
		{
		int value = 0;
		value = (target.actor.stat(Stat_Labels.Def) + target.actor.terraindef); // add back the total def
		value -= (target.actor.stat(Stat_Labels.Res) + target.actor.terrainres); // subtract res
		skill_dmg += math.Max(value, 0); // add diff to skill damage value
}
// Modify routine