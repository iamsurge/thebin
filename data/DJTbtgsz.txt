class A : public std::enable_shared_from_this<A>
{
	std::thread m_Worker;
public:
	~A()
	{
		m_Worker.join();
	}

	void Run()
	{
		m_Worker = std::thread([ptr = shared_from_this()]()
		{
			using namespace std::chrono_literals;
			std::this_thread::sleep_for(10ms);
			// do something
		}
	}
};

int main()
{
	std::shared_ptr<A> a = std::make_shared<A>();
	a->Run();
}