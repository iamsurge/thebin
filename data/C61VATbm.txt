local Events = game.ReplicatedStorage:WaitForChild("Events")
local Settings = script.Parent:WaitForChild("Settings")
local InvSpace = Settings:WaitForChild("InvSpace")
local MaxInvSpace = Settings:WaitForChild("MaxInvSpace")
local MaxItemsPerSlot = Settings:WaitForChild("MaxItemsPerSlot")

local Player = game.Players.LocalPlayer

local Temp = script.Temp
local Frame = script.Parent
local PlayerInv = Frame:WaitForChild("PlayerInventory")

local function UpdateGui()
	for i, v in pairs(PlayerInv:GetChildren()) do
		if v:IsA("ImageButton") then
			v:Destroy()
		end
	end
	
	for i, v in pairs(Player.Inventory:GetChildren()) do
		local NewItem = Temp:Clone()
		
		NewItem.Parent = PlayerInv
		NewItem.Name = v.Name
		NewItem.ItemName.Text = v.Name
		NewItem.ItemValue.Text = v.Value
		NewItem.Image = "rbxassetid://".. v.ImageID.Value
		
				
		NewItem.MouseButton2Click:Connect(function()
			Events.ThrowBlock:FireServer(v.Name)
		end)
	end
	
	local Inv = Player.Inventory:GetChildren()
	InvSpace.Value = #Inv
	
	Frame.Title2.Text = InvSpace.Value.. "/".. MaxInvSpace.Value
end

Events.UpdateInventory.OnClientEvent:Connect(function()
	UpdateGui()
end)

Events.DeleteItemFromInv.OnClientEvent:Connect(function(Item)
	if PlayerInv:FindFirstChild(Item) then
		PlayerInv:FindFirstChild(Item):Destroy()
	end
end)