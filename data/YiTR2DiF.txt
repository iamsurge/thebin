#!/usr/bin/env python
# -*- coding: utf-8 -*-
#
# python -m pip install pyinstaller
# pynstaller --onefile --noconsole acme.py
#
# calculadora marca ACME

import tkinter as tk
from math import sqrt, factorial, pi

def limpieza():
    global calculo_consola
    calculo.set("0")        # limpio la pantalla
    calculo_consola = ""    # limpio el cálculo en consola

def clic(tecla):
    global calculo_consola
    calculo_consola = calculo_consola + tecla
    calculo.set(calculo_consola)
    
    
    
def hacer_cuenta():
    global calculo_consola
    try:
        total = str(eval(calculo_consola))
    except Exception:
        limpieza()
        total="ERROR"
    calculo.set(total)
    calculo_consola = total
    
    
def borrar_caracter():
    global calculo_consola
    calculo_consola = calculo_consola[:-1]
    if not calculo_consola:
        calculo_consola = "0"
    calculo.set(calculo_consola)
    calculo_consola = ""



# ventana para la calculadora
ventana = tk.Tk()
ventana.title("Calculadora ACME")
ventana.config(width=390, height=600, bg="Light Steel Blue")
ventana.resizable(0,0)

# Creo la variable para mostrar el cálculo en pantalla
calculo = tk.StringVar()

limpieza()

# creo la pantalla
pantalla = tk.Entry(
            font=("arial",20,"bold"),
            width=21,
            bd=15,
            bg="powder blue",
            justify="right",
            state=tk.DISABLED,
            textvariable=calculo
    )
pantalla.place(x=20, y=50)


# creo las dimensiones de teclas
ancho = 10
alto = 2

# Creo la variable para mostrar el cálculo en consola
calculo_consola = ""


################ TECLAS #######################################

tecla = tk.Button(text="<<", width=ancho, height=alto, bg="medium aquamarine", command=borrar_caracter)
tecla.place(x=287, y=140)

##### Fila 1: 1 2 3 +
tecla = tk.Button(text="1", width=ancho, height=alto, command=lambda:clic("1"))
tecla.place(x=17, y=200)

tecla = tk.Button(text="2", width=ancho, height=alto, command=lambda:clic("2"))
tecla.place(x=107, y=200)

tecla = tk.Button(text="3", width=ancho, height=alto, command=lambda:clic("3"))
tecla.place(x=197, y=200)

tecla = tk.Button(text="+", width=ancho, height=alto, bg="SteelBlue2", command=lambda:clic("+"))
tecla.place(x=287, y=200)


##### Fila 2: 4 5 6 -
tecla = tk.Button(text="4", width=ancho, height=alto, command=lambda:clic("4"))
tecla.place(x=17, y=260)

tecla = tk.Button(text="5", width=ancho, height=alto, command=lambda:clic("5"))
tecla.place(x=107, y=260)

tecla = tk.Button(text="6", width=ancho, height=alto, command=lambda:clic("6"))
tecla.place(x=197, y=260)

tecla = tk.Button(text="-", width=ancho, height=alto, bg="SteelBlue2", command=lambda:clic("-"))
tecla.place(x=287, y=260)


##### Fila 3: 7 8 9 x
tecla = tk.Button(text="7", width=ancho, height=alto, command=lambda:clic("7"))
tecla.place(x=17, y=320)

tecla = tk.Button(text="8", width=ancho, height=alto, command=lambda:clic("8"))
tecla.place(x=107, y=320)

tecla = tk.Button(text="9", width=ancho, height=alto, command=lambda:clic("9"))
tecla.place(x=197, y=320)

tecla = tk.Button(text="x", width=ancho, height=alto, bg="SteelBlue2", command=lambda:clic("*"))
tecla.place(x=287, y=320)


##### Fila 4: ( 0 ) /
tecla = tk.Button(text="(", width=ancho, height=alto, bg="sky blue", command=lambda:clic("("))
tecla.place(x=17, y=380)

tecla = tk.Button(text="0", width=ancho, height=alto, command=lambda:clic("0"))
tecla.place(x=107, y=380)

tecla = tk.Button(text=")", width=ancho, height=alto, bg="sky blue", command=lambda:clic(")"))
tecla.place(x=197, y=380)

tecla = tk.Button(text="/", width=ancho, height=alto, bg="SteelBlue2", command=lambda:clic("/"))
tecla.place(x=287, y=380)


##### Fila 5: Raiz Coma decimal potencia resto
tecla = tk.Button(text="\u221A", width=ancho, height=alto, bg="sky blue", command=lambda:clic("sqrt("))
tecla.place(x=17, y=440)

tecla = tk.Button(text=".", width=ancho, height=alto, command=lambda:clic("."))
tecla.place(x=107, y=440)

tecla = tk.Button(text="POW", width=ancho, height=alto, bg="sky blue", command=lambda:clic("**"))
tecla.place(x=197, y=440)

tecla = tk.Button(text="%", width=ancho, height=alto, bg="SteelBlue2", command=lambda:clic("%"))
tecla.place(x=287, y=440)


##### Fila 6: Clear, factorial, pi =
tecla = tk.Button(text="CL", width=ancho, height=alto, bg="medium aquamarine", command=limpieza)
tecla.place(x=17, y=500)

tecla = tk.Button(text="!", width=ancho, height=alto, command=lambda:clic("factorial("))
tecla.place(x=107, y=500)

tecla = tk.Button(text="pi", width=ancho, height=alto, bg="sky blue", command=lambda:clic(str(pi)))
tecla.place(x=197, y=500)

tecla = tk.Button(text="=", width=ancho, height=alto, bg="SteelBlue2", command=hacer_cuenta)
tecla.place(x=287, y=500)



ventana.mainloop()
