
add_filter( 'post_type_link', 'comune_post_type_link', 10, 2 );
function comune_post_type_link( $link, $post ) {

  if ( $post->post_type == 'immobili' ) {

    if ( $cats = get_the_terms( $post->ID, 'comune' ) ) {
      $link = str_replace( '%comune%', current($cats)->slug, $link );
    }
  }
  return $link;
}

add_filter( 'post_type_link', 'categoria_post_type_link', 10, 2 );
function categoria_post_type_link( $link, $post ) {

if ( $post->post_type == 'immobili' ) {

if ( $cats = get_the_terms( $post->ID, 'categoria_immobile' ) ) {
      $link = str_replace( '%categoria_immobile%', current($cats)->slug, $link );
    }
  }
  return $link;
}

