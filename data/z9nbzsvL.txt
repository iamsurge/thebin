#!/bin/bash
# for each file in your library as identified by LIBRARY_PATH below (uncomment and set the path), lists each video file
# and the audio and video streams within.  Modify the arguments to the find command argument [\( -name *.mp4 -o -name "*.mkv" \)
# as needed to include more video format files (add more -o -name "*.suffix") you wish to find or remove formats you don't have.

#LIBRARY_PATH="/enter/your/library/path/here"

oldIFS="$IFS"
f=$(find "$LIBRARY_PATH"  \( -name "*.mp4" -o -name "*.mkv" \) -printf "%h/%f\n")
IFS=$'\n' fl=( $f )
for i in "${fl[@]}"; do echo "Filename: $i"; echo "Video: "$(ffmpeg -i "$i" 2>&1 | grep "Video" | awk -F"Video: " '{print $2}'); echo "Audio: " "$(ffmpeg -i "$i" 2>&1 | grep "Audio" | awk -F"Audio: " '{print $2}')"; echo""; done
IFS="$oldIFS"