import java.util.Scanner;

import tp0.Helper;

public class Tp4ejercicio2 {
	static Scanner sc = new Scanner(System.in);
	
	public static void main(String[] args) {
		// TODO Auto-generated method stub
		int opcion;
		String entrada = "";
		StackSLL<Character> operacion = new StackSLL<>();
		
		System.out.println("Ejercicio 2 Tp 4");
		System.out.println("Dada una operación, confirmaremos si su parentización es correcta");
		
		do {
			opcion = menu();
			switch (opcion) {
			case 1:			
				System.out.println("Ingrese una operación");
				entrada = sc.nextLine();
				operacion = cargarStack(entrada);
				verificar(operacion);
				break;
			case 2:
				operacion = generarStack();
				verificar(operacion);
				break;
			case 3:
				System.out.println("Programa Terminado");
				break;
			default:
				System.out.println("No es una opción correcta ");
				break;
			}
		}while(opcion!=3);
	}

	public static int menu() {
		int op;
		System.out.println();
		System.out.println("1.Ingresar manualmente");
		System.out.println("2.Generar aleatoriamente");
		System.out.println("3.Salir");
		op = Helper.getPositiveInt("Ingrese una opcion");

		return op;
	}

	public static StackSLL<Character> cargarStack(String cadena){
		StackSLL<Character> operacion = new StackSLL<>();
		
		for(char c: cadena.toCharArray()) {
			operacion.push(c);
		}
		
		return operacion;
	}
	
	public static StackSLL<Character> generarStack(){
		StackSLL<Character> operacion = new StackSLL<>();
		String[] operaciones = {")2+3(*5","5/)2+1(","12-1*3)","5-2(-2","4*)3+22(","3*(3-2"};
		String op = operaciones[Helper.random.nextInt(operaciones.length-1)];
		
		for(char c: op.toCharArray()) {
			operacion.push(c);
		}
		
		return operacion;
	}
		
	public static void verificar(StackSLL<Character> operacion) {
		int cont = 0;
		String salida = "";
		Character aux =' ';
		
		while(!operacion.empty()) {
			aux = operacion.pop();
			salida+=aux;
			if ((aux.equals('('))|(aux.equals(')'))) {
				cont++;
			}
		}
		System.out.println("La operacion generada es: "+salida);

		if ((cont%2)!=0) {
			System.out.println("La parentización NO es correcta!");
		}else {
			System.out.println("La parentización es correcta!");
		}
	}
}