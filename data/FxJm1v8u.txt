SendMode Input  ; Recommended for new scripts due to its superior speed and reliability.
SetWorkingDir %A_ScriptDir%  ; Ensures a consistent starting directory.

Archive := "chatlog/archive"
Chatlog := A_MyDocuments . "/GTA San Andreas User Files/SAMP/chatlog.txt"
Exe := "gta_sa.exe"
TTS := true

IfNotExist, Archive
	FileCreateDir, % Archive

If SubStr(Archive, 0, 1) != "/" or SubStr(Archive, 0, 1) != "\"
{
	If InStr(Archive, "/")
		Archive := Archive . "/"
	Else
		Archive := Archive . "\"
}

Process, Wait, % Exe
Process, WaitClose, % Exe
FileMove, % Chatlog, % Archive . "chatlog-" . A_Now . ".txt"
If TTS
	ComObjCreate("SAPI.SpVoice").Speak("Chatlog archived.")
ExitApp
