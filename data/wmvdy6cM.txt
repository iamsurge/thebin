#include <iostream>
#include <cstdlib>
#include <stlib.h>

using namespace std;
 
int main() {
    int demanda_valores[] = {10, 10, 20, 20, 20, 20, 30, 30, 30, 30, 30, 30, 30, 30, 40, 40, 50, 50, 70, 100};
    int probabilidad_valor;
    
    float ventas, utilidad, no_se_gano, utilidad_promedio, utilidad_mes_suma = 0;
    int demanda, tortas_sobrantes, tortas_faltantes;

    int tortas_sobrantes_total = 0, tortas_faltantes_total = 0, dias_sin_cumplir_demanda = 0;

    int dia = 1;

    cout << "SIMULACIÓN DEL COMPORTAMIENTO DE LA PANADERÍA EN 30 DÍAS:" << endl <<endl;

    cout << "Día \t" << "Producción\t" << "Demanda\t" << "Tortas sobrantes\t" << "Tortas faltantes\t" << "Ventas\t" << "No se ganó\t" << "Utilidad\t" << endl;

    while (dia <= 30) {
        ventas = no_se_gano = tortas_sobrantes = tortas_faltantes = 0;

        probabilidad_valor = rand()%19+0;
        demanda = demanda_valores[probabilidad_valor];

        if(demanda >= 50) {
            if(demanda > 50) {
                tortas_faltantes = demanda - 50;
                ventas = ((demanda - tortas_faltantes) * 25);

                dias_sin_cumplir_demanda = dias_sin_cumplir_demanda + 1;
            } else {
                ventas = demanda * 25;    
            }
        } else {
            tortas_sobrantes = 50 - demanda;
            ventas = ((50 - tortas_sobrantes) * 25) + (tortas_sobrantes * (25 - (25 * 0.30)));
        }

        utilidad = ventas - (50 * 10);
        utilidad_mes_suma = utilidad_mes_suma + utilidad;

        no_se_gano = tortas_faltantes * 25;

        tortas_sobrantes_total = tortas_sobrantes_total + tortas_sobrantes;
        tortas_faltantes_total = tortas_faltantes_total + tortas_faltantes;

        cout << dia << "\t" << 50 << "\t\t" << demanda << "\t" << tortas_sobrantes << "\t\t\t" << tortas_faltantes << "\t\t\t" << ventas << "$\t" << no_se_gano << "$\t\t" << utilidad << "$\t" << endl;

        dia = dia + 1;
    }

    utilidad_promedio = utilidad_mes_suma / 30;

    cout << "- No se ganó " << no_se_gano << "$ por falta de tortas durante los 30 días." << endl;
    cout << "- No se cubrió la demanda durante " << dias_sin_cumplir_demanda << " días." << endl;
    cout << "- Se vendió un total de " << tortas_sobrantes_total << " tortas sobrantes con descuento de 30%." << endl;
    cout << "- La utilidad promedio durante los 30 días fue de " << utilidad_promedio << "$." << endl;
 
    return 0;
}