def process_file(file_path):
    audio_input = tensorflow.io.read_file(file_path)
    audio_input, _ = tensorflow.audio.decode_wav(audio_input)

    audio_input = tf_normalize(audio_input)
    audio_input = tensorflow.expand_dims(audio_input, axis=-1)

    text_input = get_probabilities_vector("sample text, just for testing")
    
    # Should text_input be expanded here?

    langs = sorted(languages)
    label = tensorflow.strings.split(file_path, os.sep)[-2]
    y = tensorflow.cast(tensorflow.equal(label, langs), tensorflow.float32)

    return (audio_input, text_input), y

train_ds = tensorflow.data.Dataset.list_files(...)
train_ds = list_ds.map(process_file)

train_ds = train_ds.batch(batch_size)
train_ds = train_ds.prefetch(tensorflow.data.experimental.AUTOTUNE)

model.fit(x=train_ds, ...)