local spawnDelay = 1
local Dummy = workspace.Dummy
local Nodes = workspace.Nodes

local waveDuration = 10
local currentTime = 0
local intermissionDuration = 5


local isInWave = true



local FirstNode = Nodes["1"]

-- Game loop
while true do
	
	currentTime = waveDuration
	isInWave = true
	
	task.spawn(function()
		while isInWave do
			local newDummy = Dummy:Clone()
			newDummy:PivotTo(FirstNode.CFrame + Vector3.new(0, 5, 0))
			newDummy.Parent = workspace

			task.spawn(function()
				for i = 2, #Nodes:GetChildren() do
					local node = Nodes:GetChildren()[i]
					newDummy.Humanoid:MoveTo(node.Position + Vector3.new(0, 5, 0), node)
					newDummy.Humanoid.MoveToFinished:Wait()
				end

				newDummy:Destroy()
			end)		
			
			task.wait(spawnDelay)
		end
		
	end)

	
	
	for i = waveDuration, 0, -1 do
		task.wait(1)
		currentTime -= 1			
	end
	
	isInWave = false

	task.wait(intermissionDuration)
end	


