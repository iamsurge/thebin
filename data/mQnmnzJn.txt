local serialization = require("serialization")
local component = require("component")

local proxy = component.icbm_missile_launcher

local term = require("term")



--this code runs on Opencompueters minecraft mod

--clear the screen

--
--make an endless loop wich prints hello world
--

while true do
    term.clear()

    term.setCursor(5,5)

    print("K.A.Z.B.E.K Startsystem")
    print("")
    print("╔╣ Warten auf AEM Signal")

    --AEM Signal empfangen
    print("║")
    print("║> AEM Signal empfangen")
    print("║")
    print("║")
    print("║> Kampfmodus aktiviert")
    print("║")
    print("║> Kampfplan eingeben: ")

    local warplan = io.read()

    --the input string looks like this: "K1010T928S7742F"
    --digits between K and T are the x coordinates
    --digits between T and S are the y coordinates
    --digits between S and F are the z coordinates
    --coordinates can contain numbers with different ammount of digits and can be negative



    local ix = string.sub(warplan, string.find(warplan, "K")+1, string.find(warplan, "T")-1)
    local iy = string.sub(warplan, string.find(warplan, "T")+1, string.find(warplan, "S")-1)
    local iz = string.sub(warplan, string.find(warplan, "S")+1, string.find(warplan, "F")-1)

    --convert the strings to numbers
    local x = tonumber(ix)
    local y = tonumber(iy)
    local z = tonumber(iz)

    print("╚═╣ > Startbereit")

    proxy.setFrequency(0)
    proxy.setLockHeight(3)

    proxy.setTargetPos(x, y)
    proxy.setDetonationHeight(z)




    if proxy.containsMissile() then
    print("    > Zündung begonnen")
    if proxy.launchMissile() then
        print("     > Zündung erfolgreich")
    else
        print("     > Zündung fehlgeschlagen")
    end
    else
    print("Missile silo hat keine Rakete")
    end

    io.read()

end
--wait for input

--