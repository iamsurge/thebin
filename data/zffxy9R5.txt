function find_chest()
    repeat
        turtle.turnRight()
        block, data = turtle.inspect()
    until data.name == "minecraft:chest"
end

function empty_me()
    for i = 1, 16, 1 do
        turtle.select(i)
        turtle.drop()
    end
end

function dig_square(width)
	turlte.dig()
    turtle.forward()
    for x = 1, width, 1 do
        for y = 1, width - 1, 1 do
            turtle.dig()
            turtle.forward()
            turtle.digUp()
        end
        if x % 2 == 0 then
            turtle.turnLeft()
            turtle.dig()
            turtle.forward()
            turtle.digUp()
            turtle.turnLeft()
        else
            turtle.turnRight()
            turtle.dig()
            turtle.forward()
            turtle.digUp()
            turtle.turnRight()
        end
    end
    if width % 2 == 0 then 
        turtle.turnLeft()
        for x = 1, width, 1 do
            turtle.forward()
        end
        turtle.turnLeft()
        turtle.forward()
    else
        print("turtle.right")
        turtle.turnRight()
        for x = 1, width, 1 do
            turtle.forward()
        end
        turtle.turnLeft()
        for y = 1, width, 1 do
            turtle.forward()
        end
    end
end

height = 0
while true do
    find_chest()
    empty_me()
    turtle.turnRight()
    turtle.turnRight()
    for i = 0, height, 1 do
        turtle.digDown()
        turtle.down()
    end
    dig_square(16)
    for i = 0, height, 1 do
        turtle.up()
    end
    height = height + 1
end