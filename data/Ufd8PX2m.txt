modem = peripheral.wrap("left")
modem.open(10)
CanChangeRoof = true
RoofOpen = true


function PlaceStrip()
    turtle.forward()
    turtle.placeDown()
    turtle.forward()
    turtle.placeDown()
    turtle.forward()
    turtle.placeDown() 
end
function RemoveStrip()
    turtle.forward()
    turtle.digDown()
    turtle.forward()
    turtle.digDown()
    turtle.forward()
    turtle.digDown() 
end
function ChangeRoof(Remove)
    print("Entered Method")
    CanChangeRoof = false
    turtle.up()
    if Remove then RemoveStrip() else PlaceStrip() end
    turtle.forward()
    turtle.turnRight()
    turtle.forward()
    turtle.turnRight()
    if Remove then RemoveStrip() else PlaceStrip() end
    turtle.forward()
    turtle.turnLeft()
    turtle.forward()
    turtle.turnLeft()
    if Remove then RemoveStrip() else PlaceStrip() end
    turtle.turnLeft()
    turtle.turnLeft()
    turtle.forward()
    turtle.forward()
    turtle.forward()
    turtle.down()
    turtle.turnRight()
    turtle.forward()
    turtle.forward()
    turtle.turnRight()
    RoofOpen = Remove
    CanChangeRoof = true
end
while true do
    local event, modemSide, senderChannel,replyChannel, message, senderDistance = os.pullEvent("modem_message")
    if CanChangeRoof then
        if message == "Open" then
            if not RoofOpen then
                ChangeRoof(true)
            end
        elseif message == "Close" then
            if RoofOpen then
                ChangeRoof(false)
            end
        end
    end
    sleep(1)
end

    