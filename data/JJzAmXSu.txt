os.loadAPI("AltUtil.lua")
alt = peripheral.wrap("front")
while true do
	sleep(0.1)
	shell.run("clear")
	ing = turtle.getItemDetail() 
	if not ing then
		rs.setOutput("left",false)
		print("no item")
		goto continue0
	end
	rec = AltUtil.findRec(ing)
	if not rec then
		rs.setOutput("left",false)
		print("invalid item")
		turtle.dropUp()
		goto continue0
	end
	if AltUtil.getBlood(alt)<rec.blood then
		print("insufficient blood")
		rs.setOutput("left",true)
	else
		rs.setOutput("left",false)
		print("receipe in progress")
		while alt.getItemDetail(1).name~=rec.product.name do
			sleep(0.1)
		end
		alt.pushItem("top")
	end
	::continue0::
end