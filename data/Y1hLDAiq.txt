   if app.ENABLE_ITEM_BLEND_SYSTEM:
                if constInfo.IsBlendTime(self.affect):
                    self.CheckBackgroundBlend(self.endTime - app.GetGlobalTimeStamp())
                
            if self.endTime - app.GetGlobalTimeStamp() < 86400*365: #If time is less than a year, display
                leftTime = localeInfo.NewFormatTime(self.endTime - app.GetGlobalTimeStamp(), True, True, True, True, True)
                toolTip += " (%s : %s)" % (localeInfo.LEFT_TIME, leftTime)
            else:
                toolTip += " (%s)" % localeInfo.NEVER_EXPIRES_DURATION
            
        self.SetToolTipText(toolTip, 0, 40)
        
    if app.ENABLE_ITEM_BLEND_SYSTEM:
        def CheckBackgroundBlend(self, leftSec):
            if leftSec < 10 * 60:
                self.LoadImage("icon/affect/affect_bg_red.tga")
            elif leftSec >= 10 * 60 and leftSec < 20 * 60:
                self.LoadImage("icon/affect/affect_bg_yellow.tga")
            elif leftSec >= 20 * 60:
                self.LoadImage("icon/affect/affect_bg_normal.tga")
            
            if str(wndMgr.GetScreenWidth()) >= "1920":
                self.SetScale(0.9, 0.9)
            elif str(wndMgr.GetScreenWidth()) >= "1366" and str(wndMgr.GetScreenWidth()) < "1920":
                self.SetScale(0.75, 0.75)
            else:
                self.SetScale(0.65, 0.65)
            
            if self.blendImage:
                self.blendImage.SetWindowHorizontalAlignCenter()
                self.blendImage.SetWindowVerticalAlignCenter()