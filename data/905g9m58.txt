HHOOK MouseHook;
BOOL WINAPI HandlerRoutine(_In_ DWORD dwCtrlType){	if (dwCtrlType == CTRL_CLOSE_EVENT)	{	UnhookWindowsHookEx(MouseHook);	}
	return 1;
}


LRESULT __stdcall MousedProc(int nCode, WPARAM wParam, LPARAM lParam) {	// код hook-точки	// идентификатор сообщения	// координаты мыши
	if (nCode >= 0) {
		switch (wParam) {	case WM_RBUTTONDOWN: {		return -1;		}
		case WM_RBUTTONUP:	{	return CallNextHookEx(MouseHook, nCode, wParam, lParam);		}		}
	}
	return CallNextHookEx(MouseHook, nCode, wParam, lParam);
};

int SetHook(LPSTR lpCmdLine) {
	if ((MouseHook = SetWindowsHookEx(WH_MOUSE_LL, MousedProc, NULL, 0))){
		return 0;}
	}

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance,
	LPSTR lpCmdLine, int nCmdShow) {
	SetConsoleCtrlHandler(HandlerRoutine, 1);

	SetHook(lpCmdLine);
	MSG msg;

	while (GetMessage(&msg, NULL, 0, 0))
	{
		TranslateMessage(&msg);
		DispatchMessage(&msg);
	}

	return msg.wParam;
};
