from kivy.app import App
from kivy.lang import Builder
from kivy.uix.screenmanager import Screen
from kivy.uix.button import Button

kv = """
<PageButton>:
    on_release: self.go_to_page(self.text)

<TableOfContentsScreen>:
    GridLayout:
        id: grid
        rows: 4
        cols: 4

<ContentScreen>:
    BoxLayout:
        orientation: 'vertical'
        Label:
            id: label
        Button:
            size_hint_y: None
            height: dp(48)
            text: 'Home'
            on_release: app.root.ids.sm.current = 'toc'
    
BoxLayout:
    orientation: 'vertical'
    Label:
        size_hint_y: None
        height: dp(30)
        text: 'Hymn Example'
    ScreenManager:
        id: sm
        TableOfContentsScreen:
            name: 'toc'
        ContentScreen:
            name: 'contents'

"""


class PageButton(Button):
    hymns = {'Hymn 1': 'Put file names here, read the file and load the text',  'Hymn 2': 'or put the text directly',
             'Hymn 3': 'The text of hymn 3', 'Hymn 4': 'The text of hymn 4', 'Hymn 5': 'The text of hymn 5',
             'Hymn 6': 'The text of hymn 6', 'Hymn 7': 'The text of hymn 7', 'Hymn 8': 'The text of hymn 8',
             'Hymn 9': 'The text of hymn 9', 'Hymn 10': 'The text of hymn 10', 'Hymn 11': 'The text of hymn 11',
             'Hymn 12': 'The text of hymn 12', 'Hymn 13': 'The text of hymn 13', 'Hymn 14': 'The text of hymn 14',
             'Hymn 15': 'The text of hymn 15', 'Hymn 16': 'The text of hymn 16'}

    def go_to_page(self, page):
        app = App.get_running_app()
        sm = app.root.ids.sm
        sm.current = 'contents'
        sm.get_screen('contents').ids.label.text = self.hymns[page]


class TableOfContentsScreen(Screen):
    def on_kv_post(self, base_widget):
        grid = self.ids.grid
        for i in range(1, 17):
            grid.add_widget(PageButton(text=f'Hymn {i}'))


class ContentScreen(Screen):
    pass


class HymnApp(App):
    def build(self):
        return Builder.load_string(kv)


HymnApp().run()
