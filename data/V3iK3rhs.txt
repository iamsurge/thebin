local wheel_img_id = "Ye7L1Ant"
local old, mon, wheel_img, w, h

function init()
  shell.run("delete wheel.nfp")
  shell.run("pastebin", "get", wheel_img_id, "wheel.nfp")
  wheel_img = paintutils.loadImage("wheel.nfp")
  
  old = term.current()
  mon = peripheral.find("monitor")

  mon.setTextScale(0.5)
  w, h = mon.getSize()

  term.redirect(mon)
end

function renderWheel()
  if wheel_img ~= nil then
    wheel_img = paintutils.drawImage(wheel_img, 1, 1)
  end
end

function renderHand(angle)
  local a   = math.rad(angle)
  local cos = math.cos(a)
  local sin = math.sin(a)

  local r = h/4

  local x = cos * r
  local y = sin * r

  paintutils.drawLine(w/2, h/2, x, y, colours.yellow)
end

function main()
  init()

  local a = 0
  while true do
    renderWheel()
    renderHand(a)
    
    a = a + 1
    if a > 359 then a = 0 end
    sleep(0.5)
  end
end

main()