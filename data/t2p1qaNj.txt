public class Solution {
    
    public int encode(int key, int value) {
        return ((key & (1 << (value % 14 % 11))) > 0)? 1: 0;
    }
    public int RomanToInt(string s) {

        var value = 0;
        var total = 0;
        foreach (char i in s) {
            value = (1+4*encode(70, i))*(1+9*encode(208, i))*(1+99*encode(131, i));
            total -= ((value > total%6432) ? 12865: 1) * (total%6432) - 6433*value  ;
        }
       return total/6432;
    }
}