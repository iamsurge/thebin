海阔视界规则分享，当前分享的是：二级页面详情￥page_detail￥当前未设置账号，点我设置@@eyJkYXRhIjoie1wiYXNzb2NpYXRlZE1vZGVsc01hcEZvckpvaW5UYWJsZVwiOnt9LFwiYXNzb2NpYXRlZE1vZGVsc01hcFdpdGhGS1wiOnt9LFwiYXNzb2NpYXRlZE1vZGVsc01hcFdpdGhvdXRGS1wiOnt9LFwiZmllbGRzVG9TZXRUb0RlZmF1bHRcIjpbXSxcImlkXCI6MCxcImxhc3RfY2hhcHRlcl9ydWxlXCI6XCJcIixcImxpc3RUb0NsZWFyQXNzb2NpYXRlZEZLXCI6W10sXCJsaXN0VG9DbGVhclNlbGZGS1wiOltdLFwicGFnZUxpc3RcIjpbe1wiY29sX3R5cGVcIjpcInRleHRfMVwiLFwibmFtZVwiOlwi6K6+572uXCIsXCJwYXRoXCI6XCJzZXR0aW5nc1wiLFwicnVsZVwiOlwianM6XFxuLyphZGRMaXN0ZW5lcignb25DbG9zZScsICQudG9TdHJpbmcoKCkgPT4ge1xcbiAgICAvL3NhdmVGaWxlKFxcXCJoaWtlcjovL2ZpbGVzL3J1bGVzL3dlYmRhdi9pbmZvLmpzb25cXFwiLCBKU09OLnN0cmluZ2lmeShbZ2V0SXRlbShcXFwiZGF2XFxcIiksIGdldEl0ZW0oXFxcInVzZXJuYW1lXFxcIiksIGdldEl0ZW0oXFxcInBhc3N3ZFxcXCIpXSkpXFxuICAgIC8vY2xlYXJNeVZhcihcXFwicGF0aFxcXCIpXFxuICAgIC8vcmVmcmVzaFBhZ2UoKVxcbn0pKSovXFxudmFyIGQgPSBbXTtcXG5kLnB1c2goe1xcbiAgICB0aXRsZTogXFxcIndlYmRhduWcsOWdgO+8mlxcXCIgKyBnZXRJdGVtKFxcXCJkYXZcXFwiLCBcXFwi6K+36L6T5YWlV2ViRGF25Zyw5Z2AXFxcIiksXFxuICAgIHVybDogJChnZXRJdGVtKFxcXCJkYXZcXFwiLCBcXFwiXFxcIiksIFxcXCLor7fovpPlhaXmraPnoa7moLzlvI/nmoR3ZWJkYXbpk77mjqXvvIHvvIHvvIFcXFwiKS5pbnB1dCgoKSA9PiB7XFxuICAgICAgICBpZiAoIWlucHV0LnN0YXJ0c1dpdGgoXFxcImh0dHBcXFwiKSkge1xcbiAgICAgICAgICAgIHJldHVybiBcXFwidG9hc3Q6Ly/or7fovpPlhaXmraPnoa7nmoR3ZWJkYXbpk77mjqXvvIHvvIHvvIFcXFwiXFxuICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgIGlmIChpbnB1dFtpbnB1dC5sZW5ndGggLSAxXSA9PSBcXFwiL1xcXCIpIHtcXG4gICAgICAgICAgICAgICAgdXJsID0gaW5wdXQuc3Vic3RyaW5nKDAsIGlucHV0Lmxlbmd0aCAtIDEpXFxuICAgICAgICAgICAgICAgIHNldEl0ZW0oXFxcImRhdlxcXCIsIHVybClcXG4gICAgICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgICAgICBzZXRJdGVtKFxcXCJkYXZcXFwiLCBpbnB1dClcXG4gICAgICAgICAgICB9XFxuICAgICAgICB9XFxuICAgICAgICByZWZyZXNoUGFnZSgpXFxuICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vZW1wdHlcXFwiXFxuICAgIH0pLFxcbiAgICBjb2xfdHlwZTogXFxcInRleHRfMVxcXCJcXG59KVxcbmQucHVzaCh7XFxuICAgIHRpdGxlOiBcXFwi6LSm5oi3XFxcIixcXG4gICAgdXJsOiAkKGdldEl0ZW0oXFxcInVzZXJcXFwiLCBcXFwiXFxcIikpLmlucHV0KCgpID0+IHtcXG4gICAgICAgIHNldEl0ZW0oXFxcInVzZXJcXFwiLCBpbnB1dClcXG4gICAgICAgIHJlZnJlc2hQYWdlKClcXG4gICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCJcXG4gICAgfSksXFxuICAgIGNvbF90eXBlOiBcXFwidGV4dF8yXFxcIlxcbn0pXFxuZC5wdXNoKHtcXG4gICAgdGl0bGU6IFxcXCLlr4bnoIFcXFwiLFxcbiAgICB1cmw6ICQoZ2V0SXRlbShcXFwicGFzc3dkXFxcIiwgXFxcIlxcXCIpKS5pbnB1dCgoKSA9PiB7XFxuICAgICAgICBzZXRJdGVtKFxcXCJwYXNzd2RcXFwiLCBpbnB1dClcXG4gICAgICAgIHJlZnJlc2hQYWdlKClcXG4gICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCJcXG4gICAgfSksXFxuICAgIGNvbF90eXBlOiBcXFwidGV4dF8yXFxcIlxcbn0pXFxuZC5wdXNoKHtcXG4gICAgdGl0bGU6IFxcXCLmtYvor5Xov57mjqVcXFwiLFxcbiAgICB1cmw6ICQoKS5sYXp5UnVsZSgoKSA9PiB7XFxuICAgICAgICBjb25zdCB7XFxuICAgICAgICAgICAgZ2V0RmlsZXNcXG4gICAgICAgIH0gPSAkLnJlcXVpcmUoXFxcImhpa2VyOi8vcGFnZS9jb2RlXFxcIilcXG4gICAgICAgIGlmIChnZXRGaWxlcyhnZXRJdGVtKFxcXCJkYXZcXFwiKSArIFxcXCIvXFxcIikpIHtcXG4gICAgICAgICAgICByZXR1cm4gXFxcInRvYXN0Oi8v6L+e5o6l5oiQ5YqfXFxcIlxcbiAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICByZXR1cm4gXFxcInRvYXN0Oi8v6L+e5o6l5aSx6LSl77yM6K+35qOA5p+l6LSm5oi35a+G56CBXFxcIlxcbiAgICAgICAgfVxcbiAgICB9KSxcXG4gICAgY29sX3R5cGU6IFxcXCJ0ZXh0X2NlbnRlcl8xXFxcIlxcbn0pXFxubGV0IGljb24gPSBnZXRJdGVtKFxcXCJpY29uU3R5bGVcXFwiLCBcXFwi6buY6K6kXFxcIilcXG5sZXQgZGV0YWlsID0gZ2V0SXRlbShcXFwiZGV0YWlsXFxcIiwgXFxcIuW8gFxcXCIpXFxubGV0IHN1YnRpdGxlID0gZ2V0SXRlbShcXFwic3VidGl0bGVcXFwiLCBcXFwi5byAXFxcIilcXG5sZXQgdGltZXN0YW1wID0gZ2V0SXRlbShcXFwidGltZVxcXCIsIFxcXCIwXFxcIilcXG5sZXQgbmV3VmVyc2lvbjtcXG5sZXQgbXlWZXJzaW9uID0gTVlfUEFSQU1TLnZlcnNpb24gfHwgOTk5O1xcbnRyeSB7XFxuICAgIHJlcyA9IEpTT04ucGFyc2UoZmV0Y2goXFxcImh0dHA6Ly9oaWtlci5ub2tpYS5wcmVzcy9oaWtlcnVsZS9kZXYvZ2V0YnlpZD9pZD01MjEwXFxcIikpXFxuICAgIG5ld1ZlcnNpb24gPSByZXMucmVzdWx0LnZlclxcbn0gY2F0Y2ggKGUpIHtcXG4gICAgdG9hc3QoXFxcIumBk+mVv+S7k+W6k+aKvemjjuS6hu+8jOacrOasoeacquajgOa1i+WIsOaWsOeJiOS/oeaBr1xcXCIpO1xcbiAgICBuZXdWZXJzaW9uID0gbXlWZXJzaW9uO1xcbn1cXG5sZXQgaXNVcGRhdGUgPSBOdW1iZXIobmV3VmVyc2lvbikgPD0gTnVtYmVyKG15VmVyc2lvbik7XFxubGV0IGlzVmVyID0gTnVtYmVyKG5ld1ZlcnNpb24pID09PSBOdW1iZXIobXlWZXJzaW9uKTtcXG5kLnB1c2goe1xcbiAgICBjb2xfdHlwZTogXFxcImxpbmVfYmxhbmtcXFwiXFxufSwge1xcbiAgICB0aXRsZTogaXNVcGRhdGUgPyBcXFwi5bey5piv5pyA5paw54mIXFxcIiA6IFxcXCLwn4aZ5paw54mI5pysXFxcIixcXG4gICAgdXJsOiBcXFwicnVsZTovLzVyVzM2WmlVNktlRzU1V002YWFXNmFHMTZhS1I2WUdUNktlRTVZaVo0NENRVjJWaVpHRjI0NENSNzcrbGFHOXRaVjl5ZFd4bFgzVnliTysvcFdoMGRIQTZMeTlvYVd0bGNpNXViMnRwWVM1d2NtVnpjeTlvYVd0bGNuVnNaUzl5ZFd4bGJHbHpkQzVxYzI5dVAybGtQVFV5TVRBbVlYVjBhRDFoWWpJek1EVXlZaTFqTUdRMkxUVTRabU10T1RVMU5TMWhNalV3TW1Fd01HRXpPRGM9XFxcIixcXG4gICAgY29sX3R5cGU6IFxcXCJ0ZXh0XzJcXFwiXFxufSwge1xcbiAgICB0aXRsZTogXFxcIuiuvue9ruWbvuagh++8mlxcXCIgKyBpY29uLFxcbiAgICB1cmw6ICQoKS5sYXp5UnVsZSgoaWNvbikgPT4ge1xcbiAgICAgICAgc2V0SXRlbShcXFwiaWNvblN0eWxlXFxcIiwgaWNvbiA9PSBcXFwi6buY6K6kXFxcIiA/IFxcXCLok53ojpNcXFwiIDogXFxcIum7mOiupFxcXCIpXFxuICAgICAgICByZWZyZXNoUGFnZSgpXFxuICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vZW1wdHlcXFwiXFxuICAgIH0sIGljb24pLFxcbiAgICBjb2xfdHlwZTogXFxcInRleHRfMlxcXCJcXG59LCB7XFxuICAgIHRpdGxlOiBcXFwi5pi+56S66K+m57uG77yaXFxcIiArIGRldGFpbCxcXG4gICAgdXJsOiAkKCkubGF6eVJ1bGUoKGRldGFpbCkgPT4ge1xcbiAgICAgICAgc2V0SXRlbShcXFwiZGV0YWlsXFxcIiwgZGV0YWlsID09IFxcXCLlvIBcXFwiID8gXFxcIuWFs1xcXCIgOiBcXFwi5byAXFxcIilcXG4gICAgICAgIHJlZnJlc2hQYWdlKClcXG4gICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCJcXG4gICAgfSwgZGV0YWlsKSxcXG4gICAgY29sX3R5cGU6IFxcXCJ0ZXh0XzJcXFwiXFxufSwge1xcbiAgICB0aXRsZTogXFxcIuWtl+W5leWKn+iDve+8mlxcXCIgKyBzdWJ0aXRsZSxcXG4gICAgdXJsOiAkKCkubGF6eVJ1bGUoKHN1YnRpdGxlKSA9PiB7XFxuICAgICAgICBzZXRJdGVtKFxcXCJzdWJ0aXRsZVxcXCIsIHN1YnRpdGxlID09IFxcXCLlvIBcXFwiID8gXFxcIuWFs1xcXCIgOiBcXFwi5byAXFxcIilcXG4gICAgICAgIHJlZnJlc2hQYWdlKClcXG4gICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCJcXG4gICAgfSwgc3VidGl0bGUpLFxcbiAgICBjb2xfdHlwZTogXFxcInRleHRfMlxcXCJcXG59LCB7XFxuICAgIHRpdGxlOiBcXFwi5pe26Ze05qC85byP77yaXFxcIiArICh0aW1lc3RhbXAgPT0gXFxcIjBcXFwiID8gXFxcIjIwMjIvMDgvMjAgMTc6MTQ6MzFcXFwiIDogXFxcIlNhdCwgMjAgQXVnIDIwMjIgMDk6MTQ6MzEgR01UXFxcIiksXFxuICAgIHVybDogJCgpLmxhenlSdWxlKCh0aW1lc3RhbXApID0+IHtcXG4gICAgICAgIHNldEl0ZW0oXFxcInRpbWVcXFwiLCB0aW1lc3RhbXAgPT0gXFxcIjBcXFwiID8gXFxcIjFcXFwiIDogXFxcIjBcXFwiKVxcbiAgICAgICAgcmVmcmVzaFBhZ2UoKVxcbiAgICAgICAgcmV0dXJuIFxcXCJoaWtlcjovL2VtcHR5XFxcIlxcbiAgICB9LCB0aW1lc3RhbXApLFxcbiAgICBjb2xfdHlwZTogXFxcInRleHRfMVxcXCJcXG59LCB7XFxuICAgIHVybDogJCgpLnJ1bGUoKCkgPT4ge1xcbiAgICAgICAgc2V0UmVzdWx0KFt7XFxuICAgICAgICAgICAgdGl0bGU6IGBcXG4gICAgICAgICAgICA8cD7mnKznr4fmlofnq6Dlj6rpkojlr7norr7nva7vvIzlhbbku5bnmoTkvb/nlKjmlrnms5Xlt7Lnu4/lnKjop4TliJnkuK3or7TmmI7muIXpmaTkuoY8L3A+IDxwPjxpbnM+PGlucz7liY3mj5DmnaHku7bvvJrlt7Lnu4/mm7TmlrA3LjnniYjmnKw8L2lucz48L2lucz48L3A+IDxwPua1t+mYlOinhueVjOmmlumhtemikemBk+inhOWImeOAkFdlYmRhduOAke+/pWhvbWVfcnVsZV91cmzvv6VodHRwOi8vaGlrZXIubm9raWEucHJlc3MvaGlrZXJ1bGUvcnVsZWxpc3QuanNvbj9pZD01MjEwJmFtcDthdXRoPWFiMjMwNTJiLWMwZDYtNThmYy05NTU1LWEyNTAyYTAwYTM4NzwvcD4gPGgxIGlkPVxcXCJ3ZWJkYXYlRTYlOTglQUYlRTQlQkIlODAlRTQlQjklODhcXFwiIHRhYmluZGV4PVxcXCItMVxcXCI+V2ViZGF25piv5LuA5LmIPC9oMT4gPHA+d2ViZGF25bCx5piv5LiA56eN572R55uY5paH5Lu25Lyg6L6T5Y2P6K6u77yM5bi455So5LqO5bCP5LyX6L2v5Lu255qE5pWw5o2u5aSH5Lu944CC5pys6KeE5YiZ5Y+v5Lul566h55CGd2ViZGF255qE5paH5Lu277yM5pSv5oyB5rWP6KeI44CB5pKt5pS+44CB5LiL6L2944CB5LiK5Lyg44CB5Yig6Zmk562J5pON5L2cPC9wPiA8aDEgaWQ9XFxcIiVFNiU4OSU5MyVFNSVCQyU4MCVFOCVBRSVCRSVFNyVCRCVBRVxcXCIgdGFiaW5kZXg9XFxcIi0xXFxcIj7miZPlvIDorr7nva48L2gxPiA8cD48aW1nIHNyYz1cXFwiaHR0cDovL2FsaXN0LmpvZWd1LnRrL2QvaGlrZXIvU2NyZWVuc2hvdF8yMDIyMDgyMV8wODI1NTBfY29tLmV4YW1wbGUuaGlrZXJ2aWV3LmpwZ1xcXCIgYWx0PVxcXCJTY3JlZW5zaG90XzIwMjIwODIxXzA4MjU1MF9jb20uZXhhbXBsZS5oaWtlcnZpZXdcXFwiIC8+PC9wPiA8cD7lsIbkvaDnmoR3ZWJkYXbpk77mjqXlkozotKbmiLflr4bnoIHloavov5vljrvvvIjov5nph4zmjqjojZDkvb/nlKjlnZrmnpzkupHvvIzkvJjngrk656iz5a6aO+e8uueCuTrlrrnph4/lsJHvvIzku7fmoLzotLXjgILkuZ/lj6/ku6Xoh6rlt7HmkK3lu7p3ZWJkYXbns7vnu5/vvIzkvovlpoJhbGlzdOWSjGNsb3VkcmV2Ze+8jOmcgOimgeS4gOWumueahOWKqOaJi+iDveWKm++8iTwvcD4gPGgyIGlkPVxcXCIlRTglQUUlQkUlRTclQkQlQUUlRTUlOUIlQkUlRTYlQTAlODdcXFwiIHRhYmluZGV4PVxcXCItMVxcXCI+6K6+572u5Zu+5qCHPC9oMj4gPHA+5pys6KeE5YiZ5YaF572u5Lik56eN6aOO5qC855qE5Zu+5qCH77yM5YiG5Yir5Li66YGT6ZW/55qE5ZKM6JOd6I6T55qE77yM6Ieq5bex6YCJ5oupPC9wPiA8aDIgaWQ9XFxcIiVFNiU5OCVCRSVFNyVBNCVCQSVFOCVBRiVBNiVFNyVCQiU4NlxcXCIgdGFiaW5kZXg9XFxcIi0xXFxcIj7mmL7npLror6bnu4Y8L2gyPiA8cD7lj6/ku6XliJflh7rlvZPliY3mlofku7blpLnmiJbmlofku7bnmoTliJvlu7rml7bpl7TjgII8YnIgLz4gPHN0cm9uZz48c3Ryb25nPumXrumimO+8mjwvc3Ryb25nPjwvc3Ryb25nPjxiciAvPiDkuI3og73oh6rliqjmkq3mlL7kuIvkuIDpm4Y8L3A+IDxoMiBpZD1cXFwiJUU1JUFEJTk3JUU1JUI5JTk1XFxcIiB0YWJpbmRleD1cXFwiLTFcXFwiPuWtl+W5lTwvaDI+IDxwPuWtl+W5leWKn+iDveWmguaenOaJk+W8gO+8jOmCo+S5iOWmguaenOinhumikeS4juWtl+W5leeahOaWh+S7tuWQjeebuOWQjO+8jOmCo+S5iOWwseS8muiHquWKqOaMgui9veS4iuOAguWmguaenOW9k+WJjeaWh+S7tuWkueaciei/meS4quWtl+W5leaWh+S7tu+8jOS9huaYr+WQjeWtl+S4jeWQjO+8jOWwseS8mui3s+WHuumAieaLqeahhumAieaLqTwvcD4gPGgxIGlkPVxcXCIlRTglQkYlOTQlRTUlOUIlOUUlRTQlQjglQkIlRTclOTUlOEMlRTklOUQlQTJcXFwiIHRhYmluZGV4PVxcXCItMVxcXCI+6L+U5Zue5Li755WM6Z2iPC9oMT4gPHA+PGltZyBzcmM9XFxcImh0dHA6Ly9hbGlzdC5qb2VndS50ay9kL2hpa2VyL1NjcmVlbnNob3RfMjAyMjA4MjFfMTQwNzA1X2NvbS5leGFtcGxlLmhpa2Vydmlldy5qcGdcXFwiIGFsdD1cXFwiU2NyZWVuc2hvdF8yMDIyMDgyMV8xNDA3MDVfY29tLmV4YW1wbGUuaGlrZXJ2aWV3XFxcIiAvPjxiciAvPiDlj6/ku6XnnIvop4HmnInmk43kvZzmoI/vvIzlj6/ku6XkuIrkvKDmlofku7bvvIzmlrDlu7rmlofku7blpLnlkozliKDpmaTmlofku7bkuInkuKrmk43kvZw8L3A+IDxwPuS4i+mdouaYr+S9oOeahOaWh+S7tu+8jOS9oOWPr+S7peWDj+a1j+iniOaWh+S7tueuoeeQhuWZqOS4gOagt+S9v+eUqOS7ljwvcD4gPGgxIGlkPVxcXCIlRTklQUIlOTglRTclQkElQTclRTglQUUlQkUlRTclQkQlQUVcXFwiIHRhYmluZGV4PVxcXCItMVxcXCI+6auY57qn6K6+572uPC9oMT4gPHA+54K55Ye757yW6L6R6KeE5YiZ77yM5YiS5Yiw5bqV6YOo55qE6aKE5aSE55CGPGJyIC8+IDxpbWcgc3JjPVxcXCJodHRwOi8vYWxpc3Quam9lZ3UudGsvZC9oaWtlci9TY3JlZW5zaG90XzIwMjIwODIxXzE0MTEzNV9jb20uZXhhbXBsZS5oaWtlcnZpZXcuanBnXFxcIiBhbHQ9XFxcIlNjcmVlbnNob3RfMjAyMjA4MjFfMTQxMTM1X2NvbS5leGFtcGxlLmhpa2Vydmlld1xcXCIgLz48YnIgLz4g5qC55o2u5rOo6YeK5L+u5pS577yM5oiR5YaZ55qE5Yeg5Liq5paH5Lu25qC85byP5bey57uP5b6I5a6M5pW05LqG77yM5aaC5p6c5pyJ5pyL5Y+L6K6k5Li65LiN5aW977yM5Y+v5Lul6Ieq6KGM5L+u5pS5PGJyIC8+IOagvOW8j++8mlvigJznsbvlnosx4oCdLOKAnOexu+WeizLigJ1dPC9wPiA8cD7pg73lrozmiJDkuobvvIxlbmpvefCfkp48L3A+XFxuICAgICAgICAgICAgYCxcXG4gICAgICAgICAgICBjb2xfdHlwZTogXFxcInJpY2hfdGV4dFxcXCJcXG4gICAgICAgIH1dKVxcbiAgICB9KSxcXG4gICAgdGl0bGU6IFxcXCLmn6XnnIvkvb/nlKjor7TmmI5cXFwiLFxcbiAgICBkZXNjOiBcXFwiUG93ZXJlZCBieSBKb2Um5bCP5qOJ6KKEXFxcIixcXG4gICAgY29sX3R5cGU6IFxcXCJ0ZXh0X2NlbnRlcl8xXFxcIixcXG4gICAgZXh0cmE6IHtcXG4gICAgICAgIGxpbmVWaXNpYmxlOiBmYWxzZVxcbiAgICB9XFxufSlcXG5zZXRSZXN1bHQoZCk7XCJ9LHtcImNvbF90eXBlXCI6XCJtb3ZpZV8zXCIsXCJuYW1lXCI6XCLku6PnoIFcIixcInBhdGhcIjpcImNvZGVcIixcInJ1bGVcIjpcIiQuZXhwb3J0cy5nZXRGaWxlcyA9IGZ1bmN0aW9uKHBhdGgpIHtcXG4gICAgdHJ5IHtcXG4gICAgICAgIGlmICghcGF0aCB8fCBwYXRoID09IFxcXCJcXFwiKSB7XFxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXFxuICAgICAgICB9XFxuICAgICAgICBsZXQgd2ViZGF2ID0gYnVpbGRXZWJEYXYocGF0aCwgZ2V0SXRlbShcXFwidXNlclxcXCIsIFxcXCJcXFwiKSwgZ2V0SXRlbShcXFwicGFzc3dkXFxcIiwgXFxcIlxcXCIpKVxcbiAgICAgICAgbGV0IHJlcyA9IHdlYmRhdi5saXN0KClcXG4gICAgICAgIHJlcyA9IEpTT04ucGFyc2UocmVzKVxcbiAgICAgICAgcmV0dXJuIHJlc1xcbiAgICB9IGNhdGNoIChlKSB7XFxuICAgICAgICBsb2coZS5tZXNzYWdlKVxcbiAgICAgICAgcmV0dXJuIGZhbHNlXFxuICAgIH1cXG59XFxuJC5leHBvcnRzLmZldGNoRmlsZSA9IGZ1bmN0aW9uKHBhdGgpIHtcXG4gICAgbGV0IHJlcyA9IHJlcXVlc3QocGF0aCwge1xcbiAgICAgICAgaGVhZGVyczoge1xcbiAgICAgICAgICAgIFxcXCJhdXRob3JpemF0aW9uXFxcIjogXFxcIkJhc2ljIFxcXCIgKyBiYXNlNjRFbmNvZGUoZ2V0SXRlbShcXFwidXNlclxcXCIpICsgXFxcIjpcXFwiICsgZ2V0SXRlbShcXFwicGFzc3dkXFxcIikpXFxuICAgICAgICB9XFxuICAgIH0pXFxuICAgIHJldHVybiByZXNcXG59XFxuJC5leHBvcnRzLmdldEljb24gPSBmdW5jdGlvbihjb250ZW50KSB7XFxuICAgIGxldCB7XFxuICAgICAgICBnZXRIem1cXG4gICAgfSA9ICQucmVxdWlyZShcXFwiaGlrZXI6Ly9wYWdlL2NvZGVcXFwiKVxcbiAgICBsZXQgaWNvblN0eWxlcyA9IFt7XFxuICAgICAgICBuYW1lOiAn6buY6K6kJyxcXG4gICAgICAgIHVybDogJ2h0dHBzOi8vZ2l0Y29kZS5uZXQvcXFfMzIzOTQzNTEvZHIvLS9yYXcvbWFzdGVyL2ltZy/mlofku7bnsbvlnosvJ1xcbiAgICB9LCB7XFxuICAgICAgICBuYW1lOiAn6JOd6I6TJyxcXG4gICAgICAgIHVybDogJ2h0dHBzOi8vZ2l0Y29kZS5uZXQvcXFfMzIzOTQzNTEvZHIvLS9yYXcvbWFzdGVyL2ltZy/mlofku7bnsbvlnosyLydcXG4gICAgfV07XFxuICAgIGxldCBpY29uU3R5bGUgPSBnZXRJdGVtKCdpY29uU3R5bGUnLCAn6buY6K6kJyk7XFxuICAgIGxldCBub3dTdHlsZSA9IGljb25TdHlsZXMuZmluZCh4ID0+IHgubmFtZSA9PT0gaWNvblN0eWxlKTtcXG4gICAgbGV0IGljb25Sb290ID0gbm93U3R5bGUgPyBub3dTdHlsZS51cmwgOiBpY29uU3R5bGVzWzBdLnVybDtcXG4gICAgbGV0IHJvb3QgPSBpY29uUm9vdDtcXG4gICAgaWYgKGNvbnRlbnQuZGlyKSB7XFxuICAgICAgICBpbWcgPSByb290ICsgXFxcIuaWh+S7tuWkuS5zdmdcXFwiXFxuICAgIH0gZWxzZSB7XFxuICAgICAgICBsZXQgZmlsZXMgPSAnYWl8YXBrfGF2aXxjc3N8ZG1nfGV4ZXxmbHZ8Z2lmfGhpa2VyfGh0bWx8aXNvfGpwZ3xqc3xqc29ufGxvZ3xtb3Z8bXAzfG1wNHxvdGZ8cGhwfHBuZ3xwcHR8cHNkfHRhYmxlfHR4dHx3YXZ8eGxzfHppcCcuc3BsaXQoJ3wnKTtcXG4gICAgICAgIGxldCBmaWxlTmFtZSA9IGNvbnRlbnQubmFtZVxcbiAgICAgICAgbGV0IGh6bSA9IGdldEh6bShmaWxlTmFtZSlcXG4gICAgICAgIGlmIChmaWxlcy5pbmNsdWRlcyhoem0pKSB7XFxuICAgICAgICAgICAgaW1nID0gcm9vdCArIGh6bSArICcuc3ZnJztcXG4gICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgaW1nID0gcm9vdCArIFxcXCLmlofku7Yuc3ZnXFxcIlxcbiAgICAgICAgfVxcbiAgICB9XFxuICAgIHJldHVybiBpbWdcXG59XFxuJC5leHBvcnRzLmdldEh6bSA9IGZ1bmN0aW9uKGZpbGVOYW1lKSB7XFxuICAgIHJldHVybiBmaWxlTmFtZS5zdWJzdHIoZmlsZU5hbWUubGFzdEluZGV4T2YoXFxcIi5cXFwiKSArIDEpXFxufVxcbiQuZXhwb3J0cy5yZW1vdmVFeHQgPSBmdW5jdGlvbihmaWxlKSB7XFxuICAgIHJldHVybiBmaWxlLnNwbGl0KCcuJykuc2xpY2UoMCwgLTEpLmpvaW4oJy4nKVxcbn07XFxuJC5leHBvcnRzLmdldFN1YiA9IGZ1bmN0aW9uKGxpc3QpIHtcXG4gICAgY29uc3Qge1xcbiAgICAgICAgZ2V0SHptXFxuICAgIH0gPSAkLnJlcXVpcmUoXFxcImhpa2VyOi8vcGFnZS9jb2RlXFxcIilcXG4gICAgbGV0IHMgPSBbXVxcbiAgICBsaXN0LmZvckVhY2goaXRlbSA9PiB7XFxuICAgICAgICBpZiAoJC5zdWJ0aXRsZS5pbmNsdWRlcyhnZXRIem0oaXRlbS5uYW1lKSkpIHtcXG4gICAgICAgICAgICBzLnB1c2goe1xcbiAgICAgICAgICAgICAgICB0aXRsZTogaXRlbS5uYW1lLFxcbiAgICAgICAgICAgICAgICB1cmw6IGl0ZW0udXJsXFxuICAgICAgICAgICAgfSlcXG4gICAgICAgIH1cXG4gICAgfSlcXG4gICAgcmV0dXJuIHNcXG59XFxuJC5leHBvcnRzLmRvd25sb2FkID0gZnVuY3Rpb24ocGF0aCwgbmFtZSkge1xcbiAgICBsZXQgd2ViZGF2ID0gYnVpbGRXZWJEYXYocGF0aCwgZ2V0SXRlbShcXFwidXNlclxcXCIsIFxcXCJcXFwiKSwgZ2V0SXRlbShcXFwicGFzc3dkXFxcIiwgXFxcIlxcXCIpKVxcbiAgICBsZXQgcCA9IFxcXCJoaWtlcjovL2ZpbGVzL2NhY2hlL19maWxlU2VsZWN0X1xcXCIgKyBuYW1lO1xcbiAgICB3ZWJkYXYuZG93bmxvYWQobmFtZSwgcCk7XFxuICAgIHJldHVybiBnZXRQYXRoKHApO1xcbn1cXG4kLmV4cG9ydHMuZGVsZXRlRmlsZSA9IGZ1bmN0aW9uKHBhdGgsIG5hbWUpIHtcXG4gICAgbGV0IHdlYmRhdiA9IGJ1aWxkV2ViRGF2KHBhdGgsIGdldEl0ZW0oXFxcInVzZXJcXFwiLCBcXFwiXFxcIiksIGdldEl0ZW0oXFxcInBhc3N3ZFxcXCIsIFxcXCJcXFwiKSlcXG4gICAgd2ViZGF2LmRlbGV0ZShuYW1lKVxcbn1cXG4kLmV4cG9ydHMuc29ydHMgPSBmdW5jdGlvbihsaXN0LCBtZXRob2QpIHtcXG4gICAgaWYgKG1ldGhvZC5pbmNsdWRlcyhcXFwi5ZCN56ewXFxcIikpIHtcXG4gICAgICAgIGxpc3Quc29ydChmdW5jdGlvbihhLCBiKSB7XFxuICAgICAgICAgICAgcmV0dXJuIGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSlcXG4gICAgICAgIH0pXFxuICAgIH0gZWxzZSBpZiAobWV0aG9kLmluY2x1ZGVzKFxcXCLml7bpl7RcXFwiKSkge1xcbiAgICAgICAgbGlzdC5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcXG4gICAgICAgICAgICByZXR1cm4gYS5tb2RpZnlUaW1lc3RhbXAgLSBiLm1vZGlmeVRpbWVzdGFtcFxcbiAgICAgICAgfSlcXG4gICAgfVxcbiAgICBpZiAobWV0aG9kLmluY2x1ZGVzKFxcXCLlj41cXFwiKSkge1xcbiAgICAgICAgbGlzdC5yZXZlcnNlKCk7XFxuICAgIH1cXG4gICAgcmV0dXJuIGxpc3RcXG59XFxuJC5leHBvcnRzLmdldEluZm8gPSBmdW5jdGlvbigpIHtcXG4gICAgcmV0dXJuIEpTT04ucGFyc2UocmVhZEZpbGUoXFxcImhpa2VyOi8vZmlsZXMvcnVsZXMvd2ViZGF2L2luZm8uanNvblxcXCIpKVxcbn1cIn0se1wiY29sX3R5cGVcIjpcIm1vdmllXzNcIixcIm5hbWVcIjpcIuS4u+mhtVwiLFwicGF0aFwiOlwibWFpblwiLFwicnVsZVwiOlwianM6XFxudmFyIGQgPSBbXTtcXG5jb25zdCB7XFxuICAgIGdldEZpbGVzLFxcbiAgICBkb3dubG9hZCxcXG4gICAgZGVsZXRlRmlsZSxcXG4gICAgZ2V0SWNvbixcXG4gICAgc29ydHNcXG59ID0gJC5yZXF1aXJlKFxcXCJoaWtlcjovL3BhZ2UvY29kZVxcXCIpXFxudmFyIHBhdGggPSBnZXRNeVZhcihcXFwicGF0aFxcXCIsIGdldEl0ZW0oXFxcImRhdlxcXCIpICsgXFxcIi9cXFwiKVxcbmxldCBmaWxlcyA9IGdldEZpbGVzKHBhdGgpXFxuaWYgKGZpbGVzKSB7XFxuICAgIGxldCBwYXRocyA9IGdldE15VmFyKFxcXCJwYXRoXFxcIikucmVwbGFjZShnZXRJdGVtKFxcXCJkYXZcXFwiKSwgXFxcIlxcXCIpXFxuICAgIHBhdGhzID0gcGF0aHMuc3BsaXQoXFxcIi9cXFwiKVxcbiAgICBsZXQgdGVtcCA9IFxcXCJcXFwiXFxuICAgIHNvcnRzKGZpbGVzLCBnZXRNeVZhcihcXFwic29ydFxcXCIsIFxcXCLpu5jorqRcXFwiKSlcXG4gICAgZC5wdXNoKHtcXG4gICAgICAgIHRpdGxlOiBnZXRNeVZhcihcXFwibW9yZVxcXCIsIFxcXCIwXFxcIikgPT0gXFxcIjBcXFwiID8gXFxcIuKIp1xcXCIgOiBcXFwi4oioXFxcIixcXG4gICAgICAgIGNvbF90eXBlOiBcXFwic2Nyb2xsX2J1dHRvblxcXCIsXFxuICAgICAgICB1cmw6ICQoKS5sYXp5UnVsZSgocGF0aCkgPT4ge1xcbiAgICAgICAgICAgIHB1dE15VmFyKFxcXCJtb3JlXFxcIiwgZ2V0TXlWYXIoXFxcIm1vcmVcXFwiLCBcXFwiMFxcXCIpID09IFxcXCIwXFxcIiA/IFxcXCIxXFxcIiA6IFxcXCIwXFxcIilcXG4gICAgICAgICAgICByZWZyZXNoUGFnZSgpXFxuICAgICAgICAgICAgcmV0dXJuIFxcXCJoaWtlcjovL2VtcHR5XFxcIlxcbiAgICAgICAgfSwgcGF0aClcXG4gICAgfSwge1xcbiAgICAgICAgdGl0bGU6IFxcXCIuLlxcXCIsXFxuICAgICAgICB1cmw6ICQoKS5sYXp5UnVsZSgocGF0aHMpID0+IHtcXG4gICAgICAgICAgICBwYXRocy5wb3AoKVxcbiAgICAgICAgICAgIHB1dE15VmFyKFxcXCJwYXRoXFxcIiwgZ2V0SXRlbShcXFwiZGF2XFxcIikgKyBwYXRocy5qb2luKFxcXCIvXFxcIikpXFxuICAgICAgICAgICAgcmVmcmVzaFBhZ2UoKVxcbiAgICAgICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCJcXG4gICAgICAgIH0sIHBhdGhzKSxcXG4gICAgICAgIGNvbF90eXBlOiBcXFwic2Nyb2xsX2J1dHRvblxcXCJcXG4gICAgfSwge1xcbiAgICAgICAgdGl0bGU6IFxcXCLwn4+gXFxcIixcXG4gICAgICAgIHVybDogJCgpLmxhenlSdWxlKCgpID0+IHtcXG4gICAgICAgICAgICBwdXRNeVZhcihcXFwicGF0aFxcXCIsIGdldEl0ZW0oXFxcImRhdlxcXCIpKVxcbiAgICAgICAgICAgIHJlZnJlc2hQYWdlKClcXG4gICAgICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vZW1wdHlcXFwiXFxuICAgICAgICB9KSxcXG4gICAgICAgIGNvbF90eXBlOiBcXFwic2Nyb2xsX2J1dHRvblxcXCJcXG4gICAgfSlcXG4gICAgcGF0aHMuZm9yRWFjaChpdGVtID0+IHtcXG4gICAgICAgIGlmIChpdGVtICE9IFxcXCJcXFwiKSB7XFxuICAgICAgICAgICAgdGVtcCArPSBcXFwiL1xcXCIgKyBpdGVtXFxuICAgICAgICAgICAgZC5wdXNoKHtcXG4gICAgICAgICAgICAgICAgdGl0bGU6IGRlY29kZVVSSUNvbXBvbmVudChpdGVtKSxcXG4gICAgICAgICAgICAgICAgdXJsOiAkKCkubGF6eVJ1bGUoKHRlbXApID0+IHtcXG4gICAgICAgICAgICAgICAgICAgIHB1dE15VmFyKFxcXCJwYXRoXFxcIiwgZ2V0SXRlbShcXFwiZGF2XFxcIikgKyB0ZW1wKVxcbiAgICAgICAgICAgICAgICAgICAgcmVmcmVzaFBhZ2UoKVxcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFxcXCJoaWtlcjovL2VtcHR5XFxcIlxcbiAgICAgICAgICAgICAgICB9LCB0ZW1wKSxcXG4gICAgICAgICAgICAgICAgY29sX3R5cGU6IFxcXCJzY3JvbGxfYnV0dG9uXFxcIlxcbiAgICAgICAgICAgIH0pXFxuICAgICAgICB9XFxuICAgIH0pO1xcbiAgICBpZiAoZ2V0TXlWYXIoXFxcIm1vcmVcXFwiLCBcXFwiMFxcXCIpID09IFxcXCIxXFxcIikge1xcbiAgICAgICAgbGV0IHNvcnIgPSBbXFxcIum7mOiupFxcXCIsIFxcXCLlkI3np7BcXFwiLCBcXFwi5pe26Ze0XFxcIl1cXG4gICAgICAgIGQucHVzaCh7XFxuICAgICAgICAgICAgdGl0bGU6IFxcXCLorr7nva5cXFwiLFxcbiAgICAgICAgICAgIHVybDogXFxcImhpa2VyOi8vcGFnZS9zZXR0aW5nc1xcXCIsXFxuICAgICAgICAgICAgaW1nOiBcXFwiaGlrZXI6Ly9pbWFnZXMv6K6+572uXFxcIixcXG4gICAgICAgICAgICBjb2xfdHlwZTogXFxcImljb25fc21hbGxfNFxcXCIsXFxuICAgICAgICAgICAgZXh0cmE6IHtcXG4gICAgICAgICAgICAgICAgdmVyc2lvbjogTVlfUlVMRS52ZXJzaW9uXFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfSwge1xcbiAgICAgICAgICAgIHRpdGxlOiBcXFwi5LiK5Lyg5paH5Lu2XFxcIixcXG4gICAgICAgICAgICB1cmw6IFxcXCJmaWxlU2VsZWN0Oi8vXFxcIiArICQudG9TdHJpbmcoKHBhdGgpID0+IHtcXG4gICAgICAgICAgICAgICAgbGV0IHdlYmRhdiA9IGJ1aWxkV2ViRGF2KHBhdGgsIGdldEl0ZW0oXFxcInVzZXJcXFwiKSwgZ2V0SXRlbShcXFwicGFzc3dkXFxcIikpXFxuICAgICAgICAgICAgICAgIGxldCBzID0gaW5wdXQuc3BsaXQoXFxcIi9cXFwiKVxcbiAgICAgICAgICAgICAgICBsb2cod2ViZGF2LnVwbG9hZChzW3MubGVuZ3RoIC0gMV0ucmVwbGFjZShcXFwiX2ZpbGVTZWxlY3RfXFxcIiwgXFxcIlxcXCIpLCBpbnB1dCkpO1xcbiAgICAgICAgICAgICAgICByZWZyZXNoUGFnZSgpO1xcbiAgICAgICAgICAgIH0sIHBhdGgpLFxcbiAgICAgICAgICAgIGltZzogXFxcImhpa2VyOi8vaW1hZ2VzL2hvbWVfaWNvbl9ib29rbWFya1xcXCIsXFxuICAgICAgICAgICAgY29sX3R5cGU6IFxcXCJpY29uX3NtYWxsXzRcXFwiLFxcbiAgICAgICAgfSwge1xcbiAgICAgICAgICAgIHRpdGxlOiBcXFwi5paw5paH5Lu25aS5XFxcIixcXG4gICAgICAgICAgICB1cmw6ICQoXFxcIlxcXCIsIFxcXCLovpPlhaXmlofku7blpLnlkI3np7BcXFwiKS5pbnB1dCgocGF0aCkgPT4ge1xcbiAgICAgICAgICAgICAgICBsZXQgd2ViZGF2ID0gYnVpbGRXZWJEYXYocGF0aCwgZ2V0SXRlbShcXFwidXNlclxcXCIpLCBnZXRJdGVtKFxcXCJwYXNzd2RcXFwiKSlcXG4gICAgICAgICAgICAgICAgd2ViZGF2Lm1ha2VEaXIoaW5wdXQpXFxuICAgICAgICAgICAgICAgIHJlZnJlc2hQYWdlKClcXG4gICAgICAgICAgICAgICAgcmV0dXJuIFxcXCJoaWtlcjovL2VtcHR5XFxcIlxcbiAgICAgICAgICAgIH0sIHBhdGgpLFxcbiAgICAgICAgICAgIGltZzogXFxcImhpa2VyOi8vaW1hZ2VzL2hvbWVfaWNvbl9mb2xkXFxcIixcXG4gICAgICAgICAgICBjb2xfdHlwZTogXFxcImljb25fc21hbGxfNFxcXCJcXG4gICAgICAgIH0sIHtcXG4gICAgICAgICAgICB0aXRsZTogZ2V0TXlWYXIoXFxcImRlbGV0ZVxcXCIsIFxcXCIwXFxcIikgPT0gXFxcIjBcXFwiID8gXFxcIuWIoOmZpOaWh+S7tlxcXCIgOiBcXFwi57uT5p2f5Yig6ZmkXFxcIixcXG4gICAgICAgICAgICBpbWc6IFxcXCJoaWtlcjovL2ltYWdlcy9ob21lX2ljb25faXRlbVxcXCIsXFxuICAgICAgICAgICAgdXJsOiAkKCkubGF6eVJ1bGUoKCkgPT4ge1xcbiAgICAgICAgICAgICAgICBwdXRNeVZhcihcXFwiZGVsZXRlXFxcIiwgZ2V0TXlWYXIoXFxcImRlbGV0ZVxcXCIsIFxcXCIwXFxcIikgPT0gXFxcIjBcXFwiID8gXFxcIjFcXFwiIDogXFxcIjBcXFwiKVxcbiAgICAgICAgICAgICAgICByZWZyZXNoUGFnZSgpXFxuICAgICAgICAgICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCJcXG4gICAgICAgICAgICB9KSxcXG4gICAgICAgICAgICBjb2xfdHlwZTogXFxcImljb25fc21hbGxfNFxcXCJcXG4gICAgICAgIH0pXFxuICAgICAgICBzb3JyLmZvckVhY2goaXRlbSA9PiB7XFxuICAgICAgICAgICAgdmFyIG4gPSBnZXRNeVZhcihcXFwic29ydFxcXCIsIFxcXCLpu5jorqRcXFwiKVxcbiAgICAgICAgICAgIGlmIChuID09IGl0ZW0pIHtcXG4gICAgICAgICAgICAgICAgdmFyIHRpdGxlID0gaXRlbSArIFxcXCLihpNcXFwiXFxuICAgICAgICAgICAgfSBlbHNlIGlmIChuLmluY2x1ZGVzKFxcXCLlj41cXFwiKSAmJiBuLmluY2x1ZGVzKGl0ZW0pKSB7XFxuICAgICAgICAgICAgICAgIHZhciB0aXRsZSA9IGl0ZW0gKyBcXFwi4oaRXFxcIlxcbiAgICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgICAgIHZhciB0aXRsZSA9IGl0ZW0gKyBcXFwi4oaVXFxcIlxcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgICBkLnB1c2goe1xcbiAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGUsXFxuICAgICAgICAgICAgICAgIGNvbF90eXBlOiBcXFwiZmxleF9idXR0b25cXFwiLFxcbiAgICAgICAgICAgICAgICB1cmw6ICQoKS5sYXp5UnVsZSgoaXRlbSkgPT4ge1xcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdldE15VmFyKFxcXCJzb3J0XFxcIiwgXFxcIum7mOiupFxcXCIpID09IGl0ZW0pIHtcXG4gICAgICAgICAgICAgICAgICAgICAgICBwdXRNeVZhcihcXFwic29ydFxcXCIsIGl0ZW0gKyBcXFwi5Y+NXFxcIilcXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgcHV0TXlWYXIoXFxcInNvcnRcXFwiLCBpdGVtKVxcbiAgICAgICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICAgICAgcmVmcmVzaFBhZ2UoKVxcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFxcXCJoaWtlcjovL2VtcHR5XFxcIlxcbiAgICAgICAgICAgICAgICB9LCBpdGVtKVxcbiAgICAgICAgICAgIH0pXFxuICAgICAgICB9KVxcbiAgICB9XFxuICAgIGZpbGVzLmZvckVhY2goaXRlbSA9PiB7XFxuICAgICAgICBsZXQgZmlsZU5hbWUgPSBkZWNvZGVVUklDb21wb25lbnQoaXRlbS5uYW1lKVxcbiAgICAgICAgbGV0IGxlbiA9IDMwO1xcbiAgICAgICAgbGV0IGxlbjIgPSBsZW4gLyAyO1xcbiAgICAgICAgaWYgKGZpbGVOYW1lLmxlbmd0aCA+PSBsZW4pIHtcXG4gICAgICAgICAgICBmaWxlTmFtZSA9IGZpbGVOYW1lLnN1YnN0cigwLCBsZW4yKSArICcuLi4nICsgZmlsZU5hbWUuc3Vic3RyKGZpbGVOYW1lLmxlbmd0aCAtIGxlbjIpO1xcbiAgICAgICAgfVxcbiAgICAgICAgbGV0IGljb24gPSBnZXRJY29uKGl0ZW0pXFxuICAgICAgICBpZiAoZ2V0TXlWYXIoXFxcImRlbGV0ZVxcXCIsIFxcXCIwXFxcIikgPT0gXFxcIjBcXFwiKSB7XFxuICAgICAgICAgICAgdmFyIHVybCA9ICQoKS5sYXp5UnVsZSgoaXRlbSwgZmlsZXMpID0+IHtcXG4gICAgICAgICAgICAgICAgY29uc3Qge1xcbiAgICAgICAgICAgICAgICAgICAgZmV0Y2hGaWxlLFxcbiAgICAgICAgICAgICAgICAgICAgZ2V0SHptLFxcbiAgICAgICAgICAgICAgICAgICAgZ2V0U3ViLFxcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlRXh0LFxcbiAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRcXG4gICAgICAgICAgICAgICAgfSA9ICQucmVxdWlyZShcXFwiaGlrZXI6Ly9wYWdlL2NvZGVcXFwiKVxcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5kaXIpIHtcXG4gICAgICAgICAgICAgICAgICAgIHB1dE15VmFyKFxcXCJwYXRoXFxcIiwgaXRlbS51cmwpXFxuICAgICAgICAgICAgICAgICAgICByZWZyZXNoUGFnZSgpXFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vZW1wdHlcXFwiXFxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJC5tb3ZpZS5pbmNsdWRlcyhnZXRIem0oaXRlbS5uYW1lKSkpIHtcXG4gICAgICAgICAgICAgICAgICAgIGlmIChnZXRJdGVtKFxcXCJzdWJ0aXRsZVxcXCIsIFxcXCLlvIBcXFwiKSA9PSBcXFwi5byAXFxcIikge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzdWJ0aXRsZXMgPSBnZXRTdWIoZmlsZXMpXFxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5hbWVzID0gW1xcXCLkuI3pnIDopoHlrZfluZVcXFwiXVxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRpdGxlcy5mb3JFYWNoKGRzID0+IHtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZXMucHVzaChkcy50aXRsZSlcXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdWJ0aXRsZXMubGVuZ3RoICE9IDApIHtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICQobmFtZXMsIDEsIFxcXCLor7fpgInmi6nlrZfluZVcXFwiKS5zZWxlY3QoKG5hbWVzLCBzdWJ0aXRsZXMsIHVybCkgPT4ge1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0ID09IFxcXCLkuI3pnIDopoHlrZfluZVcXFwiKSB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsczogW3VybF0sXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJBdXRob3JpemF0aW9uXFxcIjogXFxcIkJhc2ljIFxcXCIgKyBiYXNlNjRFbmNvZGUoZ2V0SXRlbShcXFwidXNlcm5hbWVcXFwiKSArIFxcXCI6XFxcIiArIGdldEl0ZW0oXFxcInBhc3N3ZFxcXCIpKVxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsczogW3VybF0sXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRpdGxlOiBzdWJ0aXRsZXNbbmFtZXMuaW5kZXhPZihpbnB1dCkgLSAxXS51cmwsXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJBdXRob3JpemF0aW9uXFxcIjogXFxcIkJhc2ljIFxcXCIgKyBiYXNlNjRFbmNvZGUoZ2V0SXRlbShcXFwidXNlcm5hbWVcXFwiKSArIFxcXCI6XFxcIiArIGdldEl0ZW0oXFxcInBhc3N3ZFxcXCIpKVxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgbmFtZXMsIHN1YnRpdGxlcywgaXRlbS51cmwpXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0ucGxheVVybCArIFxcXCIjaXNWaWRlbz10cnVlI1xcXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLnBsYXlVcmwgKyBcXFwiI2lzVmlkZW89dHJ1ZSNcXFwiXFxuICAgICAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZ2V0SHptKGl0ZW0ubmFtZSkgPT0gXFxcIm1kXFxcIikge1xcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZShcXFwiaHR0cHM6Ly9naXRsYWIuY29tL2hqZGhueC9oaWtlci8tL3Jhdy9tYWluL2pzL21hcmtlZC5taW4uanNcXFwiKVxcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFxcXCJoaWtlcjovL3BhZ2UvcHJldmlldz9jb250ZW50PVxcXCIgKyBiYXNlNjRFbmNvZGUobWFya2VkLnBhcnNlKGZldGNoRmlsZShpdGVtLnVybCkpKVxcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCQudGV4dC5pbmNsdWRlcyhnZXRIem0oaXRlbS5uYW1lKSkpIHtcXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9wYWdlL3ByZXZpZXc/Y29udGVudD1cXFwiICsgYmFzZTY0RW5jb2RlKGZldGNoRmlsZShpdGVtLnVybCkpXFxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJC5hdWRpby5pbmNsdWRlcyhnZXRIem0oaXRlbS5uYW1lKSkpIHtcXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLnBsYXlVcmwgKyBcXFwiI2lzTXVzaWM9dHJ1ZSNcXFwiXFxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJC5pbWcuaW5jbHVkZXMoZ2V0SHptKGl0ZW0ubmFtZSkpKSB7XFxuICAgICAgICAgICAgICAgICAgICBsZXQgcCA9IGRvd25sb2FkKGdldE15VmFyKFxcXCJwYXRoXFxcIiwgZ2V0SXRlbShcXFwiZGF2XFxcIikpLCBpdGVtLm5hbWUpXFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcFxcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFxcXCJkb3dubG9hZDovL1xcXCIgKyBpdGVtLnBsYXlVcmxcXG4gICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIH0sIGl0ZW0sIGZpbGVzKVxcbiAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICB2YXIgdXJsID0gJChcXFwi56Gu6K6k5Yig6Zmk77yfXFxcIikuY29uZmlybSgodXJsLCBkZWxldGVGaWxlLCBwYXRoKSA9PiB7XFxuICAgICAgICAgICAgICAgIGRlbGV0ZUZpbGUoZ2V0TXlWYXIoXFxcInBhdGhcXFwiLCBnZXRJdGVtKFxcXCJkYXZcXFwiKSksIHBhdGgpXFxuICAgICAgICAgICAgICAgIHJlZnJlc2hQYWdlKClcXG4gICAgICAgICAgICAgICAgcmV0dXJuIFxcXCJ0b2FzdDovL+WIoOmZpOaIkOWKn1xcXCJcXG4gICAgICAgICAgICB9LCBpdGVtLnVybCwgZGVsZXRlRmlsZSwgaXRlbS5uYW1lKVxcbiAgICAgICAgfVxcbiAgICAgICAgZC5wdXNoKHtcXG4gICAgICAgICAgICB0aXRsZTogZmlsZU5hbWUsXFxuICAgICAgICAgICAgaW1nOiBpY29uLFxcbiAgICAgICAgICAgIHVybDogdXJsLFxcbiAgICAgICAgICAgIGNvbF90eXBlOiBcXFwiYXZhdGFyXFxcIlxcbiAgICAgICAgfSlcXG4gICAgICAgIGlmIChnZXRJdGVtKFxcXCJkZXRhaWxcXFwiLCBcXFwi5byAXFxcIikgPT0gXFxcIuW8gFxcXCIpIHtcXG4gICAgICAgICAgICBkLnB1c2goe1xcbiAgICAgICAgICAgICAgICB0aXRsZTogXFxcIuKAnOKAnOKAneKAnTxzbWFsbD7igJzigJzigJ3igJ08Zm9udCBjb2xvcj0nI2FhYWFhYSc+XFxcIiArIChnZXRJdGVtKFxcXCJ0aW1lXFxcIiwgXFxcIjBcXFwiKSA9PSBcXFwiMFxcXCIgPyBpdGVtLm1vZGlmeVRpbWVTdHIgOiBpdGVtLm1vZGlmeVRpbWUpICsgXFxcIjwvZm9udD48L3NtYWxsPlxcXCIsXFxuICAgICAgICAgICAgICAgIHVybDogdXJsLFxcbiAgICAgICAgICAgICAgICBjb2xfdHlwZTogXFxcInRleHRfMVxcXCJcXG4gICAgICAgICAgICB9KVxcbiAgICAgICAgfVxcbiAgICB9KVxcbn0gZWxzZSBpZiAoZ2V0SXRlbShcXFwiZGF2XFxcIiwgXFxcIlxcXCIpID09IFxcXCJcXFwiIHx8IGdldEl0ZW0oXFxcInVzZXJuYW1lXFxcIiwgXFxcIlxcXCIpID09IFxcXCJcXFwiIHx8IGdldEl0ZW0oXFxcInBhc3N3ZFxcXCIsIFxcXCJcXFwiKSA9PSBcXFwiXFxcIikge1xcbiAgICBkLnB1c2goe1xcbiAgICAgICAgdGl0bGU6IFxcXCLlvZPliY3mnKrorr7nva7otKblj7fvvIzngrnmiJHorr7nva5cXFwiLFxcbiAgICAgICAgdXJsOiBcXFwiaGlrZXI6Ly9wYWdlL3NldHRpbmdzXFxcIixcXG4gICAgICAgIGNvbF90eXBlOiBcXFwidGV4dF9jZW50ZXJfMVxcXCJcXG4gICAgfSlcXG59IGVsc2Uge1xcbiAgICBsZXQgcGF0aHMgPSBnZXRNeVZhcihcXFwicGF0aFxcXCIpLnJlcGxhY2UoZ2V0SXRlbShcXFwiZGF2XFxcIiksIFxcXCJcXFwiKVxcbiAgICBwYXRocyA9IHBhdGhzLnNwbGl0KFxcXCIvXFxcIilcXG4gICAgZC5wdXNoKHtcXG4gICAgICAgIHRpdGxlOiBcXFwi6K6+572uXFxcIixcXG4gICAgICAgIGNvbF90eXBlOiBcXFwidGV4dF8xXFxcIixcXG4gICAgICAgIHVybDogXFxcImhpa2VyOi8vcGFnZS9zZXR0aW5nc1xcXCJcXG4gICAgfSwge1xcbiAgICAgICAgdGl0bGU6IFxcXCLlh7rplJnkuobvvIzngrnlh7vliLfmlrBcXFwiLFxcbiAgICAgICAgdXJsOiAkKCkubGF6eVJ1bGUoKHBhdGhzKSA9PiB7XFxuICAgICAgICAgICAgcmVmcmVzaFBhZ2UoKVxcbiAgICAgICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCJcXG4gICAgICAgIH0sIHBhdGhzKSxcXG4gICAgICAgIGNvbF90eXBlOiBcXFwidGV4dF9jZW50ZXJfMVxcXCJcXG4gICAgfSlcXG59XFxuc2V0UmVzdWx0KGQpO1wifSx7XCJjb2xfdHlwZVwiOlwibW92aWVfM1wiLFwibmFtZVwiOlwi6aKE6KeIXCIsXCJwYXRoXCI6XCJwcmV2aWV3XCIsXCJydWxlXCI6XCJqczpcXG5sZXQgY29udGVudCA9IGJhc2U2NERlY29kZShnZXRQYXJhbShcXFwiY29udGVudFxcXCIpKVxcbnNldFJlc3VsdChbe1xcbiAgICB0aXRsZTogY29udGVudCxcXG4gICAgY29sX3R5cGU6IFxcXCJsb25nX3RleHRcXFwiXFxufV0pXCJ9XSxcInNhdmVkXCI6ZmFsc2UsXCJ0aXRsZVwiOlwiV2ViZGF2XCIsXCJ2ZXJzaW9uXCI6MCxcInVybFwiOlwiaGlrZXI6Ly9wYWdlL3NldHRpbmdzXCIsXCJjb2xfdHlwZVwiOlwidGV4dF8xXCIsXCJmaW5kX3J1bGVcIjpcImpzOlxcbi8qYWRkTGlzdGVuZXIoJ29uQ2xvc2UnLCAkLnRvU3RyaW5nKCgpID0+IHtcXG4gICAgLy9zYXZlRmlsZShcXFwiaGlrZXI6Ly9maWxlcy9ydWxlcy93ZWJkYXYvaW5mby5qc29uXFxcIiwgSlNPTi5zdHJpbmdpZnkoW2dldEl0ZW0oXFxcImRhdlxcXCIpLCBnZXRJdGVtKFxcXCJ1c2VybmFtZVxcXCIpLCBnZXRJdGVtKFxcXCJwYXNzd2RcXFwiKV0pKVxcbiAgICAvL2NsZWFyTXlWYXIoXFxcInBhdGhcXFwiKVxcbiAgICAvL3JlZnJlc2hQYWdlKClcXG59KSkqL1xcbnZhciBkID0gW107XFxuZC5wdXNoKHtcXG4gICAgdGl0bGU6IFxcXCJ3ZWJkYXblnLDlnYDvvJpcXFwiICsgZ2V0SXRlbShcXFwiZGF2XFxcIiwgXFxcIuivt+i+k+WFpVdlYkRhduWcsOWdgFxcXCIpLFxcbiAgICB1cmw6ICQoZ2V0SXRlbShcXFwiZGF2XFxcIiwgXFxcIlxcXCIpLCBcXFwi6K+36L6T5YWl5q2j56Gu5qC85byP55qEd2ViZGF26ZO+5o6l77yB77yB77yBXFxcIikuaW5wdXQoKCkgPT4ge1xcbiAgICAgICAgaWYgKCFpbnB1dC5zdGFydHNXaXRoKFxcXCJodHRwXFxcIikpIHtcXG4gICAgICAgICAgICByZXR1cm4gXFxcInRvYXN0Oi8v6K+36L6T5YWl5q2j56Gu55qEd2ViZGF26ZO+5o6l77yB77yB77yBXFxcIlxcbiAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICBpZiAoaW5wdXRbaW5wdXQubGVuZ3RoIC0gMV0gPT0gXFxcIi9cXFwiKSB7XFxuICAgICAgICAgICAgICAgIHVybCA9IGlucHV0LnN1YnN0cmluZygwLCBpbnB1dC5sZW5ndGggLSAxKVxcbiAgICAgICAgICAgICAgICBzZXRJdGVtKFxcXCJkYXZcXFwiLCB1cmwpXFxuICAgICAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICAgICAgc2V0SXRlbShcXFwiZGF2XFxcIiwgaW5wdXQpXFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfVxcbiAgICAgICAgcmVmcmVzaFBhZ2UoKVxcbiAgICAgICAgcmV0dXJuIFxcXCJoaWtlcjovL2VtcHR5XFxcIlxcbiAgICB9KSxcXG4gICAgY29sX3R5cGU6IFxcXCJ0ZXh0XzFcXFwiXFxufSlcXG5kLnB1c2goe1xcbiAgICB0aXRsZTogXFxcIui0puaIt1xcXCIsXFxuICAgIHVybDogJChnZXRJdGVtKFxcXCJ1c2VyXFxcIiwgXFxcIlxcXCIpKS5pbnB1dCgoKSA9PiB7XFxuICAgICAgICBzZXRJdGVtKFxcXCJ1c2VyXFxcIiwgaW5wdXQpXFxuICAgICAgICByZWZyZXNoUGFnZSgpXFxuICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vZW1wdHlcXFwiXFxuICAgIH0pLFxcbiAgICBjb2xfdHlwZTogXFxcInRleHRfMlxcXCJcXG59KVxcbmQucHVzaCh7XFxuICAgIHRpdGxlOiBcXFwi5a+G56CBXFxcIixcXG4gICAgdXJsOiAkKGdldEl0ZW0oXFxcInBhc3N3ZFxcXCIsIFxcXCJcXFwiKSkuaW5wdXQoKCkgPT4ge1xcbiAgICAgICAgc2V0SXRlbShcXFwicGFzc3dkXFxcIiwgaW5wdXQpXFxuICAgICAgICByZWZyZXNoUGFnZSgpXFxuICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vZW1wdHlcXFwiXFxuICAgIH0pLFxcbiAgICBjb2xfdHlwZTogXFxcInRleHRfMlxcXCJcXG59KVxcbmQucHVzaCh7XFxuICAgIHRpdGxlOiBcXFwi5rWL6K+V6L+e5o6lXFxcIixcXG4gICAgdXJsOiAkKCkubGF6eVJ1bGUoKCkgPT4ge1xcbiAgICAgICAgY29uc3Qge1xcbiAgICAgICAgICAgIGdldEZpbGVzXFxuICAgICAgICB9ID0gJC5yZXF1aXJlKFxcXCJoaWtlcjovL3BhZ2UvY29kZVxcXCIpXFxuICAgICAgICBpZiAoZ2V0RmlsZXMoZ2V0SXRlbShcXFwiZGF2XFxcIikgKyBcXFwiL1xcXCIpKSB7XFxuICAgICAgICAgICAgcmV0dXJuIFxcXCJ0b2FzdDovL+i/nuaOpeaIkOWKn1xcXCJcXG4gICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgcmV0dXJuIFxcXCJ0b2FzdDovL+i/nuaOpeWksei0pe+8jOivt+ajgOafpei0puaIt+WvhueggVxcXCJcXG4gICAgICAgIH1cXG4gICAgfSksXFxuICAgIGNvbF90eXBlOiBcXFwidGV4dF9jZW50ZXJfMVxcXCJcXG59KVxcbmxldCBpY29uID0gZ2V0SXRlbShcXFwiaWNvblN0eWxlXFxcIiwgXFxcIum7mOiupFxcXCIpXFxubGV0IGRldGFpbCA9IGdldEl0ZW0oXFxcImRldGFpbFxcXCIsIFxcXCLlvIBcXFwiKVxcbmxldCBzdWJ0aXRsZSA9IGdldEl0ZW0oXFxcInN1YnRpdGxlXFxcIiwgXFxcIuW8gFxcXCIpXFxubGV0IHRpbWVzdGFtcCA9IGdldEl0ZW0oXFxcInRpbWVcXFwiLCBcXFwiMFxcXCIpXFxubGV0IG5ld1ZlcnNpb247XFxubGV0IG15VmVyc2lvbiA9IE1ZX1BBUkFNUy52ZXJzaW9uIHx8IDk5OTtcXG50cnkge1xcbiAgICByZXMgPSBKU09OLnBhcnNlKGZldGNoKFxcXCJodHRwOi8vaGlrZXIubm9raWEucHJlc3MvaGlrZXJ1bGUvZGV2L2dldGJ5aWQ/aWQ9NTIxMFxcXCIpKVxcbiAgICBuZXdWZXJzaW9uID0gcmVzLnJlc3VsdC52ZXJcXG59IGNhdGNoIChlKSB7XFxuICAgIHRvYXN0KFxcXCLpgZPplb/ku5PlupPmir3po47kuobvvIzmnKzmrKHmnKrmo4DmtYvliLDmlrDniYjkv6Hmga9cXFwiKTtcXG4gICAgbmV3VmVyc2lvbiA9IG15VmVyc2lvbjtcXG59XFxubGV0IGlzVXBkYXRlID0gTnVtYmVyKG5ld1ZlcnNpb24pIDw9IE51bWJlcihteVZlcnNpb24pO1xcbmxldCBpc1ZlciA9IE51bWJlcihuZXdWZXJzaW9uKSA9PT0gTnVtYmVyKG15VmVyc2lvbik7XFxuZC5wdXNoKHtcXG4gICAgY29sX3R5cGU6IFxcXCJsaW5lX2JsYW5rXFxcIlxcbn0sIHtcXG4gICAgdGl0bGU6IGlzVXBkYXRlID8gXFxcIuW3suaYr+acgOaWsOeJiFxcXCIgOiBcXFwi8J+GmeaWsOeJiOacrFxcXCIsXFxuICAgIHVybDogXFxcInJ1bGU6Ly81clczNlppVTZLZUc1NVdNNmFhVzZhRzE2YUtSNllHVDZLZUU1WWlaNDRDUVYyVmlaR0YyNDRDUjc3K2xhRzl0WlY5eWRXeGxYM1Z5Yk8rL3BXaDBkSEE2THk5b2FXdGxjaTV1YjJ0cFlTNXdjbVZ6Y3k5b2FXdGxjblZzWlM5eWRXeGxiR2x6ZEM1cWMyOXVQMmxrUFRVeU1UQW1ZWFYwYUQxaFlqSXpNRFV5WWkxak1HUTJMVFU0Wm1NdE9UVTFOUzFoTWpVd01tRXdNR0V6T0RjPVxcXCIsXFxuICAgIGNvbF90eXBlOiBcXFwidGV4dF8yXFxcIlxcbn0sIHtcXG4gICAgdGl0bGU6IFxcXCLorr7nva7lm77moIfvvJpcXFwiICsgaWNvbixcXG4gICAgdXJsOiAkKCkubGF6eVJ1bGUoKGljb24pID0+IHtcXG4gICAgICAgIHNldEl0ZW0oXFxcImljb25TdHlsZVxcXCIsIGljb24gPT0gXFxcIum7mOiupFxcXCIgPyBcXFwi6JOd6I6TXFxcIiA6IFxcXCLpu5jorqRcXFwiKVxcbiAgICAgICAgcmVmcmVzaFBhZ2UoKVxcbiAgICAgICAgcmV0dXJuIFxcXCJoaWtlcjovL2VtcHR5XFxcIlxcbiAgICB9LCBpY29uKSxcXG4gICAgY29sX3R5cGU6IFxcXCJ0ZXh0XzJcXFwiXFxufSwge1xcbiAgICB0aXRsZTogXFxcIuaYvuekuuivpue7hu+8mlxcXCIgKyBkZXRhaWwsXFxuICAgIHVybDogJCgpLmxhenlSdWxlKChkZXRhaWwpID0+IHtcXG4gICAgICAgIHNldEl0ZW0oXFxcImRldGFpbFxcXCIsIGRldGFpbCA9PSBcXFwi5byAXFxcIiA/IFxcXCLlhbNcXFwiIDogXFxcIuW8gFxcXCIpXFxuICAgICAgICByZWZyZXNoUGFnZSgpXFxuICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vZW1wdHlcXFwiXFxuICAgIH0sIGRldGFpbCksXFxuICAgIGNvbF90eXBlOiBcXFwidGV4dF8yXFxcIlxcbn0sIHtcXG4gICAgdGl0bGU6IFxcXCLlrZfluZXlip/og73vvJpcXFwiICsgc3VidGl0bGUsXFxuICAgIHVybDogJCgpLmxhenlSdWxlKChzdWJ0aXRsZSkgPT4ge1xcbiAgICAgICAgc2V0SXRlbShcXFwic3VidGl0bGVcXFwiLCBzdWJ0aXRsZSA9PSBcXFwi5byAXFxcIiA/IFxcXCLlhbNcXFwiIDogXFxcIuW8gFxcXCIpXFxuICAgICAgICByZWZyZXNoUGFnZSgpXFxuICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vZW1wdHlcXFwiXFxuICAgIH0sIHN1YnRpdGxlKSxcXG4gICAgY29sX3R5cGU6IFxcXCJ0ZXh0XzJcXFwiXFxufSwge1xcbiAgICB0aXRsZTogXFxcIuaXtumXtOagvOW8j++8mlxcXCIgKyAodGltZXN0YW1wID09IFxcXCIwXFxcIiA/IFxcXCIyMDIyLzA4LzIwIDE3OjE0OjMxXFxcIiA6IFxcXCJTYXQsIDIwIEF1ZyAyMDIyIDA5OjE0OjMxIEdNVFxcXCIpLFxcbiAgICB1cmw6ICQoKS5sYXp5UnVsZSgodGltZXN0YW1wKSA9PiB7XFxuICAgICAgICBzZXRJdGVtKFxcXCJ0aW1lXFxcIiwgdGltZXN0YW1wID09IFxcXCIwXFxcIiA/IFxcXCIxXFxcIiA6IFxcXCIwXFxcIilcXG4gICAgICAgIHJlZnJlc2hQYWdlKClcXG4gICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCJcXG4gICAgfSwgdGltZXN0YW1wKSxcXG4gICAgY29sX3R5cGU6IFxcXCJ0ZXh0XzFcXFwiXFxufSwge1xcbiAgICB1cmw6ICQoKS5ydWxlKCgpID0+IHtcXG4gICAgICAgIHNldFJlc3VsdChbe1xcbiAgICAgICAgICAgIHRpdGxlOiBgXFxuICAgICAgICAgICAgPHA+5pys56+H5paH56ug5Y+q6ZKI5a+56K6+572u77yM5YW25LuW55qE5L2/55So5pa55rOV5bey57uP5Zyo6KeE5YiZ5Lit6K+05piO5riF6Zmk5LqGPC9wPiA8cD48aW5zPjxpbnM+5YmN5o+Q5p2h5Lu277ya5bey57uP5pu05pawNy4554mI5pysPC9pbnM+PC9pbnM+PC9wPiA8cD7mtbfpmJTop4bnlYzpppbpobXpopHpgZPop4TliJnjgJBXZWJkYXbjgJHvv6Vob21lX3J1bGVfdXJs77+laHR0cDovL2hpa2VyLm5va2lhLnByZXNzL2hpa2VydWxlL3J1bGVsaXN0Lmpzb24/aWQ9NTIxMCZhbXA7YXV0aD1hYjIzMDUyYi1jMGQ2LTU4ZmMtOTU1NS1hMjUwMmEwMGEzODc8L3A+IDxoMSBpZD1cXFwid2ViZGF2JUU2JTk4JUFGJUU0JUJCJTgwJUU0JUI5JTg4XFxcIiB0YWJpbmRleD1cXFwiLTFcXFwiPldlYmRhduaYr+S7gOS5iDwvaDE+IDxwPndlYmRhduWwseaYr+S4gOenjee9keebmOaWh+S7tuS8oOi+k+WNj+iuru+8jOW4uOeUqOS6juWwj+S8l+i9r+S7tueahOaVsOaNruWkh+S7veOAguacrOinhOWImeWPr+S7peeuoeeQhndlYmRhdueahOaWh+S7tu+8jOaUr+aMgea1j+iniOOAgeaSreaUvuOAgeS4i+i9veOAgeS4iuS8oOOAgeWIoOmZpOetieaTjeS9nDwvcD4gPGgxIGlkPVxcXCIlRTYlODklOTMlRTUlQkMlODAlRTglQUUlQkUlRTclQkQlQUVcXFwiIHRhYmluZGV4PVxcXCItMVxcXCI+5omT5byA6K6+572uPC9oMT4gPHA+PGltZyBzcmM9XFxcImh0dHA6Ly9hbGlzdC5qb2VndS50ay9kL2hpa2VyL1NjcmVlbnNob3RfMjAyMjA4MjFfMDgyNTUwX2NvbS5leGFtcGxlLmhpa2Vydmlldy5qcGdcXFwiIGFsdD1cXFwiU2NyZWVuc2hvdF8yMDIyMDgyMV8wODI1NTBfY29tLmV4YW1wbGUuaGlrZXJ2aWV3XFxcIiAvPjwvcD4gPHA+5bCG5L2g55qEd2ViZGF26ZO+5o6l5ZKM6LSm5oi35a+G56CB5aGr6L+b5Y6777yI6L+Z6YeM5o6o6I2Q5L2/55So5Z2a5p6c5LqR77yM5LyY54K5Oueos+WumjvnvLrngrk65a656YeP5bCR77yM5Lu35qC86LS144CC5Lmf5Y+v5Lul6Ieq5bex5pCt5bu6d2ViZGF257O757uf77yM5L6L5aaCYWxpc3TlkoxjbG91ZHJldmXvvIzpnIDopoHkuIDlrprnmoTliqjmiYvog73lipvvvIk8L3A+IDxoMiBpZD1cXFwiJUU4JUFFJUJFJUU3JUJEJUFFJUU1JTlCJUJFJUU2JUEwJTg3XFxcIiB0YWJpbmRleD1cXFwiLTFcXFwiPuiuvue9ruWbvuaghzwvaDI+IDxwPuacrOinhOWImeWGhee9ruS4pOenjemjjuagvOeahOWbvuagh++8jOWIhuWIq+S4uumBk+mVv+eahOWSjOiTneiOk+eahO+8jOiHquW3semAieaLqTwvcD4gPGgyIGlkPVxcXCIlRTYlOTglQkUlRTclQTQlQkElRTglQUYlQTYlRTclQkIlODZcXFwiIHRhYmluZGV4PVxcXCItMVxcXCI+5pi+56S66K+m57uGPC9oMj4gPHA+5Y+v5Lul5YiX5Ye65b2T5YmN5paH5Lu25aS55oiW5paH5Lu255qE5Yib5bu65pe26Ze044CCPGJyIC8+IDxzdHJvbmc+PHN0cm9uZz7pl67popjvvJo8L3N0cm9uZz48L3N0cm9uZz48YnIgLz4g5LiN6IO96Ieq5Yqo5pKt5pS+5LiL5LiA6ZuGPC9wPiA8aDIgaWQ9XFxcIiVFNSVBRCU5NyVFNSVCOSU5NVxcXCIgdGFiaW5kZXg9XFxcIi0xXFxcIj7lrZfluZU8L2gyPiA8cD7lrZfluZXlip/og73lpoLmnpzmiZPlvIDvvIzpgqPkuYjlpoLmnpzop4bpopHkuI7lrZfluZXnmoTmlofku7blkI3nm7jlkIzvvIzpgqPkuYjlsLHkvJroh6rliqjmjILovb3kuIrjgILlpoLmnpzlvZPliY3mlofku7blpLnmnInov5nkuKrlrZfluZXmlofku7bvvIzkvYbmmK/lkI3lrZfkuI3lkIzvvIzlsLHkvJrot7Plh7rpgInmi6nmoYbpgInmi6k8L3A+IDxoMSBpZD1cXFwiJUU4JUJGJTk0JUU1JTlCJTlFJUU0JUI4JUJCJUU3JTk1JThDJUU5JTlEJUEyXFxcIiB0YWJpbmRleD1cXFwiLTFcXFwiPui/lOWbnuS4u+eVjOmdojwvaDE+IDxwPjxpbWcgc3JjPVxcXCJodHRwOi8vYWxpc3Quam9lZ3UudGsvZC9oaWtlci9TY3JlZW5zaG90XzIwMjIwODIxXzE0MDcwNV9jb20uZXhhbXBsZS5oaWtlcnZpZXcuanBnXFxcIiBhbHQ9XFxcIlNjcmVlbnNob3RfMjAyMjA4MjFfMTQwNzA1X2NvbS5leGFtcGxlLmhpa2Vydmlld1xcXCIgLz48YnIgLz4g5Y+v5Lul55yL6KeB5pyJ5pON5L2c5qCP77yM5Y+v5Lul5LiK5Lyg5paH5Lu277yM5paw5bu65paH5Lu25aS55ZKM5Yig6Zmk5paH5Lu25LiJ5Liq5pON5L2cPC9wPiA8cD7kuIvpnaLmmK/kvaDnmoTmlofku7bvvIzkvaDlj6/ku6Xlg4/mtY/op4jmlofku7bnrqHnkIblmajkuIDmoLfkvb/nlKjku5Y8L3A+IDxoMSBpZD1cXFwiJUU5JUFCJTk4JUU3JUJBJUE3JUU4JUFFJUJFJUU3JUJEJUFFXFxcIiB0YWJpbmRleD1cXFwiLTFcXFwiPumrmOe6p+iuvue9rjwvaDE+IDxwPueCueWHu+e8lui+keinhOWIme+8jOWIkuWIsOW6lemDqOeahOmihOWkhOeQhjxiciAvPiA8aW1nIHNyYz1cXFwiaHR0cDovL2FsaXN0LmpvZWd1LnRrL2QvaGlrZXIvU2NyZWVuc2hvdF8yMDIyMDgyMV8xNDExMzVfY29tLmV4YW1wbGUuaGlrZXJ2aWV3LmpwZ1xcXCIgYWx0PVxcXCJTY3JlZW5zaG90XzIwMjIwODIxXzE0MTEzNV9jb20uZXhhbXBsZS5oaWtlcnZpZXdcXFwiIC8+PGJyIC8+IOagueaNruazqOmHiuS/ruaUue+8jOaIkeWGmeeahOWHoOS4quaWh+S7tuagvOW8j+W3sue7j+W+iOWujOaVtOS6hu+8jOWmguaenOacieaci+WPi+iupOS4uuS4jeWlve+8jOWPr+S7peiHquihjOS/ruaUuTxiciAvPiDmoLzlvI/vvJpb4oCc57G75Z6LMeKAnSzigJznsbvlnosy4oCdXTwvcD4gPHA+6YO95a6M5oiQ5LqG77yMZW5qb3nwn5KePC9wPlxcbiAgICAgICAgICAgIGAsXFxuICAgICAgICAgICAgY29sX3R5cGU6IFxcXCJyaWNoX3RleHRcXFwiXFxuICAgICAgICB9XSlcXG4gICAgfSksXFxuICAgIHRpdGxlOiBcXFwi5p+l55yL5L2/55So6K+05piOXFxcIixcXG4gICAgZGVzYzogXFxcIlBvd2VyZWQgYnkgSm9lJuWwj+ajieiihFxcXCIsXFxuICAgIGNvbF90eXBlOiBcXFwidGV4dF9jZW50ZXJfMVxcXCIsXFxuICAgIGV4dHJhOiB7XFxuICAgICAgICBsaW5lVmlzaWJsZTogZmFsc2VcXG4gICAgfVxcbn0pXFxuc2V0UmVzdWx0KGQpO1wiLFwiZ3JvdXBcIjpcIuKRoOe9keebmFwiLFwidWFcIjpcIm1vYmlsZVwiLFwicHJlUnVsZVwiOlwiLypcXG7kvaDmg7Poh6rlrprkuYnnmoTmlofku7bmoLzlvI9cXG50ZXh077ya5paH5pys77yM6Ieq5Yqo5omT5byA77yMXFxuYXVkaW/vvJrpn7PpopHvvIzoh6rliqjmkq3mlL7vvIxcXG5tb3ZpZe+8muinhumike+8jOiHquWKqOaSreaUvlxcbmltZ++8muWbvueJh++8jOiHquWKqOmihOiniFxcbnN1YnRpdGxl77ya5a2X5bmV77yM5omL5Yqo5byA5YWzXFxuKi9cXG4kLmV4dGVuZCh7XFxuICAgIHRleHQ6IFtcXFwiaHRtXFxcIiwgXFxcImh0bWxcXFwiLCBcXFwieG1sXFxcIiwgXFxcImphdmFcXFwiLCBcXFwicHJvcGVydGllc1xcXCIsIFxcXCJzcWxcXFwiLCBcXFwianNcXFwiLCBcXFwibWRcXFwiLCBcXFwianNvblxcXCIsIFxcXCJjb25mXFxcIiwgXFxcImluaVxcXCIsIFxcXCJ2dWVcXFwiLCBcXFwicGhwXFxcIiwgXFxcInB5XFxcIiwgXFxcImJhdFxcXCIsIFxcXCJnaXRpZ25vcmVcXFwiLCBcXFwieW1sXFxcIiwgXFxcImdvXFxcIiwgXFxcInNoXFxcIiwgXFxcImNcXFwiLCBcXFwiY3BwXFxcIiwgXFxcImhcXFwiLCBcXFwiaHBwXFxcIiwgXFxcInRzeFxcXCJdLFxcbiAgICBhdWRpbzogW1xcXCJtcDNcXFwiLCBcXFwiZmxhY1xcXCIsIFxcXCJvZ2dcXFwiLCBcXFwibTRhXFxcIiwgXFxcIndhdlxcXCIsIFxcXCJvcHVzXFxcIl0sXFxuICAgIG1vdmllOiBbXFxcIm1wNFxcXCIsIFxcXCJta3ZcXFwiLCBcXFwiYXZpXFxcIiwgXFxcIm1vdlxcXCIsIFxcXCJybXZiXFxcIiwgXFxcIndlYm1cXFwiLCBcXFwiZmx2XFxcIiwgXFxcIm00dlxcXCIsIFxcXCJtM3U4XFxcIl0sXFxuICAgIGltZzogW1xcXCJqcGdcXFwiLCBcXFwicG5nXFxcIiwgXFxcImpwZWdcXFwiLCBcXFwiZ2lmXFxcIiwgXFxcInN2Z1xcXCIsIFxcXCJyYXdcXFwiXSxcXG4gICAgc3VidGl0bGU6IFtcXFwidnR0XFxcIiwgXFxcInNydFxcXCIsIFxcXCJhc3NcXFwiXVxcbn0pXCIsXCJwYWdlc1wiOlwiW3tcXFwiY29sX3R5cGVcXFwiOlxcXCJ0ZXh0XzFcXFwiLFxcXCJuYW1lXFxcIjpcXFwi6K6+572uXFxcIixcXFwicGF0aFxcXCI6XFxcInNldHRpbmdzXFxcIixcXFwicnVsZVxcXCI6XFxcImpzOlxcXFxuLyphZGRMaXN0ZW5lcignb25DbG9zZScsICQudG9TdHJpbmcoKCkgPT4ge1xcXFxuICAgIC8vc2F2ZUZpbGUoXFxcXFxcXCJoaWtlcjovL2ZpbGVzL3J1bGVzL3dlYmRhdi9pbmZvLmpzb25cXFxcXFxcIiwgSlNPTi5zdHJpbmdpZnkoW2dldEl0ZW0oXFxcXFxcXCJkYXZcXFxcXFxcIiksIGdldEl0ZW0oXFxcXFxcXCJ1c2VybmFtZVxcXFxcXFwiKSwgZ2V0SXRlbShcXFxcXFxcInBhc3N3ZFxcXFxcXFwiKV0pKVxcXFxuICAgIC8vY2xlYXJNeVZhcihcXFxcXFxcInBhdGhcXFxcXFxcIilcXFxcbiAgICAvL3JlZnJlc2hQYWdlKClcXFxcbn0pKSovXFxcXG52YXIgZCA9IFtdO1xcXFxuZC5wdXNoKHtcXFxcbiAgICB0aXRsZTogXFxcXFxcXCJ3ZWJkYXblnLDlnYDvvJpcXFxcXFxcIiArIGdldEl0ZW0oXFxcXFxcXCJkYXZcXFxcXFxcIiwgXFxcXFxcXCLor7fovpPlhaVXZWJEYXblnLDlnYBcXFxcXFxcIiksXFxcXG4gICAgdXJsOiAkKGdldEl0ZW0oXFxcXFxcXCJkYXZcXFxcXFxcIiwgXFxcXFxcXCJcXFxcXFxcIiksIFxcXFxcXFwi6K+36L6T5YWl5q2j56Gu5qC85byP55qEd2ViZGF26ZO+5o6l77yB77yB77yBXFxcXFxcXCIpLmlucHV0KCgpID0+IHtcXFxcbiAgICAgICAgaWYgKCFpbnB1dC5zdGFydHNXaXRoKFxcXFxcXFwiaHR0cFxcXFxcXFwiKSkge1xcXFxuICAgICAgICAgICAgcmV0dXJuIFxcXFxcXFwidG9hc3Q6Ly/or7fovpPlhaXmraPnoa7nmoR3ZWJkYXbpk77mjqXvvIHvvIHvvIFcXFxcXFxcIlxcXFxuICAgICAgICB9IGVsc2Uge1xcXFxuICAgICAgICAgICAgaWYgKGlucHV0W2lucHV0Lmxlbmd0aCAtIDFdID09IFxcXFxcXFwiL1xcXFxcXFwiKSB7XFxcXG4gICAgICAgICAgICAgICAgdXJsID0gaW5wdXQuc3Vic3RyaW5nKDAsIGlucHV0Lmxlbmd0aCAtIDEpXFxcXG4gICAgICAgICAgICAgICAgc2V0SXRlbShcXFxcXFxcImRhdlxcXFxcXFwiLCB1cmwpXFxcXG4gICAgICAgICAgICB9IGVsc2Uge1xcXFxuICAgICAgICAgICAgICAgIHNldEl0ZW0oXFxcXFxcXCJkYXZcXFxcXFxcIiwgaW5wdXQpXFxcXG4gICAgICAgICAgICB9XFxcXG4gICAgICAgIH1cXFxcbiAgICAgICAgcmVmcmVzaFBhZ2UoKVxcXFxuICAgICAgICByZXR1cm4gXFxcXFxcXCJoaWtlcjovL2VtcHR5XFxcXFxcXCJcXFxcbiAgICB9KSxcXFxcbiAgICBjb2xfdHlwZTogXFxcXFxcXCJ0ZXh0XzFcXFxcXFxcIlxcXFxufSlcXFxcbmQucHVzaCh7XFxcXG4gICAgdGl0bGU6IFxcXFxcXFwi6LSm5oi3XFxcXFxcXCIsXFxcXG4gICAgdXJsOiAkKGdldEl0ZW0oXFxcXFxcXCJ1c2VyXFxcXFxcXCIsIFxcXFxcXFwiXFxcXFxcXCIpKS5pbnB1dCgoKSA9PiB7XFxcXG4gICAgICAgIHNldEl0ZW0oXFxcXFxcXCJ1c2VyXFxcXFxcXCIsIGlucHV0KVxcXFxuICAgICAgICByZWZyZXNoUGFnZSgpXFxcXG4gICAgICAgIHJldHVybiBcXFxcXFxcImhpa2VyOi8vZW1wdHlcXFxcXFxcIlxcXFxuICAgIH0pLFxcXFxuICAgIGNvbF90eXBlOiBcXFxcXFxcInRleHRfMlxcXFxcXFwiXFxcXG59KVxcXFxuZC5wdXNoKHtcXFxcbiAgICB0aXRsZTogXFxcXFxcXCLlr4bnoIFcXFxcXFxcIixcXFxcbiAgICB1cmw6ICQoZ2V0SXRlbShcXFxcXFxcInBhc3N3ZFxcXFxcXFwiLCBcXFxcXFxcIlxcXFxcXFwiKSkuaW5wdXQoKCkgPT4ge1xcXFxuICAgICAgICBzZXRJdGVtKFxcXFxcXFwicGFzc3dkXFxcXFxcXCIsIGlucHV0KVxcXFxuICAgICAgICByZWZyZXNoUGFnZSgpXFxcXG4gICAgICAgIHJldHVybiBcXFxcXFxcImhpa2VyOi8vZW1wdHlcXFxcXFxcIlxcXFxuICAgIH0pLFxcXFxuICAgIGNvbF90eXBlOiBcXFxcXFxcInRleHRfMlxcXFxcXFwiXFxcXG59KVxcXFxuZC5wdXNoKHtcXFxcbiAgICB0aXRsZTogXFxcXFxcXCLmtYvor5Xov57mjqVcXFxcXFxcIixcXFxcbiAgICB1cmw6ICQoKS5sYXp5UnVsZSgoKSA9PiB7XFxcXG4gICAgICAgIGNvbnN0IHtcXFxcbiAgICAgICAgICAgIGdldEZpbGVzXFxcXG4gICAgICAgIH0gPSAkLnJlcXVpcmUoXFxcXFxcXCJoaWtlcjovL3BhZ2UvY29kZVxcXFxcXFwiKVxcXFxuICAgICAgICBpZiAoZ2V0RmlsZXMoZ2V0SXRlbShcXFxcXFxcImRhdlxcXFxcXFwiKSArIFxcXFxcXFwiL1xcXFxcXFwiKSkge1xcXFxuICAgICAgICAgICAgcmV0dXJuIFxcXFxcXFwidG9hc3Q6Ly/ov57mjqXmiJDlip9cXFxcXFxcIlxcXFxuICAgICAgICB9IGVsc2Uge1xcXFxuICAgICAgICAgICAgcmV0dXJuIFxcXFxcXFwidG9hc3Q6Ly/ov57mjqXlpLHotKXvvIzor7fmo4Dmn6XotKbmiLflr4bnoIFcXFxcXFxcIlxcXFxuICAgICAgICB9XFxcXG4gICAgfSksXFxcXG4gICAgY29sX3R5cGU6IFxcXFxcXFwidGV4dF9jZW50ZXJfMVxcXFxcXFwiXFxcXG59KVxcXFxubGV0IGljb24gPSBnZXRJdGVtKFxcXFxcXFwiaWNvblN0eWxlXFxcXFxcXCIsIFxcXFxcXFwi6buY6K6kXFxcXFxcXCIpXFxcXG5sZXQgZGV0YWlsID0gZ2V0SXRlbShcXFxcXFxcImRldGFpbFxcXFxcXFwiLCBcXFxcXFxcIuW8gFxcXFxcXFwiKVxcXFxubGV0IHN1YnRpdGxlID0gZ2V0SXRlbShcXFxcXFxcInN1YnRpdGxlXFxcXFxcXCIsIFxcXFxcXFwi5byAXFxcXFxcXCIpXFxcXG5sZXQgdGltZXN0YW1wID0gZ2V0SXRlbShcXFxcXFxcInRpbWVcXFxcXFxcIiwgXFxcXFxcXCIwXFxcXFxcXCIpXFxcXG5sZXQgbmV3VmVyc2lvbjtcXFxcbmxldCBteVZlcnNpb24gPSBNWV9QQVJBTVMudmVyc2lvbiB8fCA5OTk7XFxcXG50cnkge1xcXFxuICAgIHJlcyA9IEpTT04ucGFyc2UoZmV0Y2goXFxcXFxcXCJodHRwOi8vaGlrZXIubm9raWEucHJlc3MvaGlrZXJ1bGUvZGV2L2dldGJ5aWQ/aWQ9NTIxMFxcXFxcXFwiKSlcXFxcbiAgICBuZXdWZXJzaW9uID0gcmVzLnJlc3VsdC52ZXJcXFxcbn0gY2F0Y2ggKGUpIHtcXFxcbiAgICB0b2FzdChcXFxcXFxcIumBk+mVv+S7k+W6k+aKvemjjuS6hu+8jOacrOasoeacquajgOa1i+WIsOaWsOeJiOS/oeaBr1xcXFxcXFwiKTtcXFxcbiAgICBuZXdWZXJzaW9uID0gbXlWZXJzaW9uO1xcXFxufVxcXFxubGV0IGlzVXBkYXRlID0gTnVtYmVyKG5ld1ZlcnNpb24pIDw9IE51bWJlcihteVZlcnNpb24pO1xcXFxubGV0IGlzVmVyID0gTnVtYmVyKG5ld1ZlcnNpb24pID09PSBOdW1iZXIobXlWZXJzaW9uKTtcXFxcbmQucHVzaCh7XFxcXG4gICAgY29sX3R5cGU6IFxcXFxcXFwibGluZV9ibGFua1xcXFxcXFwiXFxcXG59LCB7XFxcXG4gICAgdGl0bGU6IGlzVXBkYXRlID8gXFxcXFxcXCLlt7LmmK/mnIDmlrDniYhcXFxcXFxcIiA6IFxcXFxcXFwi8J+GmeaWsOeJiOacrFxcXFxcXFwiLFxcXFxuICAgIHVybDogXFxcXFxcXCJydWxlOi8vNXJXMzZaaVU2S2VHNTVXTTZhYVc2YUcxNmFLUjZZR1Q2S2VFNVlpWjQ0Q1FWMlZpWkdGMjQ0Q1I3NytsYUc5dFpWOXlkV3hsWDNWeWJPKy9wV2gwZEhBNkx5OW9hV3RsY2k1dWIydHBZUzV3Y21WemN5OW9hV3RsY25Wc1pTOXlkV3hsYkdsemRDNXFjMjl1UDJsa1BUVXlNVEFtWVhWMGFEMWhZakl6TURVeVlpMWpNR1EyTFRVNFptTXRPVFUxTlMxaE1qVXdNbUV3TUdFek9EYz1cXFxcXFxcIixcXFxcbiAgICBjb2xfdHlwZTogXFxcXFxcXCJ0ZXh0XzJcXFxcXFxcIlxcXFxufSwge1xcXFxuICAgIHRpdGxlOiBcXFxcXFxcIuiuvue9ruWbvuagh++8mlxcXFxcXFwiICsgaWNvbixcXFxcbiAgICB1cmw6ICQoKS5sYXp5UnVsZSgoaWNvbikgPT4ge1xcXFxuICAgICAgICBzZXRJdGVtKFxcXFxcXFwiaWNvblN0eWxlXFxcXFxcXCIsIGljb24gPT0gXFxcXFxcXCLpu5jorqRcXFxcXFxcIiA/IFxcXFxcXFwi6JOd6I6TXFxcXFxcXCIgOiBcXFxcXFxcIum7mOiupFxcXFxcXFwiKVxcXFxuICAgICAgICByZWZyZXNoUGFnZSgpXFxcXG4gICAgICAgIHJldHVybiBcXFxcXFxcImhpa2VyOi8vZW1wdHlcXFxcXFxcIlxcXFxuICAgIH0sIGljb24pLFxcXFxuICAgIGNvbF90eXBlOiBcXFxcXFxcInRleHRfMlxcXFxcXFwiXFxcXG59LCB7XFxcXG4gICAgdGl0bGU6IFxcXFxcXFwi5pi+56S66K+m57uG77yaXFxcXFxcXCIgKyBkZXRhaWwsXFxcXG4gICAgdXJsOiAkKCkubGF6eVJ1bGUoKGRldGFpbCkgPT4ge1xcXFxuICAgICAgICBzZXRJdGVtKFxcXFxcXFwiZGV0YWlsXFxcXFxcXCIsIGRldGFpbCA9PSBcXFxcXFxcIuW8gFxcXFxcXFwiID8gXFxcXFxcXCLlhbNcXFxcXFxcIiA6IFxcXFxcXFwi5byAXFxcXFxcXCIpXFxcXG4gICAgICAgIHJlZnJlc2hQYWdlKClcXFxcbiAgICAgICAgcmV0dXJuIFxcXFxcXFwiaGlrZXI6Ly9lbXB0eVxcXFxcXFwiXFxcXG4gICAgfSwgZGV0YWlsKSxcXFxcbiAgICBjb2xfdHlwZTogXFxcXFxcXCJ0ZXh0XzJcXFxcXFxcIlxcXFxufSwge1xcXFxuICAgIHRpdGxlOiBcXFxcXFxcIuWtl+W5leWKn+iDve+8mlxcXFxcXFwiICsgc3VidGl0bGUsXFxcXG4gICAgdXJsOiAkKCkubGF6eVJ1bGUoKHN1YnRpdGxlKSA9PiB7XFxcXG4gICAgICAgIHNldEl0ZW0oXFxcXFxcXCJzdWJ0aXRsZVxcXFxcXFwiLCBzdWJ0aXRsZSA9PSBcXFxcXFxcIuW8gFxcXFxcXFwiID8gXFxcXFxcXCLlhbNcXFxcXFxcIiA6IFxcXFxcXFwi5byAXFxcXFxcXCIpXFxcXG4gICAgICAgIHJlZnJlc2hQYWdlKClcXFxcbiAgICAgICAgcmV0dXJuIFxcXFxcXFwiaGlrZXI6Ly9lbXB0eVxcXFxcXFwiXFxcXG4gICAgfSwgc3VidGl0bGUpLFxcXFxuICAgIGNvbF90eXBlOiBcXFxcXFxcInRleHRfMlxcXFxcXFwiXFxcXG59LCB7XFxcXG4gICAgdGl0bGU6IFxcXFxcXFwi5pe26Ze05qC85byP77yaXFxcXFxcXCIgKyAodGltZXN0YW1wID09IFxcXFxcXFwiMFxcXFxcXFwiID8gXFxcXFxcXCIyMDIyLzA4LzIwIDE3OjE0OjMxXFxcXFxcXCIgOiBcXFxcXFxcIlNhdCwgMjAgQXVnIDIwMjIgMDk6MTQ6MzEgR01UXFxcXFxcXCIpLFxcXFxuICAgIHVybDogJCgpLmxhenlSdWxlKCh0aW1lc3RhbXApID0+IHtcXFxcbiAgICAgICAgc2V0SXRlbShcXFxcXFxcInRpbWVcXFxcXFxcIiwgdGltZXN0YW1wID09IFxcXFxcXFwiMFxcXFxcXFwiID8gXFxcXFxcXCIxXFxcXFxcXCIgOiBcXFxcXFxcIjBcXFxcXFxcIilcXFxcbiAgICAgICAgcmVmcmVzaFBhZ2UoKVxcXFxuICAgICAgICByZXR1cm4gXFxcXFxcXCJoaWtlcjovL2VtcHR5XFxcXFxcXCJcXFxcbiAgICB9LCB0aW1lc3RhbXApLFxcXFxuICAgIGNvbF90eXBlOiBcXFxcXFxcInRleHRfMVxcXFxcXFwiXFxcXG59LCB7XFxcXG4gICAgdXJsOiAkKCkucnVsZSgoKSA9PiB7XFxcXG4gICAgICAgIHNldFJlc3VsdChbe1xcXFxuICAgICAgICAgICAgdGl0bGU6IGBcXFxcbiAgICAgICAgICAgIDxwPuacrOevh+aWh+eroOWPqumSiOWvueiuvue9ru+8jOWFtuS7lueahOS9v+eUqOaWueazleW3sue7j+WcqOinhOWImeS4reivtOaYjua4hemZpOS6hjwvcD4gPHA+PGlucz48aW5zPuWJjeaPkOadoeS7tu+8muW3sue7j+abtOaWsDcuOeeJiOacrDwvaW5zPjwvaW5zPjwvcD4gPHA+5rW36ZiU6KeG55WM6aaW6aG16aKR6YGT6KeE5YiZ44CQV2ViZGF244CR77+laG9tZV9ydWxlX3VybO+/pWh0dHA6Ly9oaWtlci5ub2tpYS5wcmVzcy9oaWtlcnVsZS9ydWxlbGlzdC5qc29uP2lkPTUyMTAmYW1wO2F1dGg9YWIyMzA1MmItYzBkNi01OGZjLTk1NTUtYTI1MDJhMDBhMzg3PC9wPiA8aDEgaWQ9XFxcXFxcXCJ3ZWJkYXYlRTYlOTglQUYlRTQlQkIlODAlRTQlQjklODhcXFxcXFxcIiB0YWJpbmRleD1cXFxcXFxcIi0xXFxcXFxcXCI+V2ViZGF25piv5LuA5LmIPC9oMT4gPHA+d2ViZGF25bCx5piv5LiA56eN572R55uY5paH5Lu25Lyg6L6T5Y2P6K6u77yM5bi455So5LqO5bCP5LyX6L2v5Lu255qE5pWw5o2u5aSH5Lu944CC5pys6KeE5YiZ5Y+v5Lul566h55CGd2ViZGF255qE5paH5Lu277yM5pSv5oyB5rWP6KeI44CB5pKt5pS+44CB5LiL6L2944CB5LiK5Lyg44CB5Yig6Zmk562J5pON5L2cPC9wPiA8aDEgaWQ9XFxcXFxcXCIlRTYlODklOTMlRTUlQkMlODAlRTglQUUlQkUlRTclQkQlQUVcXFxcXFxcIiB0YWJpbmRleD1cXFxcXFxcIi0xXFxcXFxcXCI+5omT5byA6K6+572uPC9oMT4gPHA+PGltZyBzcmM9XFxcXFxcXCJodHRwOi8vYWxpc3Quam9lZ3UudGsvZC9oaWtlci9TY3JlZW5zaG90XzIwMjIwODIxXzA4MjU1MF9jb20uZXhhbXBsZS5oaWtlcnZpZXcuanBnXFxcXFxcXCIgYWx0PVxcXFxcXFwiU2NyZWVuc2hvdF8yMDIyMDgyMV8wODI1NTBfY29tLmV4YW1wbGUuaGlrZXJ2aWV3XFxcXFxcXCIgLz48L3A+IDxwPuWwhuS9oOeahHdlYmRhdumTvuaOpeWSjOi0puaIt+WvhueggeWhq+i/m+WOu++8iOi/memHjOaOqOiNkOS9v+eUqOWdmuaenOS6ke+8jOS8mOeCuTrnqLPlrpo757y654K5OuWuuemHj+Wwke+8jOS7t+agvOi0teOAguS5n+WPr+S7peiHquW3seaQreW7undlYmRhduezu+e7n++8jOS+i+WmgmFsaXN05ZKMY2xvdWRyZXZl77yM6ZyA6KaB5LiA5a6a55qE5Yqo5omL6IO95Yqb77yJPC9wPiA8aDIgaWQ9XFxcXFxcXCIlRTglQUUlQkUlRTclQkQlQUUlRTUlOUIlQkUlRTYlQTAlODdcXFxcXFxcIiB0YWJpbmRleD1cXFxcXFxcIi0xXFxcXFxcXCI+6K6+572u5Zu+5qCHPC9oMj4gPHA+5pys6KeE5YiZ5YaF572u5Lik56eN6aOO5qC855qE5Zu+5qCH77yM5YiG5Yir5Li66YGT6ZW/55qE5ZKM6JOd6I6T55qE77yM6Ieq5bex6YCJ5oupPC9wPiA8aDIgaWQ9XFxcXFxcXCIlRTYlOTglQkUlRTclQTQlQkElRTglQUYlQTYlRTclQkIlODZcXFxcXFxcIiB0YWJpbmRleD1cXFxcXFxcIi0xXFxcXFxcXCI+5pi+56S66K+m57uGPC9oMj4gPHA+5Y+v5Lul5YiX5Ye65b2T5YmN5paH5Lu25aS55oiW5paH5Lu255qE5Yib5bu65pe26Ze044CCPGJyIC8+IDxzdHJvbmc+PHN0cm9uZz7pl67popjvvJo8L3N0cm9uZz48L3N0cm9uZz48YnIgLz4g5LiN6IO96Ieq5Yqo5pKt5pS+5LiL5LiA6ZuGPC9wPiA8aDIgaWQ9XFxcXFxcXCIlRTUlQUQlOTclRTUlQjklOTVcXFxcXFxcIiB0YWJpbmRleD1cXFxcXFxcIi0xXFxcXFxcXCI+5a2X5bmVPC9oMj4gPHA+5a2X5bmV5Yqf6IO95aaC5p6c5omT5byA77yM6YKj5LmI5aaC5p6c6KeG6aKR5LiO5a2X5bmV55qE5paH5Lu25ZCN55u45ZCM77yM6YKj5LmI5bCx5Lya6Ieq5Yqo5oyC6L295LiK44CC5aaC5p6c5b2T5YmN5paH5Lu25aS55pyJ6L+Z5Liq5a2X5bmV5paH5Lu277yM5L2G5piv5ZCN5a2X5LiN5ZCM77yM5bCx5Lya6Lez5Ye66YCJ5oup5qGG6YCJ5oupPC9wPiA8aDEgaWQ9XFxcXFxcXCIlRTglQkYlOTQlRTUlOUIlOUUlRTQlQjglQkIlRTclOTUlOEMlRTklOUQlQTJcXFxcXFxcIiB0YWJpbmRleD1cXFxcXFxcIi0xXFxcXFxcXCI+6L+U5Zue5Li755WM6Z2iPC9oMT4gPHA+PGltZyBzcmM9XFxcXFxcXCJodHRwOi8vYWxpc3Quam9lZ3UudGsvZC9oaWtlci9TY3JlZW5zaG90XzIwMjIwODIxXzE0MDcwNV9jb20uZXhhbXBsZS5oaWtlcnZpZXcuanBnXFxcXFxcXCIgYWx0PVxcXFxcXFwiU2NyZWVuc2hvdF8yMDIyMDgyMV8xNDA3MDVfY29tLmV4YW1wbGUuaGlrZXJ2aWV3XFxcXFxcXCIgLz48YnIgLz4g5Y+v5Lul55yL6KeB5pyJ5pON5L2c5qCP77yM5Y+v5Lul5LiK5Lyg5paH5Lu277yM5paw5bu65paH5Lu25aS55ZKM5Yig6Zmk5paH5Lu25LiJ5Liq5pON5L2cPC9wPiA8cD7kuIvpnaLmmK/kvaDnmoTmlofku7bvvIzkvaDlj6/ku6Xlg4/mtY/op4jmlofku7bnrqHnkIblmajkuIDmoLfkvb/nlKjku5Y8L3A+IDxoMSBpZD1cXFxcXFxcIiVFOSVBQiU5OCVFNyVCQSVBNyVFOCVBRSVCRSVFNyVCRCVBRVxcXFxcXFwiIHRhYmluZGV4PVxcXFxcXFwiLTFcXFxcXFxcIj7pq5jnuqforr7nva48L2gxPiA8cD7ngrnlh7vnvJbovpHop4TliJnvvIzliJLliLDlupXpg6jnmoTpooTlpITnkIY8YnIgLz4gPGltZyBzcmM9XFxcXFxcXCJodHRwOi8vYWxpc3Quam9lZ3UudGsvZC9oaWtlci9TY3JlZW5zaG90XzIwMjIwODIxXzE0MTEzNV9jb20uZXhhbXBsZS5oaWtlcnZpZXcuanBnXFxcXFxcXCIgYWx0PVxcXFxcXFwiU2NyZWVuc2hvdF8yMDIyMDgyMV8xNDExMzVfY29tLmV4YW1wbGUuaGlrZXJ2aWV3XFxcXFxcXCIgLz48YnIgLz4g5qC55o2u5rOo6YeK5L+u5pS577yM5oiR5YaZ55qE5Yeg5Liq5paH5Lu25qC85byP5bey57uP5b6I5a6M5pW05LqG77yM5aaC5p6c5pyJ5pyL5Y+L6K6k5Li65LiN5aW977yM5Y+v5Lul6Ieq6KGM5L+u5pS5PGJyIC8+IOagvOW8j++8mlvigJznsbvlnosx4oCdLOKAnOexu+WeizLigJ1dPC9wPiA8cD7pg73lrozmiJDkuobvvIxlbmpvefCfkp48L3A+XFxcXG4gICAgICAgICAgICBgLFxcXFxuICAgICAgICAgICAgY29sX3R5cGU6IFxcXFxcXFwicmljaF90ZXh0XFxcXFxcXCJcXFxcbiAgICAgICAgfV0pXFxcXG4gICAgfSksXFxcXG4gICAgdGl0bGU6IFxcXFxcXFwi5p+l55yL5L2/55So6K+05piOXFxcXFxcXCIsXFxcXG4gICAgZGVzYzogXFxcXFxcXCJQb3dlcmVkIGJ5IEpvZSblsI/mo4noooRcXFxcXFxcIixcXFxcbiAgICBjb2xfdHlwZTogXFxcXFxcXCJ0ZXh0X2NlbnRlcl8xXFxcXFxcXCIsXFxcXG4gICAgZXh0cmE6IHtcXFxcbiAgICAgICAgbGluZVZpc2libGU6IGZhbHNlXFxcXG4gICAgfVxcXFxufSlcXFxcbnNldFJlc3VsdChkKTtcXFwifSx7XFxcImNvbF90eXBlXFxcIjpcXFwibW92aWVfM1xcXCIsXFxcIm5hbWVcXFwiOlxcXCLku6PnoIFcXFwiLFxcXCJwYXRoXFxcIjpcXFwiY29kZVxcXCIsXFxcInJ1bGVcXFwiOlxcXCIkLmV4cG9ydHMuZ2V0RmlsZXMgPSBmdW5jdGlvbihwYXRoKSB7XFxcXG4gICAgdHJ5IHtcXFxcbiAgICAgICAgaWYgKCFwYXRoIHx8IHBhdGggPT0gXFxcXFxcXCJcXFxcXFxcIikge1xcXFxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXFxcXG4gICAgICAgIH1cXFxcbiAgICAgICAgbGV0IHdlYmRhdiA9IGJ1aWxkV2ViRGF2KHBhdGgsIGdldEl0ZW0oXFxcXFxcXCJ1c2VyXFxcXFxcXCIsIFxcXFxcXFwiXFxcXFxcXCIpLCBnZXRJdGVtKFxcXFxcXFwicGFzc3dkXFxcXFxcXCIsIFxcXFxcXFwiXFxcXFxcXCIpKVxcXFxuICAgICAgICBsZXQgcmVzID0gd2ViZGF2Lmxpc3QoKVxcXFxuICAgICAgICByZXMgPSBKU09OLnBhcnNlKHJlcylcXFxcbiAgICAgICAgcmV0dXJuIHJlc1xcXFxuICAgIH0gY2F0Y2ggKGUpIHtcXFxcbiAgICAgICAgbG9nKGUubWVzc2FnZSlcXFxcbiAgICAgICAgcmV0dXJuIGZhbHNlXFxcXG4gICAgfVxcXFxufVxcXFxuJC5leHBvcnRzLmZldGNoRmlsZSA9IGZ1bmN0aW9uKHBhdGgpIHtcXFxcbiAgICBsZXQgcmVzID0gcmVxdWVzdChwYXRoLCB7XFxcXG4gICAgICAgIGhlYWRlcnM6IHtcXFxcbiAgICAgICAgICAgIFxcXFxcXFwiYXV0aG9yaXphdGlvblxcXFxcXFwiOiBcXFxcXFxcIkJhc2ljIFxcXFxcXFwiICsgYmFzZTY0RW5jb2RlKGdldEl0ZW0oXFxcXFxcXCJ1c2VyXFxcXFxcXCIpICsgXFxcXFxcXCI6XFxcXFxcXCIgKyBnZXRJdGVtKFxcXFxcXFwicGFzc3dkXFxcXFxcXCIpKVxcXFxuICAgICAgICB9XFxcXG4gICAgfSlcXFxcbiAgICByZXR1cm4gcmVzXFxcXG59XFxcXG4kLmV4cG9ydHMuZ2V0SWNvbiA9IGZ1bmN0aW9uKGNvbnRlbnQpIHtcXFxcbiAgICBsZXQge1xcXFxuICAgICAgICBnZXRIem1cXFxcbiAgICB9ID0gJC5yZXF1aXJlKFxcXFxcXFwiaGlrZXI6Ly9wYWdlL2NvZGVcXFxcXFxcIilcXFxcbiAgICBsZXQgaWNvblN0eWxlcyA9IFt7XFxcXG4gICAgICAgIG5hbWU6ICfpu5jorqQnLFxcXFxuICAgICAgICB1cmw6ICdodHRwczovL2dpdGNvZGUubmV0L3FxXzMyMzk0MzUxL2RyLy0vcmF3L21hc3Rlci9pbWcv5paH5Lu257G75Z6LLydcXFxcbiAgICB9LCB7XFxcXG4gICAgICAgIG5hbWU6ICfok53ojpMnLFxcXFxuICAgICAgICB1cmw6ICdodHRwczovL2dpdGNvZGUubmV0L3FxXzMyMzk0MzUxL2RyLy0vcmF3L21hc3Rlci9pbWcv5paH5Lu257G75Z6LMi8nXFxcXG4gICAgfV07XFxcXG4gICAgbGV0IGljb25TdHlsZSA9IGdldEl0ZW0oJ2ljb25TdHlsZScsICfpu5jorqQnKTtcXFxcbiAgICBsZXQgbm93U3R5bGUgPSBpY29uU3R5bGVzLmZpbmQoeCA9PiB4Lm5hbWUgPT09IGljb25TdHlsZSk7XFxcXG4gICAgbGV0IGljb25Sb290ID0gbm93U3R5bGUgPyBub3dTdHlsZS51cmwgOiBpY29uU3R5bGVzWzBdLnVybDtcXFxcbiAgICBsZXQgcm9vdCA9IGljb25Sb290O1xcXFxuICAgIGlmIChjb250ZW50LmRpcikge1xcXFxuICAgICAgICBpbWcgPSByb290ICsgXFxcXFxcXCLmlofku7blpLkuc3ZnXFxcXFxcXCJcXFxcbiAgICB9IGVsc2Uge1xcXFxuICAgICAgICBsZXQgZmlsZXMgPSAnYWl8YXBrfGF2aXxjc3N8ZG1nfGV4ZXxmbHZ8Z2lmfGhpa2VyfGh0bWx8aXNvfGpwZ3xqc3xqc29ufGxvZ3xtb3Z8bXAzfG1wNHxvdGZ8cGhwfHBuZ3xwcHR8cHNkfHRhYmxlfHR4dHx3YXZ8eGxzfHppcCcuc3BsaXQoJ3wnKTtcXFxcbiAgICAgICAgbGV0IGZpbGVOYW1lID0gY29udGVudC5uYW1lXFxcXG4gICAgICAgIGxldCBoem0gPSBnZXRIem0oZmlsZU5hbWUpXFxcXG4gICAgICAgIGlmIChmaWxlcy5pbmNsdWRlcyhoem0pKSB7XFxcXG4gICAgICAgICAgICBpbWcgPSByb290ICsgaHptICsgJy5zdmcnO1xcXFxuICAgICAgICB9IGVsc2Uge1xcXFxuICAgICAgICAgICAgaW1nID0gcm9vdCArIFxcXFxcXFwi5paH5Lu2LnN2Z1xcXFxcXFwiXFxcXG4gICAgICAgIH1cXFxcbiAgICB9XFxcXG4gICAgcmV0dXJuIGltZ1xcXFxufVxcXFxuJC5leHBvcnRzLmdldEh6bSA9IGZ1bmN0aW9uKGZpbGVOYW1lKSB7XFxcXG4gICAgcmV0dXJuIGZpbGVOYW1lLnN1YnN0cihmaWxlTmFtZS5sYXN0SW5kZXhPZihcXFxcXFxcIi5cXFxcXFxcIikgKyAxKVxcXFxufVxcXFxuJC5leHBvcnRzLnJlbW92ZUV4dCA9IGZ1bmN0aW9uKGZpbGUpIHtcXFxcbiAgICByZXR1cm4gZmlsZS5zcGxpdCgnLicpLnNsaWNlKDAsIC0xKS5qb2luKCcuJylcXFxcbn07XFxcXG4kLmV4cG9ydHMuZ2V0U3ViID0gZnVuY3Rpb24obGlzdCkge1xcXFxuICAgIGNvbnN0IHtcXFxcbiAgICAgICAgZ2V0SHptXFxcXG4gICAgfSA9ICQucmVxdWlyZShcXFxcXFxcImhpa2VyOi8vcGFnZS9jb2RlXFxcXFxcXCIpXFxcXG4gICAgbGV0IHMgPSBbXVxcXFxuICAgIGxpc3QuZm9yRWFjaChpdGVtID0+IHtcXFxcbiAgICAgICAgaWYgKCQuc3VidGl0bGUuaW5jbHVkZXMoZ2V0SHptKGl0ZW0ubmFtZSkpKSB7XFxcXG4gICAgICAgICAgICBzLnB1c2goe1xcXFxuICAgICAgICAgICAgICAgIHRpdGxlOiBpdGVtLm5hbWUsXFxcXG4gICAgICAgICAgICAgICAgdXJsOiBpdGVtLnVybFxcXFxuICAgICAgICAgICAgfSlcXFxcbiAgICAgICAgfVxcXFxuICAgIH0pXFxcXG4gICAgcmV0dXJuIHNcXFxcbn1cXFxcbiQuZXhwb3J0cy5kb3dubG9hZCA9IGZ1bmN0aW9uKHBhdGgsIG5hbWUpIHtcXFxcbiAgICBsZXQgd2ViZGF2ID0gYnVpbGRXZWJEYXYocGF0aCwgZ2V0SXRlbShcXFxcXFxcInVzZXJcXFxcXFxcIiwgXFxcXFxcXCJcXFxcXFxcIiksIGdldEl0ZW0oXFxcXFxcXCJwYXNzd2RcXFxcXFxcIiwgXFxcXFxcXCJcXFxcXFxcIikpXFxcXG4gICAgbGV0IHAgPSBcXFxcXFxcImhpa2VyOi8vZmlsZXMvY2FjaGUvX2ZpbGVTZWxlY3RfXFxcXFxcXCIgKyBuYW1lO1xcXFxuICAgIHdlYmRhdi5kb3dubG9hZChuYW1lLCBwKTtcXFxcbiAgICByZXR1cm4gZ2V0UGF0aChwKTtcXFxcbn1cXFxcbiQuZXhwb3J0cy5kZWxldGVGaWxlID0gZnVuY3Rpb24ocGF0aCwgbmFtZSkge1xcXFxuICAgIGxldCB3ZWJkYXYgPSBidWlsZFdlYkRhdihwYXRoLCBnZXRJdGVtKFxcXFxcXFwidXNlclxcXFxcXFwiLCBcXFxcXFxcIlxcXFxcXFwiKSwgZ2V0SXRlbShcXFxcXFxcInBhc3N3ZFxcXFxcXFwiLCBcXFxcXFxcIlxcXFxcXFwiKSlcXFxcbiAgICB3ZWJkYXYuZGVsZXRlKG5hbWUpXFxcXG59XFxcXG4kLmV4cG9ydHMuc29ydHMgPSBmdW5jdGlvbihsaXN0LCBtZXRob2QpIHtcXFxcbiAgICBpZiAobWV0aG9kLmluY2x1ZGVzKFxcXFxcXFwi5ZCN56ewXFxcXFxcXCIpKSB7XFxcXG4gICAgICAgIGxpc3Quc29ydChmdW5jdGlvbihhLCBiKSB7XFxcXG4gICAgICAgICAgICByZXR1cm4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKVxcXFxuICAgICAgICB9KVxcXFxuICAgIH0gZWxzZSBpZiAobWV0aG9kLmluY2x1ZGVzKFxcXFxcXFwi5pe26Ze0XFxcXFxcXCIpKSB7XFxcXG4gICAgICAgIGxpc3Quc29ydChmdW5jdGlvbihhLCBiKSB7XFxcXG4gICAgICAgICAgICByZXR1cm4gYS5tb2RpZnlUaW1lc3RhbXAgLSBiLm1vZGlmeVRpbWVzdGFtcFxcXFxuICAgICAgICB9KVxcXFxuICAgIH1cXFxcbiAgICBpZiAobWV0aG9kLmluY2x1ZGVzKFxcXFxcXFwi5Y+NXFxcXFxcXCIpKSB7XFxcXG4gICAgICAgIGxpc3QucmV2ZXJzZSgpO1xcXFxuICAgIH1cXFxcbiAgICByZXR1cm4gbGlzdFxcXFxufVxcXFxuJC5leHBvcnRzLmdldEluZm8gPSBmdW5jdGlvbigpIHtcXFxcbiAgICByZXR1cm4gSlNPTi5wYXJzZShyZWFkRmlsZShcXFxcXFxcImhpa2VyOi8vZmlsZXMvcnVsZXMvd2ViZGF2L2luZm8uanNvblxcXFxcXFwiKSlcXFxcbn1cXFwifSx7XFxcImNvbF90eXBlXFxcIjpcXFwibW92aWVfM1xcXCIsXFxcIm5hbWVcXFwiOlxcXCLkuLvpobVcXFwiLFxcXCJwYXRoXFxcIjpcXFwibWFpblxcXCIsXFxcInJ1bGVcXFwiOlxcXCJqczpcXFxcbnZhciBkID0gW107XFxcXG5jb25zdCB7XFxcXG4gICAgZ2V0RmlsZXMsXFxcXG4gICAgZG93bmxvYWQsXFxcXG4gICAgZGVsZXRlRmlsZSxcXFxcbiAgICBnZXRJY29uLFxcXFxuICAgIHNvcnRzXFxcXG59ID0gJC5yZXF1aXJlKFxcXFxcXFwiaGlrZXI6Ly9wYWdlL2NvZGVcXFxcXFxcIilcXFxcbnZhciBwYXRoID0gZ2V0TXlWYXIoXFxcXFxcXCJwYXRoXFxcXFxcXCIsIGdldEl0ZW0oXFxcXFxcXCJkYXZcXFxcXFxcIikgKyBcXFxcXFxcIi9cXFxcXFxcIilcXFxcbmxldCBmaWxlcyA9IGdldEZpbGVzKHBhdGgpXFxcXG5pZiAoZmlsZXMpIHtcXFxcbiAgICBsZXQgcGF0aHMgPSBnZXRNeVZhcihcXFxcXFxcInBhdGhcXFxcXFxcIikucmVwbGFjZShnZXRJdGVtKFxcXFxcXFwiZGF2XFxcXFxcXCIpLCBcXFxcXFxcIlxcXFxcXFwiKVxcXFxuICAgIHBhdGhzID0gcGF0aHMuc3BsaXQoXFxcXFxcXCIvXFxcXFxcXCIpXFxcXG4gICAgbGV0IHRlbXAgPSBcXFxcXFxcIlxcXFxcXFwiXFxcXG4gICAgc29ydHMoZmlsZXMsIGdldE15VmFyKFxcXFxcXFwic29ydFxcXFxcXFwiLCBcXFxcXFxcIum7mOiupFxcXFxcXFwiKSlcXFxcbiAgICBkLnB1c2goe1xcXFxuICAgICAgICB0aXRsZTogZ2V0TXlWYXIoXFxcXFxcXCJtb3JlXFxcXFxcXCIsIFxcXFxcXFwiMFxcXFxcXFwiKSA9PSBcXFxcXFxcIjBcXFxcXFxcIiA/IFxcXFxcXFwi4oinXFxcXFxcXCIgOiBcXFxcXFxcIuKIqFxcXFxcXFwiLFxcXFxuICAgICAgICBjb2xfdHlwZTogXFxcXFxcXCJzY3JvbGxfYnV0dG9uXFxcXFxcXCIsXFxcXG4gICAgICAgIHVybDogJCgpLmxhenlSdWxlKChwYXRoKSA9PiB7XFxcXG4gICAgICAgICAgICBwdXRNeVZhcihcXFxcXFxcIm1vcmVcXFxcXFxcIiwgZ2V0TXlWYXIoXFxcXFxcXCJtb3JlXFxcXFxcXCIsIFxcXFxcXFwiMFxcXFxcXFwiKSA9PSBcXFxcXFxcIjBcXFxcXFxcIiA/IFxcXFxcXFwiMVxcXFxcXFwiIDogXFxcXFxcXCIwXFxcXFxcXCIpXFxcXG4gICAgICAgICAgICByZWZyZXNoUGFnZSgpXFxcXG4gICAgICAgICAgICByZXR1cm4gXFxcXFxcXCJoaWtlcjovL2VtcHR5XFxcXFxcXCJcXFxcbiAgICAgICAgfSwgcGF0aClcXFxcbiAgICB9LCB7XFxcXG4gICAgICAgIHRpdGxlOiBcXFxcXFxcIi4uXFxcXFxcXCIsXFxcXG4gICAgICAgIHVybDogJCgpLmxhenlSdWxlKChwYXRocykgPT4ge1xcXFxuICAgICAgICAgICAgcGF0aHMucG9wKClcXFxcbiAgICAgICAgICAgIHB1dE15VmFyKFxcXFxcXFwicGF0aFxcXFxcXFwiLCBnZXRJdGVtKFxcXFxcXFwiZGF2XFxcXFxcXCIpICsgcGF0aHMuam9pbihcXFxcXFxcIi9cXFxcXFxcIikpXFxcXG4gICAgICAgICAgICByZWZyZXNoUGFnZSgpXFxcXG4gICAgICAgICAgICByZXR1cm4gXFxcXFxcXCJoaWtlcjovL2VtcHR5XFxcXFxcXCJcXFxcbiAgICAgICAgfSwgcGF0aHMpLFxcXFxuICAgICAgICBjb2xfdHlwZTogXFxcXFxcXCJzY3JvbGxfYnV0dG9uXFxcXFxcXCJcXFxcbiAgICB9LCB7XFxcXG4gICAgICAgIHRpdGxlOiBcXFxcXFxcIvCfj6BcXFxcXFxcIixcXFxcbiAgICAgICAgdXJsOiAkKCkubGF6eVJ1bGUoKCkgPT4ge1xcXFxuICAgICAgICAgICAgcHV0TXlWYXIoXFxcXFxcXCJwYXRoXFxcXFxcXCIsIGdldEl0ZW0oXFxcXFxcXCJkYXZcXFxcXFxcIikpXFxcXG4gICAgICAgICAgICByZWZyZXNoUGFnZSgpXFxcXG4gICAgICAgICAgICByZXR1cm4gXFxcXFxcXCJoaWtlcjovL2VtcHR5XFxcXFxcXCJcXFxcbiAgICAgICAgfSksXFxcXG4gICAgICAgIGNvbF90eXBlOiBcXFxcXFxcInNjcm9sbF9idXR0b25cXFxcXFxcIlxcXFxuICAgIH0pXFxcXG4gICAgcGF0aHMuZm9yRWFjaChpdGVtID0+IHtcXFxcbiAgICAgICAgaWYgKGl0ZW0gIT0gXFxcXFxcXCJcXFxcXFxcIikge1xcXFxuICAgICAgICAgICAgdGVtcCArPSBcXFxcXFxcIi9cXFxcXFxcIiArIGl0ZW1cXFxcbiAgICAgICAgICAgIGQucHVzaCh7XFxcXG4gICAgICAgICAgICAgICAgdGl0bGU6IGRlY29kZVVSSUNvbXBvbmVudChpdGVtKSxcXFxcbiAgICAgICAgICAgICAgICB1cmw6ICQoKS5sYXp5UnVsZSgodGVtcCkgPT4ge1xcXFxuICAgICAgICAgICAgICAgICAgICBwdXRNeVZhcihcXFxcXFxcInBhdGhcXFxcXFxcIiwgZ2V0SXRlbShcXFxcXFxcImRhdlxcXFxcXFwiKSArIHRlbXApXFxcXG4gICAgICAgICAgICAgICAgICAgIHJlZnJlc2hQYWdlKClcXFxcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFxcXFxcXFwiaGlrZXI6Ly9lbXB0eVxcXFxcXFwiXFxcXG4gICAgICAgICAgICAgICAgfSwgdGVtcCksXFxcXG4gICAgICAgICAgICAgICAgY29sX3R5cGU6IFxcXFxcXFwic2Nyb2xsX2J1dHRvblxcXFxcXFwiXFxcXG4gICAgICAgICAgICB9KVxcXFxuICAgICAgICB9XFxcXG4gICAgfSk7XFxcXG4gICAgaWYgKGdldE15VmFyKFxcXFxcXFwibW9yZVxcXFxcXFwiLCBcXFxcXFxcIjBcXFxcXFxcIikgPT0gXFxcXFxcXCIxXFxcXFxcXCIpIHtcXFxcbiAgICAgICAgbGV0IHNvcnIgPSBbXFxcXFxcXCLpu5jorqRcXFxcXFxcIiwgXFxcXFxcXCLlkI3np7BcXFxcXFxcIiwgXFxcXFxcXCLml7bpl7RcXFxcXFxcIl1cXFxcbiAgICAgICAgZC5wdXNoKHtcXFxcbiAgICAgICAgICAgIHRpdGxlOiBcXFxcXFxcIuiuvue9rlxcXFxcXFwiLFxcXFxuICAgICAgICAgICAgdXJsOiBcXFxcXFxcImhpa2VyOi8vcGFnZS9zZXR0aW5nc1xcXFxcXFwiLFxcXFxuICAgICAgICAgICAgaW1nOiBcXFxcXFxcImhpa2VyOi8vaW1hZ2VzL+iuvue9rlxcXFxcXFwiLFxcXFxuICAgICAgICAgICAgY29sX3R5cGU6IFxcXFxcXFwiaWNvbl9zbWFsbF80XFxcXFxcXCIsXFxcXG4gICAgICAgICAgICBleHRyYToge1xcXFxuICAgICAgICAgICAgICAgIHZlcnNpb246IE1ZX1JVTEUudmVyc2lvblxcXFxuICAgICAgICAgICAgfVxcXFxuICAgICAgICB9LCB7XFxcXG4gICAgICAgICAgICB0aXRsZTogXFxcXFxcXCLkuIrkvKDmlofku7ZcXFxcXFxcIixcXFxcbiAgICAgICAgICAgIHVybDogXFxcXFxcXCJmaWxlU2VsZWN0Oi8vXFxcXFxcXCIgKyAkLnRvU3RyaW5nKChwYXRoKSA9PiB7XFxcXG4gICAgICAgICAgICAgICAgbGV0IHdlYmRhdiA9IGJ1aWxkV2ViRGF2KHBhdGgsIGdldEl0ZW0oXFxcXFxcXCJ1c2VyXFxcXFxcXCIpLCBnZXRJdGVtKFxcXFxcXFwicGFzc3dkXFxcXFxcXCIpKVxcXFxuICAgICAgICAgICAgICAgIGxldCBzID0gaW5wdXQuc3BsaXQoXFxcXFxcXCIvXFxcXFxcXCIpXFxcXG4gICAgICAgICAgICAgICAgbG9nKHdlYmRhdi51cGxvYWQoc1tzLmxlbmd0aCAtIDFdLnJlcGxhY2UoXFxcXFxcXCJfZmlsZVNlbGVjdF9cXFxcXFxcIiwgXFxcXFxcXCJcXFxcXFxcIiksIGlucHV0KSk7XFxcXG4gICAgICAgICAgICAgICAgcmVmcmVzaFBhZ2UoKTtcXFxcbiAgICAgICAgICAgIH0sIHBhdGgpLFxcXFxuICAgICAgICAgICAgaW1nOiBcXFxcXFxcImhpa2VyOi8vaW1hZ2VzL2hvbWVfaWNvbl9ib29rbWFya1xcXFxcXFwiLFxcXFxuICAgICAgICAgICAgY29sX3R5cGU6IFxcXFxcXFwiaWNvbl9zbWFsbF80XFxcXFxcXCIsXFxcXG4gICAgICAgIH0sIHtcXFxcbiAgICAgICAgICAgIHRpdGxlOiBcXFxcXFxcIuaWsOaWh+S7tuWkuVxcXFxcXFwiLFxcXFxuICAgICAgICAgICAgdXJsOiAkKFxcXFxcXFwiXFxcXFxcXCIsIFxcXFxcXFwi6L6T5YWl5paH5Lu25aS55ZCN56ewXFxcXFxcXCIpLmlucHV0KChwYXRoKSA9PiB7XFxcXG4gICAgICAgICAgICAgICAgbGV0IHdlYmRhdiA9IGJ1aWxkV2ViRGF2KHBhdGgsIGdldEl0ZW0oXFxcXFxcXCJ1c2VyXFxcXFxcXCIpLCBnZXRJdGVtKFxcXFxcXFwicGFzc3dkXFxcXFxcXCIpKVxcXFxuICAgICAgICAgICAgICAgIHdlYmRhdi5tYWtlRGlyKGlucHV0KVxcXFxuICAgICAgICAgICAgICAgIHJlZnJlc2hQYWdlKClcXFxcbiAgICAgICAgICAgICAgICByZXR1cm4gXFxcXFxcXCJoaWtlcjovL2VtcHR5XFxcXFxcXCJcXFxcbiAgICAgICAgICAgIH0sIHBhdGgpLFxcXFxuICAgICAgICAgICAgaW1nOiBcXFxcXFxcImhpa2VyOi8vaW1hZ2VzL2hvbWVfaWNvbl9mb2xkXFxcXFxcXCIsXFxcXG4gICAgICAgICAgICBjb2xfdHlwZTogXFxcXFxcXCJpY29uX3NtYWxsXzRcXFxcXFxcIlxcXFxuICAgICAgICB9LCB7XFxcXG4gICAgICAgICAgICB0aXRsZTogZ2V0TXlWYXIoXFxcXFxcXCJkZWxldGVcXFxcXFxcIiwgXFxcXFxcXCIwXFxcXFxcXCIpID09IFxcXFxcXFwiMFxcXFxcXFwiID8gXFxcXFxcXCLliKDpmaTmlofku7ZcXFxcXFxcIiA6IFxcXFxcXFwi57uT5p2f5Yig6ZmkXFxcXFxcXCIsXFxcXG4gICAgICAgICAgICBpbWc6IFxcXFxcXFwiaGlrZXI6Ly9pbWFnZXMvaG9tZV9pY29uX2l0ZW1cXFxcXFxcIixcXFxcbiAgICAgICAgICAgIHVybDogJCgpLmxhenlSdWxlKCgpID0+IHtcXFxcbiAgICAgICAgICAgICAgICBwdXRNeVZhcihcXFxcXFxcImRlbGV0ZVxcXFxcXFwiLCBnZXRNeVZhcihcXFxcXFxcImRlbGV0ZVxcXFxcXFwiLCBcXFxcXFxcIjBcXFxcXFxcIikgPT0gXFxcXFxcXCIwXFxcXFxcXCIgPyBcXFxcXFxcIjFcXFxcXFxcIiA6IFxcXFxcXFwiMFxcXFxcXFwiKVxcXFxuICAgICAgICAgICAgICAgIHJlZnJlc2hQYWdlKClcXFxcbiAgICAgICAgICAgICAgICByZXR1cm4gXFxcXFxcXCJoaWtlcjovL2VtcHR5XFxcXFxcXCJcXFxcbiAgICAgICAgICAgIH0pLFxcXFxuICAgICAgICAgICAgY29sX3R5cGU6IFxcXFxcXFwiaWNvbl9zbWFsbF80XFxcXFxcXCJcXFxcbiAgICAgICAgfSlcXFxcbiAgICAgICAgc29yci5mb3JFYWNoKGl0ZW0gPT4ge1xcXFxuICAgICAgICAgICAgdmFyIG4gPSBnZXRNeVZhcihcXFxcXFxcInNvcnRcXFxcXFxcIiwgXFxcXFxcXCLpu5jorqRcXFxcXFxcIilcXFxcbiAgICAgICAgICAgIGlmIChuID09IGl0ZW0pIHtcXFxcbiAgICAgICAgICAgICAgICB2YXIgdGl0bGUgPSBpdGVtICsgXFxcXFxcXCLihpNcXFxcXFxcIlxcXFxuICAgICAgICAgICAgfSBlbHNlIGlmIChuLmluY2x1ZGVzKFxcXFxcXFwi5Y+NXFxcXFxcXCIpICYmIG4uaW5jbHVkZXMoaXRlbSkpIHtcXFxcbiAgICAgICAgICAgICAgICB2YXIgdGl0bGUgPSBpdGVtICsgXFxcXFxcXCLihpFcXFxcXFxcIlxcXFxuICAgICAgICAgICAgfSBlbHNlIHtcXFxcbiAgICAgICAgICAgICAgICB2YXIgdGl0bGUgPSBpdGVtICsgXFxcXFxcXCLihpVcXFxcXFxcIlxcXFxuICAgICAgICAgICAgfVxcXFxuICAgICAgICAgICAgZC5wdXNoKHtcXFxcbiAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGUsXFxcXG4gICAgICAgICAgICAgICAgY29sX3R5cGU6IFxcXFxcXFwiZmxleF9idXR0b25cXFxcXFxcIixcXFxcbiAgICAgICAgICAgICAgICB1cmw6ICQoKS5sYXp5UnVsZSgoaXRlbSkgPT4ge1xcXFxuICAgICAgICAgICAgICAgICAgICBpZiAoZ2V0TXlWYXIoXFxcXFxcXCJzb3J0XFxcXFxcXCIsIFxcXFxcXFwi6buY6K6kXFxcXFxcXCIpID09IGl0ZW0pIHtcXFxcbiAgICAgICAgICAgICAgICAgICAgICAgIHB1dE15VmFyKFxcXFxcXFwic29ydFxcXFxcXFwiLCBpdGVtICsgXFxcXFxcXCLlj41cXFxcXFxcIilcXFxcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcXFxcbiAgICAgICAgICAgICAgICAgICAgICAgIHB1dE15VmFyKFxcXFxcXFwic29ydFxcXFxcXFwiLCBpdGVtKVxcXFxuICAgICAgICAgICAgICAgICAgICB9XFxcXG4gICAgICAgICAgICAgICAgICAgIHJlZnJlc2hQYWdlKClcXFxcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFxcXFxcXFwiaGlrZXI6Ly9lbXB0eVxcXFxcXFwiXFxcXG4gICAgICAgICAgICAgICAgfSwgaXRlbSlcXFxcbiAgICAgICAgICAgIH0pXFxcXG4gICAgICAgIH0pXFxcXG4gICAgfVxcXFxuICAgIGZpbGVzLmZvckVhY2goaXRlbSA9PiB7XFxcXG4gICAgICAgIGxldCBmaWxlTmFtZSA9IGRlY29kZVVSSUNvbXBvbmVudChpdGVtLm5hbWUpXFxcXG4gICAgICAgIGxldCBsZW4gPSAzMDtcXFxcbiAgICAgICAgbGV0IGxlbjIgPSBsZW4gLyAyO1xcXFxuICAgICAgICBpZiAoZmlsZU5hbWUubGVuZ3RoID49IGxlbikge1xcXFxuICAgICAgICAgICAgZmlsZU5hbWUgPSBmaWxlTmFtZS5zdWJzdHIoMCwgbGVuMikgKyAnLi4uJyArIGZpbGVOYW1lLnN1YnN0cihmaWxlTmFtZS5sZW5ndGggLSBsZW4yKTtcXFxcbiAgICAgICAgfVxcXFxuICAgICAgICBsZXQgaWNvbiA9IGdldEljb24oaXRlbSlcXFxcbiAgICAgICAgaWYgKGdldE15VmFyKFxcXFxcXFwiZGVsZXRlXFxcXFxcXCIsIFxcXFxcXFwiMFxcXFxcXFwiKSA9PSBcXFxcXFxcIjBcXFxcXFxcIikge1xcXFxuICAgICAgICAgICAgdmFyIHVybCA9ICQoKS5sYXp5UnVsZSgoaXRlbSwgZmlsZXMpID0+IHtcXFxcbiAgICAgICAgICAgICAgICBjb25zdCB7XFxcXG4gICAgICAgICAgICAgICAgICAgIGZldGNoRmlsZSxcXFxcbiAgICAgICAgICAgICAgICAgICAgZ2V0SHptLFxcXFxuICAgICAgICAgICAgICAgICAgICBnZXRTdWIsXFxcXG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZUV4dCxcXFxcbiAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRcXFxcbiAgICAgICAgICAgICAgICB9ID0gJC5yZXF1aXJlKFxcXFxcXFwiaGlrZXI6Ly9wYWdlL2NvZGVcXFxcXFxcIilcXFxcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5kaXIpIHtcXFxcbiAgICAgICAgICAgICAgICAgICAgcHV0TXlWYXIoXFxcXFxcXCJwYXRoXFxcXFxcXCIsIGl0ZW0udXJsKVxcXFxuICAgICAgICAgICAgICAgICAgICByZWZyZXNoUGFnZSgpXFxcXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcXFxcXFxcImhpa2VyOi8vZW1wdHlcXFxcXFxcIlxcXFxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJC5tb3ZpZS5pbmNsdWRlcyhnZXRIem0oaXRlbS5uYW1lKSkpIHtcXFxcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdldEl0ZW0oXFxcXFxcXCJzdWJ0aXRsZVxcXFxcXFwiLCBcXFxcXFxcIuW8gFxcXFxcXFwiKSA9PSBcXFxcXFxcIuW8gFxcXFxcXFwiKSB7XFxcXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3VidGl0bGVzID0gZ2V0U3ViKGZpbGVzKVxcXFxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5hbWVzID0gW1xcXFxcXFwi5LiN6ZyA6KaB5a2X5bmVXFxcXFxcXCJdXFxcXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0aXRsZXMuZm9yRWFjaChkcyA9PiB7XFxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZXMucHVzaChkcy50aXRsZSlcXFxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXFxcXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3VidGl0bGVzLmxlbmd0aCAhPSAwKSB7XFxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICQobmFtZXMsIDEsIFxcXFxcXFwi6K+36YCJ5oup5a2X5bmVXFxcXFxcXCIpLnNlbGVjdCgobmFtZXMsIHN1YnRpdGxlcywgdXJsKSA9PiB7XFxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dCA9PSBcXFxcXFxcIuS4jemcgOimgeWtl+W5lVxcXFxcXFwiKSB7XFxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xcXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybHM6IFt1cmxdLFxcXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcXFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcXFxcXCJBdXRob3JpemF0aW9uXFxcXFxcXCI6IFxcXFxcXFwiQmFzaWMgXFxcXFxcXCIgKyBiYXNlNjRFbmNvZGUoZ2V0SXRlbShcXFxcXFxcInVzZXJuYW1lXFxcXFxcXCIpICsgXFxcXFxcXCI6XFxcXFxcXCIgKyBnZXRJdGVtKFxcXFxcXFwicGFzc3dkXFxcXFxcXCIpKVxcXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cXFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXFxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XFxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xcXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybHM6IFt1cmxdLFxcXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRpdGxlOiBzdWJ0aXRsZXNbbmFtZXMuaW5kZXhPZihpbnB1dCkgLSAxXS51cmwsXFxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xcXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFxcXFxcIkF1dGhvcml6YXRpb25cXFxcXFxcIjogXFxcXFxcXCJCYXNpYyBcXFxcXFxcIiArIGJhc2U2NEVuY29kZShnZXRJdGVtKFxcXFxcXFwidXNlcm5hbWVcXFxcXFxcIikgKyBcXFxcXFxcIjpcXFxcXFxcIiArIGdldEl0ZW0oXFxcXFxcXCJwYXNzd2RcXFxcXFxcIikpXFxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxcXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcXFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxcXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIG5hbWVzLCBzdWJ0aXRsZXMsIGl0ZW0udXJsKVxcXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcXFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5wbGF5VXJsICsgXFxcXFxcXCIjaXNWaWRlbz10cnVlI1xcXFxcXFwiXFxcXG4gICAgICAgICAgICAgICAgICAgICAgICB9XFxcXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XFxcXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5wbGF5VXJsICsgXFxcXFxcXCIjaXNWaWRlbz10cnVlI1xcXFxcXFwiXFxcXG4gICAgICAgICAgICAgICAgICAgIH1cXFxcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGdldEh6bShpdGVtLm5hbWUpID09IFxcXFxcXFwibWRcXFxcXFxcIikge1xcXFxuICAgICAgICAgICAgICAgICAgICByZXF1aXJlKFxcXFxcXFwiaHR0cHM6Ly9naXRsYWIuY29tL2hqZGhueC9oaWtlci8tL3Jhdy9tYWluL2pzL21hcmtlZC5taW4uanNcXFxcXFxcIilcXFxcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFxcXFxcXFwiaGlrZXI6Ly9wYWdlL3ByZXZpZXc/Y29udGVudD1cXFxcXFxcIiArIGJhc2U2NEVuY29kZShtYXJrZWQucGFyc2UoZmV0Y2hGaWxlKGl0ZW0udXJsKSkpXFxcXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgkLnRleHQuaW5jbHVkZXMoZ2V0SHptKGl0ZW0ubmFtZSkpKSB7XFxcXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcXFxcXFxcImhpa2VyOi8vcGFnZS9wcmV2aWV3P2NvbnRlbnQ9XFxcXFxcXCIgKyBiYXNlNjRFbmNvZGUoZmV0Y2hGaWxlKGl0ZW0udXJsKSlcXFxcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCQuYXVkaW8uaW5jbHVkZXMoZ2V0SHptKGl0ZW0ubmFtZSkpKSB7XFxcXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLnBsYXlVcmwgKyBcXFxcXFxcIiNpc011c2ljPXRydWUjXFxcXFxcXCJcXFxcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCQuaW1nLmluY2x1ZGVzKGdldEh6bShpdGVtLm5hbWUpKSkge1xcXFxuICAgICAgICAgICAgICAgICAgICBsZXQgcCA9IGRvd25sb2FkKGdldE15VmFyKFxcXFxcXFwicGF0aFxcXFxcXFwiLCBnZXRJdGVtKFxcXFxcXFwiZGF2XFxcXFxcXCIpKSwgaXRlbS5uYW1lKVxcXFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcFxcXFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XFxcXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcXFxcXFxcImRvd25sb2FkOi8vXFxcXFxcXCIgKyBpdGVtLnBsYXlVcmxcXFxcbiAgICAgICAgICAgICAgICB9XFxcXG4gICAgICAgICAgICB9LCBpdGVtLCBmaWxlcylcXFxcbiAgICAgICAgfSBlbHNlIHtcXFxcbiAgICAgICAgICAgIHZhciB1cmwgPSAkKFxcXFxcXFwi56Gu6K6k5Yig6Zmk77yfXFxcXFxcXCIpLmNvbmZpcm0oKHVybCwgZGVsZXRlRmlsZSwgcGF0aCkgPT4ge1xcXFxuICAgICAgICAgICAgICAgIGRlbGV0ZUZpbGUoZ2V0TXlWYXIoXFxcXFxcXCJwYXRoXFxcXFxcXCIsIGdldEl0ZW0oXFxcXFxcXCJkYXZcXFxcXFxcIikpLCBwYXRoKVxcXFxuICAgICAgICAgICAgICAgIHJlZnJlc2hQYWdlKClcXFxcbiAgICAgICAgICAgICAgICByZXR1cm4gXFxcXFxcXCJ0b2FzdDovL+WIoOmZpOaIkOWKn1xcXFxcXFwiXFxcXG4gICAgICAgICAgICB9LCBpdGVtLnVybCwgZGVsZXRlRmlsZSwgaXRlbS5uYW1lKVxcXFxuICAgICAgICB9XFxcXG4gICAgICAgIGQucHVzaCh7XFxcXG4gICAgICAgICAgICB0aXRsZTogZmlsZU5hbWUsXFxcXG4gICAgICAgICAgICBpbWc6IGljb24sXFxcXG4gICAgICAgICAgICB1cmw6IHVybCxcXFxcbiAgICAgICAgICAgIGNvbF90eXBlOiBcXFxcXFxcImF2YXRhclxcXFxcXFwiXFxcXG4gICAgICAgIH0pXFxcXG4gICAgICAgIGlmIChnZXRJdGVtKFxcXFxcXFwiZGV0YWlsXFxcXFxcXCIsIFxcXFxcXFwi5byAXFxcXFxcXCIpID09IFxcXFxcXFwi5byAXFxcXFxcXCIpIHtcXFxcbiAgICAgICAgICAgIGQucHVzaCh7XFxcXG4gICAgICAgICAgICAgICAgdGl0bGU6IFxcXFxcXFwi4oCc4oCc4oCd4oCdPHNtYWxsPuKAnOKAnOKAneKAnTxmb250IGNvbG9yPScjYWFhYWFhJz5cXFxcXFxcIiArIChnZXRJdGVtKFxcXFxcXFwidGltZVxcXFxcXFwiLCBcXFxcXFxcIjBcXFxcXFxcIikgPT0gXFxcXFxcXCIwXFxcXFxcXCIgPyBpdGVtLm1vZGlmeVRpbWVTdHIgOiBpdGVtLm1vZGlmeVRpbWUpICsgXFxcXFxcXCI8L2ZvbnQ+PC9zbWFsbD5cXFxcXFxcIixcXFxcbiAgICAgICAgICAgICAgICB1cmw6IHVybCxcXFxcbiAgICAgICAgICAgICAgICBjb2xfdHlwZTogXFxcXFxcXCJ0ZXh0XzFcXFxcXFxcIlxcXFxuICAgICAgICAgICAgfSlcXFxcbiAgICAgICAgfVxcXFxuICAgIH0pXFxcXG59IGVsc2UgaWYgKGdldEl0ZW0oXFxcXFxcXCJkYXZcXFxcXFxcIiwgXFxcXFxcXCJcXFxcXFxcIikgPT0gXFxcXFxcXCJcXFxcXFxcIiB8fCBnZXRJdGVtKFxcXFxcXFwidXNlcm5hbWVcXFxcXFxcIiwgXFxcXFxcXCJcXFxcXFxcIikgPT0gXFxcXFxcXCJcXFxcXFxcIiB8fCBnZXRJdGVtKFxcXFxcXFwicGFzc3dkXFxcXFxcXCIsIFxcXFxcXFwiXFxcXFxcXCIpID09IFxcXFxcXFwiXFxcXFxcXCIpIHtcXFxcbiAgICBkLnB1c2goe1xcXFxuICAgICAgICB0aXRsZTogXFxcXFxcXCLlvZPliY3mnKrorr7nva7otKblj7fvvIzngrnmiJHorr7nva5cXFxcXFxcIixcXFxcbiAgICAgICAgdXJsOiBcXFxcXFxcImhpa2VyOi8vcGFnZS9zZXR0aW5nc1xcXFxcXFwiLFxcXFxuICAgICAgICBjb2xfdHlwZTogXFxcXFxcXCJ0ZXh0X2NlbnRlcl8xXFxcXFxcXCJcXFxcbiAgICB9KVxcXFxufSBlbHNlIHtcXFxcbiAgICBsZXQgcGF0aHMgPSBnZXRNeVZhcihcXFxcXFxcInBhdGhcXFxcXFxcIikucmVwbGFjZShnZXRJdGVtKFxcXFxcXFwiZGF2XFxcXFxcXCIpLCBcXFxcXFxcIlxcXFxcXFwiKVxcXFxuICAgIHBhdGhzID0gcGF0aHMuc3BsaXQoXFxcXFxcXCIvXFxcXFxcXCIpXFxcXG4gICAgZC5wdXNoKHtcXFxcbiAgICAgICAgdGl0bGU6IFxcXFxcXFwi6K6+572uXFxcXFxcXCIsXFxcXG4gICAgICAgIGNvbF90eXBlOiBcXFxcXFxcInRleHRfMVxcXFxcXFwiLFxcXFxuICAgICAgICB1cmw6IFxcXFxcXFwiaGlrZXI6Ly9wYWdlL3NldHRpbmdzXFxcXFxcXCJcXFxcbiAgICB9LCB7XFxcXG4gICAgICAgIHRpdGxlOiBcXFxcXFxcIuWHuumUmeS6hu+8jOeCueWHu+WIt+aWsFxcXFxcXFwiLFxcXFxuICAgICAgICB1cmw6ICQoKS5sYXp5UnVsZSgocGF0aHMpID0+IHtcXFxcbiAgICAgICAgICAgIHJlZnJlc2hQYWdlKClcXFxcbiAgICAgICAgICAgIHJldHVybiBcXFxcXFxcImhpa2VyOi8vZW1wdHlcXFxcXFxcIlxcXFxuICAgICAgICB9LCBwYXRocyksXFxcXG4gICAgICAgIGNvbF90eXBlOiBcXFxcXFxcInRleHRfY2VudGVyXzFcXFxcXFxcIlxcXFxuICAgIH0pXFxcXG59XFxcXG5zZXRSZXN1bHQoZCk7XFxcIn0se1xcXCJjb2xfdHlwZVxcXCI6XFxcIm1vdmllXzNcXFwiLFxcXCJuYW1lXFxcIjpcXFwi6aKE6KeIXFxcIixcXFwicGF0aFxcXCI6XFxcInByZXZpZXdcXFwiLFxcXCJydWxlXFxcIjpcXFwianM6XFxcXG5sZXQgY29udGVudCA9IGJhc2U2NERlY29kZShnZXRQYXJhbShcXFxcXFxcImNvbnRlbnRcXFxcXFxcIikpXFxcXG5zZXRSZXN1bHQoW3tcXFxcbiAgICB0aXRsZTogY29udGVudCxcXFxcbiAgICBjb2xfdHlwZTogXFxcXFxcXCJsb25nX3RleHRcXFxcXFxcIlxcXFxufV0pXFxcIn1dXCIsXCJwcm94eVwiOlwiXCJ9IiwidGl0bGUiOiLlvZPliY3mnKrorr7nva7otKblj7fvvIzngrnmiJHorr7nva4ifQ==