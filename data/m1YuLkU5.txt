string="https://github.com/PowerShell/PowerShell"
echo "1 $string"

string2="$string"
string2="${string2//*:\/\/}"
string2="${string2//\//_}"
string2="$HOME/desktop/$string2.txt"
echo "2 $string2"
if ! [[ -e "$string2" ]];then
	curl --location "$string" > "$string2"
fi
string3="$(cat "$string2"|grep osx-arm64.tar.gz)"
string3="${string3//'<td><a href="'}"
string3="${string3//\"*}"
echo "3 $string3"

string4="$string3"
string4="${string4//*\/}"
string4="$HOME/desktop/$string4"
echo "4 $string4"

if ! [[ -e "$string4" ]];then
	c="curl --location \"$string3\" --output \"$string4\""
	echo "$c"
	sh -c "$c"
fi

password="$(cat ~/desktop/password.txt)"


echo "$password"|sudo -S mkdir -p /usr/local/microsoft/powershell
echo "$password"|sudo -S tar zxf "$string4" --directory /usr/local/microsoft/powershell
sudo chmod +x /usr/local/microsoft/powershell/pwsh
sudo ln -s /usr/local/microsoft/powershell/pwsh /usr/local/bin/pwsh
pwsh --help
exit 
