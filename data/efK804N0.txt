#!/bin/bash

if [[ $# -ne 1 ]]
then
  echo "Expected one parameter - filename in current directory to delete"
  exit
fi

FILE_NAME=$1

if [[ "$FILE_NAME" == *\0* || "$FILE_NAME" == *\/* || ! -f ./"$FILE_NAME" ]]
then 
  echo "Incorrect file name"
  exit
fi

if [[ ! -d ~/.trash ]]
then 
  mkdir ~/.trash
fi

LINK_NAME=$(date +%s%N)

ln ./"$FILE_NAME" ~/.trash/"$LINK_NAME"
rm ./"$FILE_NAME"
echo $(pwd)/"$FILE_NAME" "$LINK_NAME" >> ~/.trash.log

echo "File moved to trash"
