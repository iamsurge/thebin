#!/usr/bin/env python
# -*- coding: utf-8 -*-
#
"""
Script que pide una ruta y una extensi√≥n y devuelve una lista con todos
los archivos hallados, buscados en forma recursiva

python bucar_archivos.py <ruta> <extension>
"""
import sys
import os

hallados = 0

# verifico la cantidad de argumentos
if len(sys.argv) != 3:
    sys.exit("Forma de uso: python buscar_archivos.py <ruta> <extension>")
    
    
# asigno los parametros
ruta, extension = sys.argv[1:]


# verifico si existe la ruta
if not os.path.exists(ruta):
    sys.exit(f"No existe la ruta {ruta}")
    
# busco los archivos dentro de la ruta recursivamente
# os.walk() necesita 3 iteradores:
# el nombre de la carpeta actual
# una lista de carpetas dentro de la carpeta actual
# una lista de archivos dentro de la carpeta actual    

for carpeta_actual, lista_carpetas, lista_archivos in os.walk(ruta):
    for archivo in lista_archivos:
        if archivo.endswith(extension):
            print(os.path.join(carpeta_actual,archivo))
            hallados += 1
            
            
if not hallados:
    print(f"No se hallaron archivos '{extension}' en la ruta {ruta}")

else:
    print(f"Total: {hallados}")
