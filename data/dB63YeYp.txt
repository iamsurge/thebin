using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Xml.Serialization;

namespace ClassWork2
{
    public class Book
    {
        public string Author { get; set; }
        private string bookName;
        private int year;

        const int minYear = 1900;

        public int Year
        {
            get { return year; }
            set
            {
                if (value > minYear)
                {
                    year = value;
                }
            }
        }
        public string BookName
        {
            get { return bookName; }
            set
            {
                if (!String.IsNullOrWhiteSpace(value))
                {
                    bookName = value;
                }
            }
        }
        public Book(string author, string bookName, int year)
        {
            Author = author;
            BookName = bookName;
            Year = year;
        }

        public Book(string author = "Untituled", string bookName = "Untituled")
            : this(author, bookName, 1900)
        {
        }
        public Book()
        {
        }

        public override string ToString()
        {
            return $"Author: {Author}\nBook name: {bookName}\nYear: {year}";
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            Book book = new Book("Ann", "Flower", 1901);
            Book book2 = new Book("Bob", "Cats", 2000);

            List<Book> library = new () { book, book2 };

            XmlSerializer xs = new XmlSerializer(typeof(List<Book>));

            string fname = "../../../library.xml";

            using (StreamWriter streamWriter = new StreamWriter(fname))
            {
                xs.Serialize(streamWriter, library);
            }

            List<Book> readBook;

            using (StreamReader streamReader = new StreamReader(fname))
            {
                readBook = xs.Deserialize(streamReader) as List<Book>;
            }
        }
    }
}