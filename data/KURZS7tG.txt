force-tod: Day
macros:
  Can Do Cistern Clip:
    (Ancient Cistern - Cistern Clip Trick & Sword) | Ancient Cistern - Swordless Cistern Clip Trick
  Can Clip Into Whip Chest Room:
    Can Do Cistern Clip & Water Scale & Ancient Cistern - Cistern Whip Room Clip Trick

Ancient Cistern:
  region: Ancient Cistern
  areas:
    Main Hub:
      locations:
        Rupee East Hand: Water Scale
        Rupee West Hand: Water Scale
      map-exits:
        Floria Waterfall - Main: Nothing
      logic-exits:
        East Part Past Combo Lock: Can Unlock Combination Lock
        After Whip Hooks: Whip
        Behind Waterfall: (Whip & Water Scale) | Can BiTWarp at Sealed Grounds Spiral
        # regardless of where the statue is, you always need a key to get to the room from main hub
        Whip Chest Room:
          (AC Small Key x2 & (Can Lower AC Statue | Can Defeat Stalmaster)) |
          Can Clip Into Whip Chest Room)
        Main Basement: Can Lower AC Statue
        # doing cistern clip allows getting the BK early
        # it *is* possible to lower the statue with the lever,
        # but doing so implies being able to raise it again
        # so getting the boss key is always possible when doing cistern clip
        Boss Key Chest Area: Can Do Cistern Clip
        # if you can do the clip, you can avoid the small key door
        Before Boss Door: (AC Small Key x2 | Can Clip Into Whip Chest Room) & Whip
    Whip Chest Room:
      locations:
        Whip: Nothing
    East Part Past Combo Lock:
      locations:
        Chest in East Part: Water Scale
        Rupee East Room Main Path: Water Scale
        Rupee East Room Cubby: Water Scale
        Rupee East Room Short Tunnel 1: Water Scale
        Rupee East Room Short Tunnel 2: Water Scale
        Rupee East Room Short Tunnel 3: Water Scale
    After Whip Hooks:
      locations:
        Chest after Whip Hooks: Nothing
      logic-exits:
        Main Room Vines: Clawshots
    Main Room Vines:
      locations:
        Chest near Vines: Nothing
      events:
        Can Lower AC Statue: Whip
      logic-exits:
        Behind Waterfall: Ancient Cistern - Lever Jump Trick
        After Whip Hooks: Ancient Cistern - Map Chest Jump Trick
    Behind Waterfall:
      locations:
        Chest behind the Waterfall: Nothing
      logic-exits:
        Before Boko Key Door: Whip & (Water Scale | Ancient Cistern - Basement Lilypad Clip Trick) & (Bow | Beetle)
    Before Boko Key Door:
      locations:
        Bokoblin: Whip
      logic-exits:
        After AC Gutters: AC Small Key x2
    After AC Gutters:
      logic-exits:
        After Whip Hooks: Nothing
        Main Room Vines: Water Scale & Whip
    Main Basement:
      logic-exits:
        # In the Basement you can either clawshot around the boulder, or use hook Beetle to blow it up.
        # A very precise bomb throw also works (not in logic).
        Spider Thread: Whip & (Clawshots | Hook Beetle)
        # you need to die after doing a highflip
        Boss Key Chest Area: (Ancient Cistern - Basement Highflip Trick & Bomb Bag)
        Before Boss Door: Whip
    Spider Thread:
      events:
        Can Lower AC Statue: Whip
      logic-exits:
        Main Basement: Nothing
    Boss Key Chest Area:
      # either the statue is already lowered
      # or opening the chest lowers it
      events:
        Can Lower AC Statue: Nothing
      locations:
        Boss Key Chest: Nothing
    Before Boss Door:
      map-exits:
        Ancient Cistern Boss - Main: AC Boss Key
Ancient Cistern Boss:
  region: Ancient Cistern
  areas:
    Main:
      macros:
        Can Defeat Koloktos: Whip & (Sword | Bomb Bag | Bow)
      locations:
        Koloktos Heart Container: Can Defeat Koloktos
      map-exits:
        Ancient Cistern Candle Room - Main: Can Defeat Koloktos
Ancient Cistern Candle Room:
  region: Ancient Cistern
  areas:
    Main:
      locations:
        Farore's Flame: Goddess Sword
      events:
        Can Beat Ancient Cistern: Goddess Sword
    