/** Required package class namespace */
package Foxx;

import java.awt.Color;
import java.awt.Font;
import javax.swing.Icon;
import javax.swing.ImageIcon;
import javax.swing.JOptionPane;
import javax.swing.JTextArea;


/*
 * CardsAreNeat - Program to aid in Mr.Wachs gambling addiction
 * 
 * @author Foxx Azalea Pinkerton
 * @since Nov 25, 2022
 * @teacher Mr.Wachs
 */
public class CardsAreNeat {

  static final String TITLE = "Card Game Simulater";
  static final Font FONT = new Font("Comic Sans MS", Font.PLAIN, 12); // hope you like my font choice :)
  static final Color BACKGROUND = new Color(238, 238, 238);
  static final Color FORGROUND = new Color(0, 0, 0);

  public static Card[] cards = new Card[53];

  /**
   * Main method for the project
   *
   * @param args the command line arguments
   */
  public static void main(String[] args) {
    initCards(); 

    do {
      menu();
    } while (true);
  }

  /**
   * Sets up display area
   *
   * @param text the string of the text to be formatted
   * @return the formatted text area
   */
  private static JTextArea formatArea(String text) {
    JTextArea area = new JTextArea();

    area.setFont(FONT);
    area.setBackground(BACKGROUND);
    area.setForeground(FORGROUND);
    area.setText(text);

    return area;
  }

  /**
   * Init cards
   */
  private static void initCards() {
    cards[0] = new Card(null, 0, "src\\Foxx\\Images\\0.gif");
    
    for (int sute = 0; sute < 4; sute++) {
      for (int number = 1; number < 14; number++) {
        int index = number + (sute * 13);
        Sutes cardSute = Sutes.values()[sute];
        String path = "src\\Foxx\\Images\\" + (number + (sute * 13)) + ".gif";

        cards[index] = new Card(cardSute, number, path);
      }
    }
  }
  
  /**
   * output for a card
   * @param card 
   */
  private static void output(Card card) {
    Icon icon = new ImageIcon(card.path);
    String message = card.makeMessage();
    JTextArea area = formatArea(message);
    
    JOptionPane.showMessageDialog(null, area, TITLE, JOptionPane.INFORMATION_MESSAGE, icon);
  }
  
  /**
   * reguler output message
   * 
   * @param text 
   */
  private static void output(String text) {
    JTextArea area = formatArea(text);
    JOptionPane.showMessageDialog(null, area, TITLE, 1);
  }
  
  /**
   * main menu of the program
   */
  private static void menu() {
    final String EXIT = "q";
    final String BACK = "b";
    
    final String MESSAGE = "To see infomation about a card enter:\n"
                         + "- Card number (1-52)\n"
                         + "- 'B' for the back of a card.\n"
                         + "- 'Q' to quit the program.";
    
    String input = JOptionPane.showInputDialog(null, formatArea(MESSAGE), TITLE, 1);
    
    if(EXIT.equals(input.toLowerCase())) { output("Thank you for using " + TITLE); System.exit(0); }
    if(BACK.equals(input.toLowerCase())) { output(cards[0]); }

    try {
      int index = Integer.parseInt(input);
      if(index < 1 || index > 52) { throw new Exception(); }
      output(cards[index]);
    } catch (Exception e) {
      output("Card is not in the deck.");
    }    

  }

}
