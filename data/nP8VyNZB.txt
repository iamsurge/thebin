alias mservices {
  if (%notlistmore) { return $v1 }
  if (%notlistnone) { return $v1 }
  if ($1 !isnum) return
  if (!%notlistservcount) {
    set -u %notlistservcount 1
    set -u %notlistcount 1
    set -u %notlistmorecount 1
  }
  scon %notlistservcount
  if ($status == connected) {
    if (%notlistcount == 1) var %r $style(2) $network $br($server) :noop
    else {
      while ($notify($calc(%notlistcount - 1)).ison == $false) inc %notlistcount
      if ($notify($calc(%notlistcount - 1))) var %r $iif($notify($calc(%notlistcount - 1)).ison,$notify($calc(%notlistcount - 1)) : scon %notlistservcount query $notify($calc(%notlistcount - 1)))
      else goto next
    }
    if (%r) {
      inc %notlistcount
      inc %notlistmorecount
      if (%notlistmorecount == 22) {
        set -u %notlistmore More... :notify -s
        scon -r
        return
      }
      return %r
    }
  }
  else {
    inc -u %sconcocount
    :next
    if (%notlistservcount == $scon(0)) {
      if (%sconcocount == $scon(0)) set -u %notlistnone $style(2) None : noop
      scon -r
      return
    }
    inc %notlistservcount
    %notlistcount = 1
    return -
  }
}
