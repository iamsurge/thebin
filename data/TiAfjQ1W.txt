n = int(input())
a = [int(i) for i in input().split()]
m = int(input())
stec_in = []
stec_out = []
i = 0
while i < n:
    if not stec_out:  # если выходной стек пустой -> заполняем
        while len(stec_in) < m and i < n:
            if len(stec_in) == 0:
                stec_in.append([a[i], a[i]])
            else:
                stec_in.append([a[i], max(a[i], stec_in[-1][1])])
            i += 1
        for k in range(m):  # перекладываем в stec_out
            v = stec_in.pop()[0]
            if k == 0:
                stec_out.append(v)
            else:
                stec_out.append(max(v, stec_out[-1]))
    else:  # удаляем из out добавляем в in (сдвигаем список) печатаем макс
        if not stec_in:
            print(stec_out.pop(), end=' ')
            stec_in.append([a[i], a[i]])
        else:
            print(max(stec_out.pop(), stec_in[-1][1]), end=' ')
            stec_in.append([a[i], max(a[i], stec_in[-1][1])])
        i += 1
if not stec_in:  # печатаем крайний макс.
    print(stec_out.pop())
elif not stec_out:
    print(stec_in[-1][1])
else:
    print(max(stec_out.pop(), stec_in[-1][1]))