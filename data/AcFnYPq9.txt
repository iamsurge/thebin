local modem = peripheral.wrap("top")
modem.open(1)
local message = "up"

local function down()
    rs.setOutput("left", true)
    sleep(0.5)
    rs.setOutput("left", false)
    sleep(8)
end

local function up()
    rs.setOutput("bottom", true)
    sleep(0.5)
    rs.setOutput("bottom", false)
    sleep(8)
end

local function receive()
    while true do
        local event, side, frequency, replyFrequency, message, distance = os.pullEvent("modem_message")
        if (message == "up") then
            up()
        elseif (message == "down") then
            down()
        end
        sleep(1)
    end
end

local function send()
    while true do
        local event = os.pullEvent("redstone")
        modem.transmit(1 ,1, message)

        if (message == "up") then
            message = "down"
        else
            message = "up"
        end
        sleep(1)
    end

end


local choice = {}
choice.send = send
choice.receive = receive

local args = {...}
choice[args[1]]()