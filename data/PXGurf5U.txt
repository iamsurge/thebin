resetstats()
resetseed()

baldiv   = 1e4
target   = balance*2
base1    = balance/baldiv 
base2    = base1
ch_hi    = 6.9
ch_lo    = 2.9
bal_now  = balance
bal_prev = balance
up_hi    = (base1*6.9)
up_lo    = (base1*10)
use_lo   = false
use_hi   = true
bethigh  = false
chance   = 49.5
nextbet  = base1

function dobet()
    chance = math.random(1,9800)/100
    if lastBet.roll>50 then
        bethigh = not bethigh
    end
    if (balance>=target) then stop() end
    if (balance>=(bal_now+(base2*ch_hi))) then
        nextbet = base2*2
        base2   = base2*2
        ch_hi   = 4.9 
        ch_lo   = 4.9
        use_lo  = false
        use_hi  = false
        bal_now = balance 
    end
    if ((balance<=(bal_now-(base2*ch_lo))) and (not use_hi)) then
        nextbet = base2*2
        base2   = base2*2 
        ch_lo   = 4.9
        ch_hi   = 9.9 
        use_lo  = false
        use_hi  = true
        bal_now = balance
    end  
    if ((balance<=(bal_now-(base2*ch_lo))) and (use_hi)) then
        nextbet = base2*2
        base2   = base2*2
        ch_lo   = 4.9
        ch_hi   = 4.9  
        use_lo  = true 
        use_hi  = true
        bal_now = balance
    end  
    if ((balance>=bal_prev) and (use_lo) and (balance<(bal_prev+up_hi))) then
        use_lo   = false
        bal_now  = bal_prev
        bal_prev = bal_prev
        ch_hi    = 6.9
        ch_lo    = 2.9 
        use_hi   = true
        sit      = false
        nextbet  = base1
        base2    = base1
    end
    if ((balance>=bal_prev) and (use_lo) and (balance>(bal_prev+up_hi)) and (balance<(bal_prev+up_lo))) then
        use_lo   = false
        bal_now  = bal_prev
        bal_prev = bal_prev 
        ch_hi    = 6.9
        ch_lo    = 2.9
        use_hi   = true
        nextbet  = base1*2
        base2    = base1*2 
    end
    if ((balance>(bal_prev+(up_lo))) and (balance<(bal_prev+(((math.floor((balance-bal_prev)/up_lo))*up_lo)+(up_hi))))) then
        bal_now  = bal_prev+((math.floor((balance-bal_prev)/up_lo))*up_lo)   
        bal_prev = bal_prev+((math.floor((balance-bal_prev)/up_lo))*up_lo)
        ch_hi    = 6.9
        ch_lo    = 2.9 
        use_hi   = true
        use_lo   = false
        nextbet  = base1
        base2    = base1
    end
    if ((balance>(bal_prev+(up_lo))) and (balance>(bal_prev+(((math.floor((balance-bal_prev)/up_lo))*up_lo)+(up_hi))))) then
        bal_now  = bal_prev+((math.floor((balance-bal_prev)/up_lo))*up_lo)
        bal_prev = bal_prev+((math.floor((balance-bal_prev)/up_lo))*up_lo)
        ch_hi    = 6.9 
        ch_lo    = 2.9
        use_hi   = true
        use_lo   = false
        nextbet  = base1*2
        base2    = base1*2
    end
end