#####
# HTTP dynamic configuration
# File provider
#####

http:

  #####
  # Routers configuration
  #####
  routers:

    keycloak-non-https:
      entryPoints:
        - "web"
      # By default, routers listen to every entry points
      rule: "Host(`sso.lab.******`) || Host(`iam.lab.******`)"
      middlewares:
        - middleware-http-to-https-redirect-scheme
      service: keycloak

    keycloak:
      entryPoints:
        - "websecure"
      # By default, routers listen to every entry points
      rule: "Host(`sso.lab.******`) || Host(`iam.lab.******`)"
      service: keycloak
      tls:
        certresolver: production