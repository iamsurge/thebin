using System;
using UnityEngine;
using UnityEngine.UI;

namespace GpuOptimization
{
    public class ControlUi : MonoBehaviour
    {
        public event Action OnPlusButtonClicked; 
        public event Action OnPlus10ButtonClicked; 
        public event Action OnMinusButtonClicked;
        public event Action OnMinus10ButtonClicked;
        
        [SerializeField] private Text _amoundOfBodiesText;
        [SerializeField] private Button _plusButton;
        [SerializeField] private Button _minusButton;
        [SerializeField] private Button _plus10Button;
        [SerializeField] private Button _minus10Button;

        public void SetAmountOfBodies(int amountOfBodies)
        {
            _amoundOfBodiesText.text = amountOfBodies.ToString();
        }

        private void OnEnable()
        {
            _plusButton.onClick.AddListener(PlusButtonHandler);           
            _plus10Button.onClick.AddListener(Plus10ButtonHandler);           
            _minusButton.onClick.AddListener(MinusButtonHandler);        
            _minus10Button.onClick.AddListener(Minus10ButtonHandler);        
        }
        
        private void EndEditHandler(string arg0)
        {
            
        }

        private void OnDisable()
        {
            _plusButton.onClick.RemoveListener(PlusButtonHandler);
            _plus10Button.onClick.RemoveListener(Plus10ButtonHandler);
            _minusButton.onClick.RemoveListener(MinusButtonHandler);
            _minus10Button.onClick.RemoveListener(Minus10ButtonHandler);
        }

        private void PlusButtonHandler()
        {
            OnPlusButtonClicked?.Invoke();
        }

        private void Plus10ButtonHandler()
        {
            OnPlus10ButtonClicked?.Invoke();
        }

        private void MinusButtonHandler()
        {
            OnMinusButtonClicked?.Invoke();
        }

        private void Minus10ButtonHandler()
        {
            OnMinus10ButtonClicked?.Invoke();
        }
    }
}