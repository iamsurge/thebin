using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace Levang
{
    public partial class Form1 : Form
    {

        List<auto> automobili = new List<auto>();

        public Form1()
        {
            InitializeComponent();
        }

        public void unosUTabelu(string proizvodjac, string model, double cena)
        {
            try
            {
                DataGridViewRow red = new DataGridViewRow();
                red.CreateCells(dataGridView1);
                red.Cells[0].Value = proizvodjac;
                red.Cells[1].Value = model;
                red.Cells[2].Value = cena;
                dataGridView1.Rows.Add(red);
            }
            catch
            {
                MessageBox.Show("Greska!");
            }
        }

        private void button1_Click(object sender, EventArgs e)
        {
            try
            {
                string proizvodjac = textBox1.Text;
                string model = textBox2.Text;
                double cena = Convert.ToDouble(textBox3.Text);

                automobili.Add(new auto(proizvodjac, model, cena));

                IEnumerable<auto> sort = automobili.OrderByDescending(auti=>auti.cena);
                automobili = sort.ToList();

                dataGridView1.Rows.Clear();

                foreach (auto i in automobili)
                {
                    unosUTabelu(i.proizvodjac, i.model, i.cena);
                }

                textBox1.Clear();
                textBox2.Clear();
                textBox3.Clear();
                textBox1.Focus();
            }
            catch
            {
                MessageBox.Show("Greska!");
                textBox3.Clear();
                textBox3.Focus();
            }
        }

        private void button2_Click(object sender, EventArgs e)
        {
            try
            {
                int i = dataGridView1.CurrentRow.Index;
                textBox1.Text = automobili[i].proizvodjac;
                textBox2.Text = automobili[i].model;
                textBox3.Text = Convert.ToString(automobili[i].cena);
            }
            catch
            {
                MessageBox.Show("Greska!");
            }
        }

        private void button3_Click(object sender, EventArgs e)
        {
            try
            {
                int i = dataGridView1.CurrentRow.Index;
                automobili.RemoveAt(i);
                dataGridView1.Rows.RemoveAt(i);
            }
            catch
            {
                MessageBox.Show("Greska!");
            }
        }

        private void button4_Click(object sender, EventArgs e)
        {
            try
            {
            string proizvodjac = textBox1.Text;
            string model = textBox2.Text;
            double cena = Convert.ToDouble(textBox3.Text);
            automobili.RemoveAt(dataGridView1.CurrentRow.Index);
            automobili.Add(new auto(proizvodjac, model, cena));

            IEnumerable<auto> sort = automobili.OrderByDescending(auti=>auti.cena);
            automobili = sort.ToList();

            dataGridView1.Rows.Clear();

            foreach (auto i in automobili)
            {
                unosUTabelu(i.proizvodjac, i.model, i.cena);
            }

            textBox1.Clear();
            textBox2.Clear();
            textBox3.Clear();
            textBox1.Focus();
            }
            catch
            {
                MessageBox.Show("Greska!");
                if (textBox3.Text != "")
                {
                    textBox3.Text = Convert.ToString(automobili[dataGridView1.CurrentRow.Index].cena);
                }
                textBox3.Focus();
            }
        }

       
    }

    public class auto
    {
        public string proizvodjac { get; set; }
        public string model { get; set; }
        public double cena { get; set; }

        public auto(string proizvodjac, string model, double cena)
        {
            this.proizvodjac = proizvodjac;
            this.model = model;
            this.cena = cena;
        }
    }
}
