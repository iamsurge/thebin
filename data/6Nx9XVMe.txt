Uses Crt;

type
  Actors = Record
    ID_A: word;
    Name_A: string[18];
    Fam_A: string[18];
    DofB: string[8];
    Roles: byte; {1 - главная, 2 - второстепенная, 3 - массовка}
    Gender: boolean;
  end;
  
  Films = Record
    ID_F: word;
    ID_A: word;
    Name_F: string[20];
    Duration: string[6];
    Date: string[8];
  end;
  
var
  FV1: file of Actors;
  ActorsBP: Actors;
  
  FV2: file of Films;
  FilmsBP: Films;

  temp: longword;
const
  ActorsName = 'Actors.uwu';
  FilmsName = 'Films.uwu';
  Yes = 'YyУу';
  No = 'NnНн';

procedure Open;
begin
  Assign(FV1, ActorsName);
  Assign(FV2, FilmsName);
  
  if not FileExists(ActorsName) then ReWrite(FV1)
  else ReSet(FV1);
  
  if not FileExists(FilmsName) then ReWrite(FV2)
  else ReSet(FV2);
end;

procedure Close;
begin
  Close(FV1);
  Close(FV2);
end;

procedure Add;
begin
  var 
  input: string;
  var role: integer;
begin
  if (FileSize(FV1) > 0) then
  
  begin
    Seek(FV1, FileSize(FV1) - 1);
    Read(FV1, ActorsBP);
    ActorsBP.ID_A := ActorsBP.ID_A + 1;
  end
  else ActorsBP.ID_A := 0;
  
  repeat
    Write('Имя актера: ');
    Readln(input);
    until (input.Length <= 18) and (input <> ''.ToString());
    ActorsBP.Name_A := input;
    
  repeat
    Write('Фамилия актера: ');
    Readln(input);
    until (input.Length <= 18) and (input <> ''.ToString());
    ActorsBP.Fam_A := input;
    
  repeat
    Write('Дата рождения: ');
    Readln(input);
    input.Replace('.', '')
    until (input.Length = 8) and longword.TryParse(input, temp);
    ActorsBP.DofB := input;
    
   repeat
     Write('Роль: (1 - главная; 2 - второстепенная; 3 - массовка)');
     Readln(input);
     TryStrToInt(input, role);
     until (input.Length = 1) and (input <> ''.ToString()) and (role > 0) and (role < 4); {нужно сравнить, равен ли инпут 1/2/3}
     ActorsBP.Roles := role;
     
   repeat
     Write('Пол мужской?: (Y of N)');
     Readln(input);
     until (Yes.Contains(input)) or (No.Contains(input));
     ActorsBP.Gender := Yes.Contains(input) ? true : false;
     
     
     end;
    Write(FV1, ActorsBP);
end;



procedure List;
begin
  {из файла с самой 1 поз вытаскивать записи в буфер переменную и потом выводить для каждой записи значение её полей в консоль}
  Seek(FV1, 0);
  while not Eof(FV1) do begin
    Read(FV1, ActorsBP);
    var Role : string;
    var Gender : string;
    
    {if ActorsBP.Roles = 1 then
      Role := 'главная';
    else if ActorsBP.Roles = 2 then
      Role := 'второстепенная';
    else if ActorsBP.Roles = 3 then
      Role := 'массовка';}
    
    if ActorsBP.Gender = True then
      Gender := 'мужской'
    else 
      Gender := 'женский';
    
    case ActorsBP.Roles of
      1 : Role := 'главная';
      2 : Role :='второстепенная';
      3 : Role :='массовка';
      end;
    WriteLn(' дата рождения: ' + ActorsBP.DofB + '  ' + ActorsBP.Fam_A + '  ' + Gender + '  ' + ActorsBP.ID_A + '  ' + ActorsBP.Name_A + '  ' + Role);
  end;
end;

procedure Menu;
var
  input: string;
begin
  while input<>'1' do
  begin
    Write('Введите "help" для списка команд. Введите команду: ');
    ReadLn(input);
    case input of
      'help':
        WriteLn('1 - выйти' + NewLine + '2 - добавить данные в таблицу'
                    + NewLine + '3 - вывести таблицу Актеров');
      '2': Add;
      '3': List;
    end;
  end;
  
end;

begin
  Open;
  Menu;
  Close;
end.