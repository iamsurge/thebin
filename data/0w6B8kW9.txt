/**
 * TODO:
 * Buatlah program untuk membaca teks input.txt dan menuliskannya ulang pada berkas output.txt
 * menggunakan teknik readable stream dan writable stream.
 */


const fs = require('fs');
const {resolve} = require('path');

const readableStream = fs.createReadStream(resolve(__dirname,'input.txt'),{highWaterMark: 15});
const writeableStream = fs.createWriteStream("./stream/output.txt");

function writeOutput(input){
    writeableStream.write(input.toString() + '\n');
}

readableStream.on('readable', function () {
    try{
        /**
         * Jika kode ini ditulis ouput tidak tercetak
         * process.stdout.write(`${readableStream.read()}\n`)*/
        writeOutput(readableStream.read());
    }
    catch (error){
        // error
    }
});

readableStream.on('end', function(){
    console.log('Done reading');
    writeableStream.end();
});