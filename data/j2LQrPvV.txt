== Directory Structure ==

samba/
├── docker-compose.yaml
├── etc
│   └── samba
│       └── smb.conf
├── smb.conf
├── usr
│   └── share
│       └── samba
└── var
    └── log
        └── samba
            ├── cores
            ├── log.
            └── log.nmbd



== smb.conf ==

[global]
   workgroup = MYHOME
   server string = Blinky: Samba
   server role = standalone server
   log file = /var/log/samba/log.%m
   max log size = 1000
   logging = file
   netbios name = blinky
#   wins support = yes
#   dns proxy no
#   map to guest = bad user
   hosts allow = 192.168.1.
   encrypt passwords = true

#====== Share Definitions ======

[Main-Data]
   path = /srv/main-data
   security = user
   browsable = yes
   writeable = yes
   read only = no
   guest ok = no
   create mask = 0775
   force create mode = 0775
   directory mask = 0775
   force directory mode = 0775
#   valid users = matt lisa
   valid users = @family

[Data1]
   path = /srv/data1
   security = user
   browsable = yes
   writeable = yes
   read only = no
   guest ok = no
   create mask = 0775
   force create mode = 0775
   directory mask = 0775
   force directory mode = 0775
#   valid users = matt lisa
   valid users = @family



== docker-compose.yaml ==

version: '3.8'

services:
  samba:
    image: dperson/samba:latest
    container_name: samba
    hostname: taweret
    environment:
      - WORKGROUP=MYHOME
      - TZ='America/Chicago'
      - USERID=1001
      - GROUPID=1001
      - NMBD=True
    networks:
      - default
    ports:
      - "137:137/udp"
      - "138:138/udp"
      - "139:139/tcp"
      - "445:445/tcp"
    restart: unless-stopped
    stdin_open: true
    tty: true
    volumes:
      - ./etc/samba:/etc/samba
      - ./var/log/samba:/var/log/samba
      - ./usr/share/samba:/usr/share/samba
      - /srv/main-data:/srv/main-data:z
      - /srv/data1:/srv/data1:z
#    command: '-s "Main-Data;/srv/main-data;yes;no;no;matt,lisa;none;matt,lisa;none" -s "Data1;/srv/data1;yes;no;no;matt,lisa;none;matt,lisa;none"'

networks:
  default:
