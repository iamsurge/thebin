# Проект в целях понимания курса https://stepik.org/lesson/349845/step/1?unit=333700
# "Угадайка чисел"
import random

def is_game():  # сама игра. Использует все функции(пока их только 2 всего :D), кроме is_again()
    count = 0
    right = is_pick()
    answer = random.randint(1, right)
    print(f'Я загадал число от 1 до {right}, угадай, какое?')
    while True:
        n = input(f"Загадайте число от 1 до {right}: ")
        if not is_valid(n) and 1 <= int(n) <= right:
            print('А может быть все-таки введем целое число от 1 до {right}?')
            continue
        else:
            count += 1
            n = int(n)
            if n > answer:
                print('Слишком много, попробуйте еще раз')
                continue
            elif n < answer:
                print('Слишком мало, попробуйте еще раз')
                continue
            else:
                print('Вы угадали, поздравляем!')
                print(f'Число было угадано с {count} попытки')
                break

def is_valid(x):
    return x.isdigit()

def is_pick():
    right = input('От 1 до какого числа я должен загадать? Введи целое число: ')
    while not is_valid(right):
        right = input('Некорректный ввод. Введите целое число: ')
    return int(right)
def is_again():
    count = 0
    while True:
        count += 1
        again = input('Хотите сыграть еще раз? Введите "да" или "нет":')
        if again == 'да':
            return True
        elif again == 'нет':
            return False
        else:
            if count == 3:
                print('Некорретный ввод 3 раза подряд. Игра завершается автоматически.')
                return False
            else:
                print('Введен некорретный ответ, попробуйте ещё раз. '
                      'После 3 некорретных вводов подряд игра завершится автоматически')


print("'Добро пожаловать в числовую угадайку'")
flag = True
while flag:
    is_game()
    flag = is_again()

print("Спасибо, что играли в числовую угадайку. Еще увидимся...")