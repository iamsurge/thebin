-- This script was made by 1x5x0x7x3#5168. Requested by: N0cturn0_#8742.
-- Note: This script was made based off another script (that was much more ugly and didn't work properly). I (1x5x0x7x3) have never played Rebirth Legends before. I was merely asked if I understood scripting, responded yes, given that other script, and was asked what was wrong and how to fix it. Ended up rewriting the entire thing.

local plr = game:GetService("Players").LocalPlayer
local uis = game:GetService("UserInputService")
local rs = game:GetService("ReplicatedStorage")

getgenv().Craft = false;
getgenv().Egg = false;

local config = {
	["CraftDelay"] = 20; -- wait before crafting
	["TPDelay"] = 0.3; -- wait before TPChest moves on to another chest
	["EggHatchDelay"] = 0.1; -- wait before hatching an egg
	["Egg"] = {"EGGNAME", "Triple"}
}

local keybinds = {
	["TPChest"] = Enum.KeyCode.E; 
	["AutoCraft"] = Enum.KeyCode.G;
	["EggHatch"] = Enum.KeyCode.H;
}

local pos = CFrame.new

local chestLocations = {pos(244,5,-33);pos(-443,35,510);pos(975,-49,133);pos(-418,36,-458);pos(215,48,-483);pos(580,36,-775);pos(368,90,-2000);pos(905,9,-388);pos(-934,43,-316);pos(-242,-57,-256);pos(-2146,4,-304);pos(-676,3,1113);}

-- TPChest

local function tpChest(hrp)
	if hrp ~= nil then
		for _,v in pairs(chestLocations) do
			if hrp ~= nil then
				hrp.CFrame = v
				wait(config.TPDelay)
			end
		end
	end
end


uis.InputBegan:Connect(function(key,gpe)
	local chr = plr.Character or plr.CharacterAdded:Wait()
	local hrp = chr:FindFirstChild("HumanoidRootPart")
	if not gpe and hrp ~= nil then -- If not doing anything else (typing in chat or something like that)
		key = key.KeyCode
		if key == keybinds.TPChest then
			tpChest(hrp)
		elseif key == keybinds.EggHatch then
			if getgenv().Egg == false then
				getgenv().Egg = true
				repeat
					wait(config.EggHatchDelay)
					rs.Functions.Unbox:InvokeServer(unpack(config.Egg))
				until getgenv().Egg == false
			elseif getgenv().Egg == true then
				getgenv().Egg = false
			end
		elseif key == keybinds.AutoCraft then
			if getgenv().Craft == false then
				getgenv().Craft = true
				repeat
					rs.Functions.Request:InvokeServer("CraftAll",{})
					wait(config.CraftDelay)
				until getgenv().Craft == false
			elseif getgenv().Craft == true then
				getgenv().Craft = false
			end
		end
	end
end)