--[[
    Updater v1.0.0 by SimplyAzgoth

    Disclaimer: I am not the best coder.

    Script allows for CC:Tweaked computer's code to easily be updated from a local server.
    Requires you to enable local http servers in your CC:Tweaked configs. See https://tweaked.cc/guide/local_ips.html for help.

    Your server must give a response in the json of:
    {
        "filePath": "(filepath here)",
        "code": "(code here)"
    }
--]]


local URL = "http://127.0.0.1:5000"
local response = http.get(URL)

if response.getResponseCode() == 200 then 

    print("Successfully requested from: " .. URL)

    local data_table = textutils.unserialiseJSON(response.readAll())
    
    local file = fs.open(data_table["filePath"], "w")
    file.write(data_table["code"])
    file.close()

    print("Successfully written code to: " .. data_table["filePath"])

else
    print("GET request errored with code: " .. response.getResponseCode())
end