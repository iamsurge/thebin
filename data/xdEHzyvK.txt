alias: >-
  Notifications | Doorbell - Person detection  - [ Flash-BLUE | Android
  Notification | Windows Notification | Browser Mod Pop-up | Nest Hub Camera
  Stream | Alexa TTS Announcement ] ***
description: ""
trigger:
  - entity_id:
      - sensor.doorbell_camera_detected_object
    platform: state
    to: person
    id: motion_at_front_door
    variables:
      doorbell_person_detected_alexa: Someone is at the Front Door.
      doorbell_person_detected_google_assistant: Someone is at the Front Door.
      doorbell_person_detected_persistent: Someone is at the Front Door.
      doorbell_person_detected_ios: Someone is at the Front Door.
      doorbell_person_detected_android: Someone is at the Front Door.
      doorbell_person_detected_windows: Someone is at the Front Door.
      doorbell_person_detected_lametric: Someone is at the Front Door.
    alias: "Trigger: Motion at Front Door"
  - platform: event
    event_type: timer.finished
    id: doorbell_camera_timer_complete
    event_data:
      entity_id: timer.doorbell_stream_timer
    alias: "Trigger: Doorbell Camera Timer Expires"
condition: []
action:
  - service: notify.alexa_media
    data:
      message: "\"someone is at the front door\""
      target: media_player.office_echo
      data:
        type: tts
    alias: "TTS Notifications: Send a TTS to Office Alexa Show"
    enabled: false
  - choose:
      - conditions:
          - condition: trigger
            id: motion_at_front_door
        sequence:
          - parallel:
              - service: timer.start
                data:
                  duration: "0"
                target:
                  entity_id: timer.doorbell_stream_timer
                alias: " Timer:  Doorbell Camera Timer"
              - service: notify.mobile_app_android_devices_group
                data:
                  title: Door Bell
                  message: "{{ doorbell_person_detected_android }}"
                  data:
                    color: skyblue
                    channel: Security
                    vibrationPattern: 100, 1000, 100, 1000, 100
                    importance: urgent
                    image: /api/camera_proxy/camera.doorbell_camera
                    persistant: true
                    tag: door_bell
                    confirmation: true
                    ttl: 0
                    priority: high
                alias: " Notification: to Android Mobile Phone Group "
              - service: notify.dragon
                data:
                  title: Doorbell Alert
                  message: "{{ doorbell_person_detected_windows }}"
                  data:
                    image: /api/camera_proxy/camera.doorbell_camera
                    duration: 30
              - service: browser_mod.popup
                data:
                  content:
                    type: picture-entity
                    entity: camera.doorbell_camera
                    show_state: false
                    camera_view: live
                  timeout: 30000
                  size: normal
                target:
                  device_id:
                    - dragon-browser
                alias: "browser_mod: dragon_browser"
              - service: notify.lametric_office
                data:
                  message: "{{ doorbell_person_detected_lametric }}"
                  data:
                    sound: positive3
                    icon: "6778"
                    cycles: 2
                    priority: critical
                    icon_type: none
                alias: "Notifications: Send to La Metric Office"
              - service: notify.lametric_livingroom
                data:
                  message: "{{ doorbell_person_detected_lametric }}"
                  data:
                    sound: positive3
                    icon: "6778"
                    cycles: 2
                    priority: critical
                    icon_type: none
                alias: "Notifications: Send to La Metric Livingroom"
              - service: media_player.play_media
                target:
                  entity_id: media_player.office_nest
                data:
                  media_content_id: media-source://camera/camera.doorbell_camera
                  media_content_type: application/vnd.apple.mpegurl
                metadata:
                  title: Doorbell-Camera High
                  thumbnail: /api/camera_proxy/camera.doorbell_camera
                  media_class: video
                  children_media_class: null
                  navigateIds:
                    - {}
                    - media_content_type: app
                      media_content_id: media-source://camera
                alias: Play Doorbell-Camera High on Office Nest Hub
              - if:
                  - condition: or
                    conditions:
                      - condition: time
                        before: "23:00:00"
                        after: "18:00:00"
                        weekday:
                          - mon
                          - tue
                          - wed
                          - thu
                          - fri
                        alias: "Time condition:  Mon-Fri : 5:30pm - 11pm"
                      - condition: time
                        before: "23:00:00"
                        weekday:
                          - sun
                          - sat
                        after: "07:00:00"
                        alias: "Time condition:  Sat & Sun : 7am - 11pm"
                    alias: "Conditions: Weekday Evenings or Weekends"
                then:
                  - service: notify.alexa_media
                    data:
                      message: "\"someone is at the front door\""
                      target: media_player.office_echo
                      data:
                        type: tts
                    alias: "TTS Notifications: Send a TTS to Office Alexa Show"
                alias: " Perform an action if: Conditions: Weekday Evenings or Weekends | Then Alexa TTS Announcement"
              - choose:
                  - conditions:
                      - condition: or
                        conditions:
                          - condition: time
                            before: "23:00:00"
                            after: "17:30:00"
                            weekday:
                              - mon
                              - tue
                              - wed
                              - thu
                              - fri
                            alias: "Time condition:  Mon-Fri : 5:30pm - 11pm"
                          - condition: time
                            before: "23:00:00"
                            weekday:
                              - sun
                              - sat
                            after: "07:00:00"
                            alias: "Time condition:  Sat & Sun : 7am - 11pm"
                        alias: "Conditions: Weekday Evenings or Weekends"
                    sequence:
                      - service: notify.alexa_media
                        data:
                          message: "\"someone is at the front door\""
                          target: media_player.office_echo
                          data:
                            type: tts
                        alias: "TTS Notifications: Send a TTS to Office Alexa Show"
                enabled: false
                alias: "Conditional Action: Alexa TTS"
              - service: script.office_flash_aqua_3_times
                data: {}
                alias: " Script: Office - Flash AQUA - 3 Times"
                enabled: false
      - conditions:
          - condition: trigger
            id: doorbell_camera_timer_complete
        sequence:
          - service: script.ok_google_stop_casting
            data: {}
            alias: Stop Casting Garage Camera
    alias: Notifications | Doorbell - Person detection - Actions Package
mode: parallel
