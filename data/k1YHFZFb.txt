if #(arg) ~= 3 then
    print(string.format("%s <depth> <width> <height>", arg[0]))
    os.exit(1)
end

local x = arg[1]
local y = arg[2]
local z = arg[3]

function digFront()
    if turtle.detect() then
        turtle.dig()
    end
end

for k = 1, z do
    for j = 1, y do
        for i = 1, x do
            digFront()
            turtle.forward()
        end
        turtle.turnRight()
        digFront()
        turtle.forward()
        turtle.turnRight()
    end
    turtle.digUp()
    turtle.up()
    turtle.turnRight()
    turtle.turnRight()
end