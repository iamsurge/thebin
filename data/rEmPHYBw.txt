lines = []
with open("10_input.txt", "r") as infile:
    for line in infile.readlines():
        lines.append(line.strip("\r\n"))

x = 1
current_cycle = 0
cycles_remaining = 0
processing_value = 0

while lines:
    current_cycle += 1
    #START
    if cycles_remaining == 0: # If we're not still executing an instruction, start a new one.
        new_instr = lines.pop(0).split(" ")
        if new_instr[0] == "noop":
            cycles_remaining = 1
            processing_value = 0
        elif new_instr[0] == "addx":
            cycles_remaining = 2
            processing_value = int(new_instr[1])
    #DURING
    crt_pos = (current_cycle-1) % 40
    if abs(x-crt_pos) <= 1:
        print("#", end="")
    else:
        print(".", end="")
    if crt_pos == 39:
        print()
    #END
    cycles_remaining -= 1
    if cycles_remaining == 0: # An instruction has finished processing.
        x += processing_value