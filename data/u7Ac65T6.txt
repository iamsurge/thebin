local function selectItem(name)
    for i = 1,16,1 do
        local item = turtle.getItemDetail(i)
        if item ~= nil then
            if item["name"] == name then
                turtle.select(i)
                return
            end
        else
            print("no cotton to plant")
        end
    end
end


local function harvest()
    planted, block = turtle.inspectDown()
    if planted then
        if block["state"]["age"] == 3 then
            turtle.digDown()
            selectItem("harvestcraft:cottonitem")
            turtle.placeDown()
        end
    else
        selectItem("harvestcraft:cottonitem")
        turtle.placeDown()
    end
end


local function row(cols)
    for x = 1,cols-1,1 do
        turtle.forward()
        harvest()
    end
end

local width,height = ...


for y = 1,width/2,1 do
    row(height)
    turtle.turnRight()
    turtle.forward()
    harvest()
    row(height)
    turtle.turnLeft()
    turtle.forward()
    harvest()
end
