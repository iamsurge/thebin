#include <iostream>
#include <string>
#include <fstream>

using namespace std;

// функция обработки входной строки 
// функция возвращяет строку для ввода в файл
void chage_str(string* line_in, string* line_out) {
    // обнуляем строку, так как берём её по указателю
    *line_out = "";
    // счетчик для слова в строке
    int counter_word = 0;
    // переменная для хранения слов из строки
    string word = "";
    // прохождение по символам в строке 
    for (auto ch : *line_in) {
        // условие на пробел (конец слова)
        if ((ch == ' ') || (ch == '\n')) {
            // увеличиваем счетчик слова
            counter_word++;
            // если слово не третье в строке, то добавляем его в выходную строку
            if (counter_word % 3 != 0) {
                *line_out += word;
            }
            // если слово не добалвяем, то оставляем пробел 
            else {
                *line_out += ch;
            }
            // обнуляем слово
            word = "";
        }
        // заполняем слово по символам
        word += ch;
    }
    // добавляем последнее слово
    counter_word++;
    if (counter_word % 3 != 0) {
        *line_out += word + ' ';
    }
}

void main()
{
    setlocale(LC_ALL, "");

    // переменные, которые хранят названия файлов
    string name_in = "";
    string name_out = "";
    cout << "Введите имя исходного файла" << endl;
    cin >> name_in;
    cout << "Введите имя измененного файла" << endl;
    cin >> name_out;

    // переменные которые хранят читаемую строку и записываемую строку соответственно
    string line_in = "";
    string line_out = "";

    // открываем первый файл для чтения, а второй для записи
    fstream file_input(name_in);
    ofstream file_out(name_out);

    // проверка файлов на открытие
    if (file_input.is_open()) {
        cout << "input - success\n";
    }
    if (file_out.is_open()) {
        cout << "output - success\n";
    }

    // счетчик для строки
    int counter_line = 0;
    // цикл пока - пока берётся строка из первого файла
    while (getline(file_input, line_in)) {
        counter_line++;
        // если строка является четной (каждой второй)
        if (counter_line % 2 == 0) {
            // обрабатываем вторую строку для записи
            chage_str(&line_in, &line_out);
            file_out << line_out << "\n";
        }
        // записываем не измененную нечетную строку
        else {
            file_out << line_in << "\n";
        }
    }

    // закрываем файлы
    file_input.close();
    file_out.close();
}