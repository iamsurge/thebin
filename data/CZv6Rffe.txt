#!/usr/bin/env python
# -*- coding: utf-8 -*-
#
import tkinter as tk
from math import sqrt, factorial, pi



#######  funciones ############

def limpieza():
    global operacion
    calculo.set("0")
    operacion = ""


def clic(tecla):
    global operacion
    operacion = operacion + tecla
    calculo.set(operacion)
    
    
def hacer_cuenta():
    """Documentacion de la funcion"""
    global operacion
    try:
        total = str(eval(operacion))
    except Exception:
        limpieza()
        calculo.set("ERROR")
    else:
        calculo.set(total)
        operacion = total
    
    
def borrar_caracter():
    global operacion
    operacion = operacion[:-1]
    if operacion:
        calculo.set(operacion)
    else:
        calculo.set("0")
    




# Ventana que contiene la calculadora
calculadora = tk.Tk()
calculadora.title("Calculadora ACME")
calculadora.config(width=390, height=600, bg="Light Steel Blue")
calculadora.resizable(False,False)
calculadora.iconbitmap("icono_calc.ico")


# Creo dos variables: una para mostrar la cuenta en la pantalla y otra
# para mostrar el cálculo de lado consola
calculo = tk.StringVar()
operacion = ""

# llamo a la función limpieza para inicializar la calculadora
limpieza()

# creo la pantalla
pantalla = tk.Entry(
            font = ('arial',20,'bold'),
            width = 20,
            bd = 20,  # grosor del borde
            bg = "powder blue",
            justify = "right",
            textvariable = calculo,
            state = tk.DISABLED
)
pantalla.place(x=20, y=50)

# defino las dimensiones de las teclas y sus colores
ancho = 9
alto = 2
color1 = "Steel Blue"
color2 = "Steel Blue2"
color3 = "Steel Blue3"
color4 = "Steel Blue4"
color5 = "Slategray4"


########## Teclas de la calculadora ##############################
# tecla para borrar un caracter
tecla = tk.Button(text="DEL", width=ancho, height=alto, bg=color4, command=borrar_caracter)
tecla.place(x=287, y=140)




##### Primera fila: 1 2 3 +
tecla = tk.Button(text="1", width=ancho, height=alto, command=lambda:clic("1"))
tecla.place(x=17, y=200)
tecla = tk.Button(text="2", width=ancho, height=alto, command=lambda:clic("2"))
tecla.place(x=107, y=200)
tecla = tk.Button(text="3", width=ancho, height=alto, command=lambda:clic("3"))
tecla.place(x=197, y=200)
tecla = tk.Button(text="+", width=ancho, height=alto, bg=color1, command=lambda:clic("+"))
tecla.place(x=287, y=200)


##### Segunda fila: 4 5 6 -
tecla = tk.Button(text="4", width=ancho, height=alto, command=lambda:clic("4"))
tecla.place(x=17, y=260)
tecla = tk.Button(text="5", width=ancho, height=alto, command=lambda:clic("5"))
tecla.place(x=107, y=260)
tecla = tk.Button(text="6", width=ancho, height=alto, command=lambda:clic("6"))
tecla.place(x=197, y=260)
tecla = tk.Button(text="-", width=ancho, height=alto, bg=color1, command=lambda:clic("-"))
tecla.place(x=287, y=260)


##### Tercera fila: 7 8 9 x
tecla = tk.Button(text="7", width=ancho, height=alto, command=lambda:clic("7"))
tecla.place(x=17, y=320)
tecla = tk.Button(text="8", width=ancho, height=alto, command=lambda:clic("8"))
tecla.place(x=107, y=320)
tecla = tk.Button(text="9", width=ancho, height=alto, command=lambda:clic("9"))
tecla.place(x=197, y=320)
tecla = tk.Button(text="x", width=ancho, height=alto, bg=color1, command=lambda:clic("*"))
tecla.place(x=287, y=320)


##### Cuarta fila: ( 0 ) /
tecla = tk.Button(text="(", width=ancho, height=alto, bg=color2, command=lambda:clic("("))
tecla.place(x=17, y=380)
tecla = tk.Button(text="0", width=ancho, height=alto, command=lambda:clic("0"))
tecla.place(x=107, y=380)
tecla = tk.Button(text=")", width=ancho, height=alto, bg=color2, command=lambda:clic(")"))
tecla.place(x=197, y=380)
tecla = tk.Button(text="/", width=ancho, height=alto, bg=color1, command=lambda:clic("/"))
tecla.place(x=287, y=380)

##### Quinta fila: raiz coma_decimal potencia resto
tecla = tk.Button(text="\u221A", width=ancho, height=alto, bg=color3, command=lambda:clic("sqrt("))
tecla.place(x=17, y=440)
tecla = tk.Button(text=".", width=ancho, height=alto, command=lambda:clic("."))
tecla.place(x=107, y=440)
tecla = tk.Button(text="POW", width=ancho, height=alto, bg=color3, command=lambda:clic("**"))
tecla.place(x=197, y=440)
tecla = tk.Button(text="%", width=ancho, height=alto, bg=color3, command=lambda:clic("%"))
tecla.place(x=287, y=440)


##### Sexta fila: Clear Factorial pi =
tecla = tk.Button(text="CL", width=ancho, height=alto, bg=color4, command=limpieza)
tecla.place(x=17, y=500)
tecla = tk.Button(text="!", width=ancho, height=alto, bg=color3, command=lambda:clic("factorial("))
tecla.place(x=107, y=500)
tecla = tk.Button(text="\u03C0", width=ancho, height=alto, bg=color2, command=lambda:clic(str(pi)))
tecla.place(x=197, y=500)
tecla = tk.Button(text="=", width=ancho, height=alto, bg=color5, command=hacer_cuenta)
tecla.place(x=287, y=500)

calculadora.mainloop()
