#!/usr/bin/env python
# -*- coding: utf-8 -*-
#
import requests
url = "http://localhost:5000/alumnos"

while True:
    print("""
    Administración de alumnos
    ---------------------------
    1. Agregar un alumno
    2. Modificar un alumno
    3. Listar alumnos
    4. Eliminar un alumno
    5. Salir
    """)
    opcion = input("Seleccione una opción: ")
    
    if opcion == "1":
        nombre = input("Ingrese el nombre: ")
        cursos = int(input("Ingrese la cantidad de cursos: "))
        r = requests.post(url, json={'nombre':nombre, 'cursos':cursos})
        print("Server response code: ", r.status_code)
        print("Server response content: ", r.json())
    
    
        
    elif opcion == "2":
        id_alumno = int(input("Ingrese el ID: "))
        datos = {'id':id_alumno, 'nombre':None, 'cursos':None}
        cambio = input("¿Desea cambiar el nombre? (y/N): ")
        if cambio.casefold() == 'y':
            datos['nombre'] = input("Ingrese el nuevo nombre: ")
        cambio = input("¿Desea cambiar la cantidad de cursos? (y/N): ")
        if cambio.casefold() == 'y':
            datos['cursos'] = int(input("Ingrese la cantidad de cursos: "))
        r = requests.put(url, json=datos)
        print("Server response code:", r.status_code)
        print("Server response content: ", r.json())
        
        
    elif opcion == "3":
        r = requests.get(url)
        if r.status_code == 200:
            alumnos = r.json()['alumnos']
            if alumnos:
                print("Lista de alumnos")
                print("----------------")
                for alumno in alumnos:
                    print(alumno)
            else:
                print("No hay alumnos inscriptos")
        else:
            print("No se pudo descargar la lista de alumnos")
            print("Server response code: ", r.status_code)
    
    
            
    elif opcion == "4":
        id_alumno = int(input("Ingrese el ID: "))
        datos = {'id':id_alumno}
        r = requests.delete(url, json=datos)
        print("Server response code:", r.status_code)
        print("Server response content: ", r.json())
        
    elif opcion == "5":
        print("Finalizando sesión....")
        break
        
    else:
        print("Opción no disponible")
