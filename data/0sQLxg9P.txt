<?php
            $shopId = "partnershop";
            $X_Auth_Token = "partnerkey";
            
            $data = array(
                "email" => "jimmy999@example.it",
              );
            $data_array = json_encode( $data );

            $apiurl = "https://api.sandbox.soisy.it/api/shops/" . $shopId . "/orders";

            $headers = array();
            $headers[] = "User-Agent: PostmanRuntime/7.29.2";
            $headers[] = "Accept: */*";
            $headers[] = "x-auth-token: " . $X_Auth_Token;
            //$headers[] = 'Content-Type: application/x-www-form-urlencoded; charset=utf-8';
            //$headers[] = 'Content-Type: application/json; charset=utf-8';
            
            try
            {
                $curl       = curl_init();
                //curl_setopt($curl, CURLOPT_HTTPAUTH, CURLAUTH);
                curl_setopt( $curl, CURLOPT_URL, $apiurl );
                //curl_setopt( $curl, CURLOPT_RETURNTRANSFER, true );
                //curl_setopt( $curl, CURLOPT_POSTFIELDS, $data_array );
                //curl_setopt( $curl, CURLOPT_HTTPHEADER, array( 'Content-Type: application/json' ) );
                curl_setopt($curl, CURLOPT_HTTPHEADER, $headers);
                curl_setopt($curl,CURLOPT_HEADER,true);
                
                //curl_setopt($curl, CURLOPT_SSLVERSION, 1);
                //curl_setopt($curl, CURLOPT_ENCODING, 'gzip,deflate');
                //curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, 0);
                //curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, 0);
                
                $result = curl_exec( $curl );
                
                print_r("<p>Chiamata a " . $apiurl . "<br />");
                
                
                
                if($result === false)
                {
                    print_r("ERRORE!<br>");
                    print_r("Error Number:".curl_errno($curl)."<br>");
                    print_r("Error String:".curl_error($curl));
                }
                else
                {
                    echo "<pre>";
                    print_r("Risultato:");
                    print_r( json_decode( $result, true ) );
                    echo "</pre>";                    
                }

                curl_close( $curl );                
            } catch (Exception $ex) {
                echo "<pre>";
                print_r("ERRORE:");
                print_r( $ex->getMessage());
                echo "</pre>";
            }

              
            //phpinfo();
        ?>