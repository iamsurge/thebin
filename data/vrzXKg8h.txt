//при сборке добавить 2 переменных в настройках КК
#define     PIN     14 // пин пола
//Установка переменных через GET:  ip/valdes?int=1&set=Y, где Y - длительность.
///Установка переменных через GET:  ip/valdes?int=2&set=Y, где Y - период.
uint16_t period = 0;
uint16_t dlitelnost = 0;
 
void ICACHE_FLASH_ATTR startfunc()
{
    valdes[0] = 120;  //длительность на старте
    valdes[1] = 210;  //период на старте
    digitalWrite(PIN, 1);
}
void ICACHE_FLASH_ATTR timerfunc(uint32_t timersrc)
{
    if (period == valdes[1])
    {
        period = 0;
        dlitelnost = 0;
        digitalWrite(PIN, 1);
        sendmjd();
    }
    period++;
    if (dlitelnost > valdes[0])
    {
        digitalWrite(PIN, 0);
        sendmjd();
    }
    dlitelnost++;
}
void webfunc(char *pbuf)
{
    os_sprintf(HTTPBUFF, "длительность %d", valdes[0]);
    os_sprintf(HTTPBUFF, "период %d", valdes[1]);
}