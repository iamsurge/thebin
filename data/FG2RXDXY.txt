if #(arg) ~= 3 then
    print(string.format("%s <depth> <width> <height>", arg[0]))
    os.exit(1)
end

local x = tonumber(arg[1])
local y = tonumber(arg[2])
local z = tonumber(arg[3])

local reverse = false

local function digFront()
    if turtle.detect() then
        turtle.dig()
    end
end

local function turnHandler()
    if reverse then
        turtle.turnLeft()
    else
        turtle.turnRight()
    end
end

for k = 1, z do
    for j = 1, y do
        for i = 1, x - 1 do
            digFront()
            turtle.forward()
        end
        turnHandler()
        if j < y then
            digFront()
            turtle.forward()
        end
        turnHandler()
        reverse = not reverse
    end
    if k < z then
        turtle.digUp()
        turtle.up()
        reverse = not reverse
    end
end