local tArgs = { ... }
local width = tArgs[1] - 1
local length = tArgs[2] -2
local chest = 1

function clean()
  turtle.dig()
  turtle.select(1)
  turtle.place()
  for i = 1, 16 do
    turtle.select(i)
    turtle.drop()
  end
  turtle.select(1)
  turtle.dig()
end

function start()
  turtle.digUp()
  turtle.up()
  mine()
end

function turn(y)
 if y % 2 == 0 then
   turtle.turnLeft()
   mine()
   turtle.turnLeft()
 else
   turtle.turnRight()
   mine()
   turtle.turnRight()
 end
end

function returnHome()
 if width % 2 == 1 then
   turtle.turnLeft()
   for j=1, width do
     turtle.forward()
   end
   turtle.turnLeft()
   turtle.back()
   turtle.down()
 else
   turtle.turnRight()
   for j=1, width do
     turtle.forward()
   end
   turtle.turnRight()
   for h=0, length do
     turtle.forward()
   end
   turtle.turnLeft()
   turtle.turnLeft()
   turtle.back()
   turtle.down()
 end
end

function mine()
  turtle.dig()
  turtle.forward()
  turtle.digUp()
  turtle.digDown()
  verifSpace()
end

function verifSpace()
  turtle.select(16)
  if turtle.getItemCount() > 0 then
    clean()
  end
  turtle.select(2)
end


start()
for y = 0, width do
  for i = 0, length do
    mine()
  end
  if y < width then
    verifSpace()
    turn(y)
  end
end
returnHome()
clean()