from pyChatGPT import ChatGPT
from dotenv import load_dotenv
import speech_recognition as sr
import os
load_dotenv()
api = ChatGPT(os.getenv('OPENAI_API_KEY')) # Put in your session ID here

stoppingWords = ["stop", "goodbye", "bye", "exit", "quit"]

def main():
    r = sr.Recognizer()
    with sr.Microphone() as source:
        r.adjust_for_ambient_noise(source)
        print("Say something!")
        audio = r.listen(source)
        
        try:
            print(f"You said: {r.recognize_google(audio)}")
            
            if r.recognize_google(audio) in stoppingWords:
                engine.say("Goodbye!")
                engine.runAndWait()
                exit()
            else:
            	engine.say("Thinking of a response...")
            	engine.runAndWait()
            	response = api.send_message(r.recognize_google(audio))
            	print(response["message"])
            	engine.say(response["message"])
            	engine.runAndWait()
             
        except Exception as e:
            print(f"Error: {e}")

while True :
    main()