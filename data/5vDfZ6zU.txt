
import pandas as pd
import requests
from bs4 import BeautifulSoup as bs
# import cv2
# import qrtools
# from PIL import Image
# from pyzbar.pyzbar import decode


main_url = "http://autosale2022.task-sss.krasilnikov.spb.ru"
url = main_url + "/ads/6ed459ea169d96c38c7167d4cf471013"

response = requests.get(url)
# print(response.text)

soup = bs(response.text,'html.parser')
for link in soup.find_all('a'):
    car_url = main_url+link['href']
    response = requests.get(car_url)
    car_soup = bs(response.text,'html.parser')
    id = car_soup.find('td', string = "id").find_next_sibling().get_text()
    name = car_soup.find('td', string = "name").find_next_sibling().get_text()
    acceleration = car_soup.find('td', string = "acceleration").find_next_sibling().get_text()
    year = car_soup.find('td', string = "year").find_next_sibling().get_text()
    origin = car_soup.find('td', string = "origin").find_next_sibling().get_text()
    displacement = car_soup.find('td', string = "displacement").find_next_sibling().get_text()
    img_url = car_soup.find('td', string = "weight").find_next_sibling().find('img')['src']
    print(img_url)
    # img = cv2.imread(img_url)
    #     # detector = cv2.QRCodeDetector()
    #     # print(detector.detectAndDecode(img))
   # data = decode(Image.open(img_url))
    # print(data)
