using System;
using System.Collections.Generic;
using System.Threading;

namespace ConsoleApp1
{
    class Program
    {
        static int DiceRoll(Random rnd)
        {
            int number = rnd.Next(1, 7);
            return number;
        }
        static void Main(string[] args)
        {
            Random rnd = new Random();
            bool active = true;
            while (active)
            {
            int diceCount = 0;
            List<int> sum = new List<int>();
            DateTime time = DateTime.Now;
            Console.WriteLine("Johanna Salmi Sunnerdahl - " + time);
            Console.WriteLine("Hej och välkommen!");
            Console.WriteLine("Vill du kasta tärning? Y/N");
            string yesOrNo = Console.ReadLine();

            if (yesOrNo.ToUpper() == "Y")
                {
                    Console.WriteLine("Hur många tärningar vill du kasta?");
                    Console.WriteLine("1. en tärning");
                    Console.WriteLine("2. två tärningar");
                    Console.WriteLine("3. tre tärningar");
                    Console.WriteLine("4. fyra tärningar");
                    Console.WriteLine("5. fem tärningar");
                    Console.WriteLine("6. Avsluta");
                    System.ConsoleKeyInfo menuOption = Console.ReadKey();
                    Console.Clear();

                    switch (menuOption.Key)
                    {
                        case ConsoleKey.D1:
                        case ConsoleKey.NumPad1:
                        case ConsoleKey.D2:
                        case ConsoleKey.NumPad2:
                        case ConsoleKey.D3:
                        case ConsoleKey.NumPad3:
                        case ConsoleKey.D4:
                        case ConsoleKey.NumPad4:
                        case ConsoleKey.D5:
                        case ConsoleKey.NumPad5:
                            diceCount = Convert.ToInt32(menuOption.KeyChar.ToString());
                            break;
                        case ConsoleKey.D6:
                        case ConsoleKey.NumPad6:
                            active = false;
                            break;
                        default:
                            Console.Clear();
                            Console.WriteLine("Felaktigt val!");
                            break;
                    }

                    if (diceCount > 0)
                    {
                        for (int i = 0; i < diceCount; i++) // Increase i for each iteration until it matches the amount of dice
                        {
                            bool rolling = true;
                            int rolls = 1;
                            while (rolling && rolls > 0) // Keep rolling until we run out of dice
                            {
                                int diceResult = DiceRoll(rnd);
                                rolls--;
                                if (diceResult == 6)
                                {
                                    rolls = +2; //Adds two rolls if we get a 6
                                    sum.Add(diceResult); // Adds the results to our list
                                }
                                else
                                {
                                    if (rolls < 1)
                                    {
                                        rolling = false; // Breaks the loop if rolls reach zero
                                    }
                                    sum.Add(diceResult);
                                }
                            }
                        }
                        int totalSum = 0;
                        int amount = 0;
                        foreach (int roll in sum)
                        {
                            amount++;
                            if (roll == 6)
                            {
                                Console.WriteLine("Tärning:" + roll.ToString() + " | Total Summa:" + totalSum.ToString() + " | Antal Kast:" + amount.ToString() + " - Sexa! Två nya tärningar läggs till!");
                            }
                            else
                            {
                                totalSum += roll;
                                Console.WriteLine("Tärning:" + roll.ToString() + " | Total Summa:" + totalSum.ToString() + " | Antal Kast:" + amount.ToString());
                            }
                        }
                        Console.WriteLine("\nResultat: " + totalSum.ToString());
                    }
                }
                if (yesOrNo.ToUpper() == "N")
                {
                    Console.WriteLine("Tryck på valfri knapp för att avsluta programmet.");
                    Console.ReadKey();
                    System.Environment.Exit(1);
                }
                if (yesOrNo.ToUpper() != "Y" && yesOrNo.ToUpper() != "N")
                {
                    Console.WriteLine("hello");
                }
            }
        }
    }
}