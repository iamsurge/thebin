#!/usr/bin/env python
# -*- coding: utf-8 -*-
#
# Script que pide una ruta y una extensiòn e imprime un listado de todos
# los archivos encontrados, buscando en forma recursiva
# EJ de forma de uso
# python buscar_archivos.py <ruta> <extension>

import sys
import os

# variable que indica si encuentro algún archivo
hallados = 0

# verifico la cantidad de argumentos
if len(sys.argv) != 3:
    sys.exit("Error: ejecutar 'python buscar_archivos.py <ruta> <extension>'")

# asigno los parametros:
ruta, extension = sys.argv[1:]
    
# verifico la ruta
if not os.path.exists(ruta):
    sys.exit(f"Error: no existe la ruta '{ruta}'")
    
# busco los archivos en la ruta: uso os.walk()
# os.walk() itera sobre 3 valores:
# el nombre de la carpeta actual
# una lista de carpetas dentro de la carpeta actual
# una lista de archivos dentro de la carpeta actual

for carpeta_actual, lista_carpetas, lista_archivos in os.walk(ruta):
    for archivo in lista_archivos:
        if archivo.endswith(extension):
            print(os.path.join(carpeta_actual, archivo))
            hallados += 1
            
if not hallados:
    print(f"No se encontraron archivos con extension '{extension}' en la ruta '{ruta}'")
else:
    print(f"Total hallados: {hallados}")