from time import strftime
import random
from colorama import init, Fore, Back, Style

# essential for Windows environment
init()
# all available foreground colors
FORES = [ Fore.BLACK, Fore.RED, Fore.GREEN, Fore.YELLOW, Fore.BLUE, Fore.MAGENTA, Fore.CYAN, Fore.WHITE ]
# all available background colors
BACKS = [ Back.BLACK, Back.RED, Back.GREEN, Back.YELLOW, Back.BLUE, Back.MAGENTA, Back.CYAN, Back.WHITE ]
# brightness values
BRIGHTNESS = [ Style.DIM, Style.NORMAL, Style.BRIGHT ]

color = random.choice(FORES) ## kiest een random kleur uit

def leeschat():
    f = open("c:/ChatApp/Chat.txt", "r")
    print(f.read())
    f.close()
 
def schrijfchat(bericht):
    f = open("c:/ChatApp/Chat.txt", "a")
    f.write(bericht+"\n")
    f.close()
 
def wijzignickname(nickname):
    f = open("nickname.txt", "w")
    nickname = print(color, nickname)
    f.write(str(nickname))
    f.close()

def wissengeschiedenis():
    f = open("c:/ChatApp/Chat.txt", "r+")
    f.truncate(0) # need '0' when using r+
    f.close()

def disconnect():
    f = open("c:/ChatApp/Chat.txt", "a")
    f.write(f"{nickname} has disconnected!"+"\n")
    f.close()

def connected():
    f = open("c:/ChatApp/Chat.txt", "a")
    f.write(f"{nickname} has connected!"+"\n")
    f.close()

def datum():
    f = open("c:/ChatApp/Chat.txt", "a")
    f.write(f"{current_date}"+"\n")
    f.close()


from datetime import datetime 
from datetime import date

now = datetime.now()



current_date = now.strftime("%m/%d/%Y") ## current date is de datum.



adminwachtwoord = "zwartegat" ## wachtwoord om de geschiedenis te wissen

nickname=input("Welkom bij de EZCIJFERAPP. Wat wil je als nickname?\n")+": "
wijzignickname(nickname)
connected() ## geeft aan iedereen in de chat dat u gejoined heeft
datum() ## laat na het inloggen de datum van vandaag printen 

while True: ## weergegeven text na het invoeren van nickname
    print("Wat wil je doen?")
    print("1. Lees de chat")
    print("2. Schrijf iets in de chat")
    print("3. (Admin) Wissen van de geschiedenis")
    print("4. Disconnect van de chat\n")
    
    current_time = now.strftime("%H:%M")+" - " ## current time is de tijd nu. (Ik wil dat de tijd na elke bericht geupdate wordt)

    keuze=input()
    if keuze=="2": ## schrijven in de chat

        
        schrijfchat(current_time+nickname+input("Wat wil je schrijven?\n"))
        leeschat()

    elif keuze=="3": ## geschiedenis wissen
        print("Voer de admin wachtwoord in")
        wachtwoord = input("")
        if wachtwoord == adminwachtwoord:  ## of de wachtwoord geldig is of niet
            wissengeschiedenis()
            schrijfchat("De geschiedenis werd door een admin gewist!")
            leeschat()
        else:
            print("Niet goed!")

    elif keuze=='4': ## de code stoppen en disconnecten van de chat
        disconnect()
        leeschat()
        break

    else:
        leeschat() ## als iets anders dan 2, 3 of 4 wordt ingetypt, wordt de chat alleen gelezen



