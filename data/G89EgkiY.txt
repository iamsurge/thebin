<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>FizzBuzz</title>
        <script>
            const COST = 10, FREQUENCIES = {};
            const LEAST_FREQUENT_NUMBERS = new Map();
            const LEAST_FREQUENT_NUMBER_PRICE_RESULTS = new Map();
            const MOST_FREQUENT_NUMBERS = new Map();
            const MOST_FREQUENT_NUMBER_PRICE_RESULTS = new Map();
            const PRICES = { "4.5": 9600, "4": 640, "3.5": 320, "3": 40 };
            const RESULTS = new Map([
                ["30/09/2002", ["7", "15", "24", "41", "47", "49", "25"]],
                ["26/09/2002", ["10", "12", "15", "17", "34", "42", "29"]],
                ["24/09/2002", ["1", "10", "34", "41", "47", "48", "19"]],
                ["20/09/2002", ["15", "19", "25", "34", "38", "44", "5"]],
                ["17/09/2002", ["5", "13", "19", "27", "29", "35", "40"]],
                ["12/09/2002", ["11", "23", "32", "33", "43", "48", "2"]],
                ["10/09/2002", ["8", "14", "16", "22", "37", "46", "36"]],
                ["05/09/2002", ["15", "22", "34", "40", "41", "47", "10"]],
                ["03/09/2002", ["10", "37", "40", "42", "43", "46", "30"]],
                ["31/08/2002", ["3", "4", "23", "25", "31", "44", "35"]],
                ["29/08/2002", ["3", "7", "31", "32", "35", "47", "15"]],
                ["27/08/2002", ["22", "24", "28", "33", "36", "39", "41"]],
                ["24/08/2002", ["2", "7", "12", "19", "23", "49", "4"]],
                ["22/08/2002", ["1", "3", "8", "25", "43", "46", "21"]],
                ["20/08/2002", ["2", "6", "16", "26", "36", "41", "8"]],
                ["17/08/2002", ["10", "17", "36", "43", "45", "47", "33"]],
                ["15/08/2002", ["4", "23", "24", "25", "38", "40", "37"]],
                ["13/08/2002", ["7", "14", "26", "32", "41", "49", "12"]],
                ["10/08/2002", ["5", "28", "29", "31", "44", "46", "45"]],
                ["08/08/2002", ["5", "15", "26", "27", "28", "35", "2"]],
                ["06/08/2002", ["5", "10", "24", "32", "39", "49", "1"]],
                ["03/08/2002", ["9", "10", "11", "15", "19", "28", "37"]],
                ["01/08/2002", ["3", "7", "11", "22", "28", "36", "18"]],
                ["30/07/2002", ["6", "22", "25", "26", "27", "45", "36"]],
                ["27/07/2002", ["1", "23", "25", "32", "43", "44", "30"]],
                ["25/07/2002", ["1", "5", "6", "31", "39", "46", "44"]],
                ["23/07/2002", ["9", "12", "25", "31", "43", "44", "5"]],
                ["20/07/2002", ["1", "11", "29", "33", "36", "44", "37"]],
                ["18/07/2002", ["11", "22", "24", "28", "29", "38", "20"]],
                ["16/07/2002", ["7", "13", "14", "20", "29", "32", "28"]],
                ["13/07/2002", ["9", "24", "25", "27", "36", "38", "41"]],
                ["11/07/2002", ["14", "19", "23", "36", "44", "46", "7"]],
                ["09/07/2002", ["10", "20", "26", "28", "35", "48", "13"]],
                ["06/07/2002", ["10", "20", "21", "33", "40", "44", "34"]],
                ["04/07/2002", ["5", "32", "34", "38", "39", "49", "8"]]
            ].reverse());
            let leastFrequentNumberNetGain = -COST * RESULTS.size;
            let mostFrequentNumberNetGain = leastFrequentNumberNetGain;
            const collectResults = (numbers, date) => {
                if (Object.keys(FREQUENCIES).length > 0) {
                    collectMostFrequentNumbers(date);
                    collectPriceResults(date, numbers);
                }
                collectFrequencies(numbers);
            }, collectMostFrequentNumbers = (date) => {
                LEAST_FREQUENT_NUMBERS.set(date, frequentNumbers(leastFrequentNumberComparator));
                MOST_FREQUENT_NUMBERS.set(date, frequentNumbers(mostFrequentNumberComparator));
            }, collectPriceResults = (date, numbers) => {
                LEAST_FREQUENT_NUMBER_PRICE_RESULTS.set(date, priceResult(date, numbers, LEAST_FREQUENT_NUMBERS));
                MOST_FREQUENT_NUMBER_PRICE_RESULTS.set(date, priceResult(date, numbers, MOST_FREQUENT_NUMBERS));
            }, collectFrequencies = numbers => {
                numbers.forEach(number => {
                    FREQUENCIES[number] = (FREQUENCIES[number] || 0) + 1;
                });
            }, leastFrequentNumberComparator = ([numberA, frequencyA], [numberB, frequencyB]) => {
                return frequencyA - frequencyB;
            }, mostFrequentNumberComparator = ([numberA, frequencyA], [numberB, frequencyB]) => {
                return frequencyB - frequencyA;
            }, frequentNumbers = comparator => Object.entries(FREQUENCIES).sort(comparator).slice(0, 6).map(([number, frequency]) => number);
            const priceResult = (date, numbers, frequentNumberContainer) => {
                const normalNumbers = numbers.slice(0, 6);
                const specialNumber = numbers[6];
                const frequentNumbers = frequentNumberContainer.get(date);
                return (normalNumbers.filter(number => {
                    return frequentNumbers.indexOf(number) >= 0;
                }).length + (frequentNumbers.indexOf(specialNumber) >= 0 ? 0.5 : 0)).toString();
            }, updateLeastFrequentNumberNetGain = result => {
                leastFrequentNumberNetGain += PRICES[result] || 0;
            }, updateMostFrequentNumberNetGain = result => {
                mostFrequentNumberNetGain += PRICES[result] || 0;
            };
            RESULTS.forEach(collectResults);
            LEAST_FREQUENT_NUMBER_PRICE_RESULTS.forEach(updateLeastFrequentNumberNetGain);
            MOST_FREQUENT_NUMBER_PRICE_RESULTS.forEach(updateMostFrequentNumberNetGain);
            console.info("FREQUENCIES", FREQUENCIES);
            console.info("LEAST_FREQUENT_NUMBERS", LEAST_FREQUENT_NUMBERS);
            console.info("MOST_FREQUENT_NUMBERS", MOST_FREQUENT_NUMBERS);
            console.info("LEAST_FREQUENT_NUMBER_PRICE_RESULTS", LEAST_FREQUENT_NUMBER_PRICE_RESULTS);
            console.info("MOST_FREQUENT_NUMBER_PRICE_RESULTS", MOST_FREQUENT_NUMBER_PRICE_RESULTS);
            console.info("leastFrequentNumberNetGain", leastFrequentNumberNetGain);
            console.info("mostFrequentNumberNetGain", mostFrequentNumberNetGain);
        </script>
    </head>
    <body>
    </body>
</html>