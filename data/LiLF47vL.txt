package com.example.four;

import androidx.appcompat.app.AppCompatActivity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.widget.TextView;

import java.util.Calendar;

public class WeatherActivity extends AppCompatActivity {
    TextView City, Temp, Pressure, Humidity, TempMin, TempMax, Time;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_weather);

        City = findViewById(R.id.currentCity);
        Temp = findViewById(R.id.currentTemp);
        Pressure = findViewById(R.id.currentPress);
        Humidity = findViewById(R.id.currentHumid);
        TempMin = findViewById(R.id.minTemp);
        TempMax = findViewById(R.id.maxTemp);
        Time = findViewById(R.id.currentTime);

        Intent intent = getIntent();
        String city = intent.getStringExtra("city");
        String temp = intent.getStringExtra("temp");
        String pressure = intent.getStringExtra("pressure");
        String humidity = intent.getStringExtra("humidity");
        String tempMin = intent.getStringExtra("temp_min");
        String tempMax = intent.getStringExtra("temp_max");

        Thread t = new Thread() {
            @Override
            public void run() {
                try {
                    while (!isInterrupted()) {
                        Thread.sleep(1000);
                        runOnUiThread(new Runnable() {
                            @Override
                            public void run() {
                                Calendar c = Calendar.getInstance();
                                int hour = c.get(Calendar.HOUR_OF_DAY);
                                String hourExt = String.format("%02d", hour);
                                int min = c.get(Calendar.MINUTE);
                                String minExt = String.format("%02d", min);
                                int sec = c.get(Calendar.SECOND);
                                String secExt = String.format("%02d", sec);
                                Time.setText(hourExt+":"+minExt+":"+secExt);
                            }
                        });
                    }
                } catch (InterruptedException e) {
                }
            }
        };
        t.start();

        City.setText(city);
        Temp.setText(temp+"℃");
        Pressure.setText(pressure+" hpa");
        Humidity.setText(humidity+" %");
        TempMin.setText(tempMin+"℃");
        TempMax.setText(tempMax+"℃");
    }
}

