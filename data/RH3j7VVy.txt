    .text

    .global compar
compar:
    push    %ebp
    movl    %esp,   %ebp
    // пролог


    // кладу в eax и ebx нужные адреса
    movl    8(%ebp),    %eax
    movl    12(%esp),   %ebx

    push    %ecx
    push    %edx

    // теперь в
    xorl    %ecx,   %ecx
    xorl    %edx,   %edx

    movw    (%eax),     %cx
    movw    (%ebx),     %dx

    cmp     $0,     %cx
    jg      minus1
    jmp     if2
minus1:
    imulw    $-1,    %cx
if2:
    cmp     $0,     %dx
    jg      minus2
    jmp     endif
minus2:
    imulw    $-1,    %dx
endif:

    cmpw    %cx,    %dx
    jl      more
    jmp     less
more:
    movl    $1,     %eax
    jmp     epilog
less:
    movl    $-1,    %eax


epilog:
    pop     %edx
    pop     %ecx


    // эпилог
    movl    %ebp,   %esp
    pop     %ebp
    ret



    .global sort_by_abs
sort_by_abs:
    push    %ebp
    movl    %esp,   %ebp



    movl    8(%ebp),     %eax
    push    %eax


    movl    16(%ebp),    %eax
    push    %eax
    
    push    $compar
    call    qsort



    movl    %ebp,   %esp
    pop     %ebp
    xorl    %eax,   %eax
    ret